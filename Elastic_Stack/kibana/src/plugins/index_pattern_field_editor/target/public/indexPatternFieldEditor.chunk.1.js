(window.indexPatternFieldEditor_bundle_jsonpfunction=window.indexPatternFieldEditor_bundle_jsonpfunction||[]).push([[1],Array(44).concat([function(e,t,i){"use strict";var r,n=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),l=[];function a(e){for(var t=-1,i=0;i<l.length;i++)if(l[i].identifier===e){t=i;break}return t}function s(e,t){for(var i={},r=[],n=0;n<e.length;n++){var o=e[n],s=t.base?o[0]+t.base:o[0],d=i[s]||0,u="".concat(s," ").concat(d);i[s]=d+1;var c=a(u),f={css:o[1],media:o[2],sourceMap:o[3]};-1!==c?(l[c].references++,l[c].updater(f)):l.push({identifier:u,updater:x(f,t),references:1}),r.push(u)}return r}function d(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var n=i.nc;n&&(r.nonce=n)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var l=o(e.insert||"head");if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(t)}return t}var u,c=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function f(e,t,i,r){var n=i?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=c(t,n);else{var o=document.createTextNode(n),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(o,l[t]):e.appendChild(o)}}function p(e,t,i){var r=i.css,n=i.media,o=i.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var m=null,_=0;function x(e,t){var i,r,n;if(t.singleton){var o=_++;i=m||(m=d(t)),r=f.bind(null,i,o,!1),n=f.bind(null,i,o,!0)}else i=d(t),r=p.bind(null,i,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var i=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<i.length;r++){var n=a(i[r]);l[n].references--}for(var o=s(e,t),d=0;d<i.length;d++){var u=a(i[d]);0===l[u].references&&(l[u].updater(),l.splice(u,1))}i=o}}}},function(e,t,i){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i=e[1]||"",r=e[3];if(!r)return i;if(t&&"function"==typeof btoa){var n=(l=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(l)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(s," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[i].concat(o).concat([n]).join("\n")}var l,a,s;return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,r){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(r)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(n[l]=!0)}for(var a=0;a<e.length;a++){var s=[].concat(e[a]);r&&n[s[0]]||(i&&(s[2]?s[2]="".concat(i," and ").concat(s[2]):s[2]=i),t.push(s))}},t}},,,,,,,,,,,function(e,t,i){e.exports=i(36)(1074)},,function(e,t,i){switch(window.__kbnThemeTag__){case"v7dark":return i(59);case"v7light":return i(61);case"v8dark":return i(63);case"v8light":return i(65)}},function(e,t,i){var r=i(44),n=i(60);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};r(n,o);e.exports=n.locals||{}},function(e,t,i){(t=i(45)(!1)).push([e.i,".fieldEditor__flyoutPanels{height:100%}.fieldEditor__flyoutPanels__column{height:100%;overflow:hidden}.fieldEditor__flyoutPanel{height:100%;overflow-y:auto;padding:24px}.fieldEditor__flyoutPanel--pageBackground{background-color:#141519}.fieldEditor__flyoutPanel--emptyShade{background-color:#1D1E24}.fieldEditor__flyoutPanel--leftBorder{border-left:1px solid #343741}.fieldEditor__flyoutPanel--rightBorder{border-right:1px solid #343741}.fieldEditor__flyoutPanel--withContent{padding:0;overflow-y:hidden;display:flex;flex-direction:column}.fieldEditor__flyoutPanel__header{padding:0 !important}.fieldEditor__flyoutPanel__content{flex:1;overflow-y:auto;overflow-x:hidden;padding:24px}.fieldEditor__flyoutPanel__footer{flex:0}\n",""]),e.exports=t},function(e,t,i){var r=i(44),n=i(62);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};r(n,o);e.exports=n.locals||{}},function(e,t,i){(t=i(45)(!1)).push([e.i,".fieldEditor__flyoutPanels{height:100%}.fieldEditor__flyoutPanels__column{height:100%;overflow:hidden}.fieldEditor__flyoutPanel{height:100%;overflow-y:auto;padding:24px}.fieldEditor__flyoutPanel--pageBackground{background-color:#fafbfd}.fieldEditor__flyoutPanel--emptyShade{background-color:#fff}.fieldEditor__flyoutPanel--leftBorder{border-left:1px solid #D3DAE6}.fieldEditor__flyoutPanel--rightBorder{border-right:1px solid #D3DAE6}.fieldEditor__flyoutPanel--withContent{padding:0;overflow-y:hidden;display:flex;flex-direction:column}.fieldEditor__flyoutPanel__header{padding:0 !important}.fieldEditor__flyoutPanel__content{flex:1;overflow-y:auto;overflow-x:hidden;padding:24px}.fieldEditor__flyoutPanel__footer{flex:0}\n",""]),e.exports=t},function(e,t,i){var r=i(44),n=i(64);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};r(n,o);e.exports=n.locals||{}},function(e,t,i){(t=i(45)(!1)).push([e.i,".fieldEditor__flyoutPanels{height:100%}.fieldEditor__flyoutPanels__column{height:100%;overflow:hidden}.fieldEditor__flyoutPanel{height:100%;overflow-y:auto;padding:24px}.fieldEditor__flyoutPanel--pageBackground{background-color:#141519}.fieldEditor__flyoutPanel--emptyShade{background-color:#1D1E24}.fieldEditor__flyoutPanel--leftBorder{border-left:1px solid #343741}.fieldEditor__flyoutPanel--rightBorder{border-right:1px solid #343741}.fieldEditor__flyoutPanel--withContent{padding:0;overflow-y:hidden;display:flex;flex-direction:column}.fieldEditor__flyoutPanel__header{padding:0 !important}.fieldEditor__flyoutPanel__content{flex:1;overflow-y:auto;overflow-x:hidden;padding:24px}.fieldEditor__flyoutPanel__footer{flex:0}\n",""]),e.exports=t},function(e,t,i){var r=i(44),n=i(66);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};r(n,o);e.exports=n.locals||{}},function(e,t,i){(t=i(45)(!1)).push([e.i,".fieldEditor__flyoutPanels{height:100%}.fieldEditor__flyoutPanels__column{height:100%;overflow:hidden}.fieldEditor__flyoutPanel{height:100%;overflow-y:auto;padding:24px}.fieldEditor__flyoutPanel--pageBackground{background-color:#fafbfd}.fieldEditor__flyoutPanel--emptyShade{background-color:#fff}.fieldEditor__flyoutPanel--leftBorder{border-left:1px solid #D3DAE6}.fieldEditor__flyoutPanel--rightBorder{border-right:1px solid #D3DAE6}.fieldEditor__flyoutPanel--withContent{padding:0;overflow-y:hidden;display:flex;flex-direction:column}.fieldEditor__flyoutPanel__header{padding:0 !important}.fieldEditor__flyoutPanel__content{flex:1;overflow-y:auto;overflow-x:hidden;padding:24px}.fieldEditor__flyoutPanel__footer{flex:0}\n",""]),e.exports=t},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(41),n=i(1),o=r.__importDefault(i(68));t.default=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=[]);var r=o.default(e,t),l=r[0],a=r[1],s=r[2];return n.useEffect(s,i),[l,a]}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1);t.default=function(e,t){void 0===t&&(t=0);var i=r.useRef(!1),n=r.useRef(),o=r.useRef(e),l=r.useCallback((function(){return i.current}),[]),a=r.useCallback((function(){i.current=!1,n.current&&clearTimeout(n.current),n.current=setTimeout((function(){i.current=!0,o.current()}),t)}),[t]),s=r.useCallback((function(){i.current=null,n.current&&clearTimeout(n.current)}),[]);return r.useEffect((function(){o.current=e}),[e]),r.useEffect((function(){return a(),s}),[t]),[l,s,a]}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=i(70),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};var l,a,s,d=function(){return(d=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};!function(e){e.AUTO="auto",e.START="start",e.CENTER="center",e.END="end"}(l||(l={})),(a=t.ScrollDirection||(t.ScrollDirection={})).HORIZONTAL="horizontal",a.VERTICAL="vertical",function(e){e.OBSERVED="observed",e.REQUESTED="requested"}(s||(s={}));var u,c,f,p,m,_=((u={})[t.ScrollDirection.VERTICAL]="scrollTop",u[t.ScrollDirection.HORIZONTAL]="scrollLeft",u),x=((c={})[t.ScrollDirection.VERTICAL]="height",c[t.ScrollDirection.HORIZONTAL]="width",c),b=((f={})[t.ScrollDirection.VERTICAL]="top",f[t.ScrollDirection.HORIZONTAL]="left",f),h=((p={})[t.ScrollDirection.VERTICAL]="marginTop",p[t.ScrollDirection.HORIZONTAL]="marginLeft",p),v=((m={})[t.ScrollDirection.VERTICAL]="marginBottom",m[t.ScrollDirection.HORIZONTAL]="marginRight",m),g=function(){function e(e){var t=e.itemCount,i=e.itemSizeGetter,r=e.estimatedItemSize;this.itemSizeGetter=i,this.itemCount=t,this.estimatedItemSize=r,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1}return e.prototype.updateConfig=function(e){var t=e.itemCount,i=e.itemSizeGetter,r=e.estimatedItemSize;null!=t&&(this.itemCount=t),null!=r&&(this.estimatedItemSize=r),null!=i&&(this.itemSizeGetter=i)},e.prototype.getLastMeasuredIndex=function(){return this.lastMeasuredIndex},e.prototype.getSizeAndPositionForIndex=function(e){if(e<0||e>=this.itemCount)throw Error("Requested index "+e+" is outside of range 0.."+this.itemCount);if(e>this.lastMeasuredIndex){for(var t=this.getSizeAndPositionOfLastMeasuredItem(),i=t.offset+t.size,r=this.lastMeasuredIndex+1;r<=e;r++){var n=this.itemSizeGetter(r);if(null==n||isNaN(n))throw Error("Invalid size returned for index "+r+" of value "+n);this.itemSizeAndPositionData[r]={offset:i,size:n},i+=n}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]},e.prototype.getSizeAndPositionOfLastMeasuredItem=function(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}},e.prototype.getTotalSize=function(){var e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize},e.prototype.getUpdatedOffsetForIndex=function(e){var t=e.align,i=void 0===t?l.START:t,r=e.containerSize,n=e.currentOffset,o=e.targetIndex;if(r<=0)return 0;var a,s=this.getSizeAndPositionForIndex(o),d=s.offset,u=d-r+s.size;switch(i){case l.END:a=u;break;case l.CENTER:a=d-(r-s.size)/2;break;case l.START:a=d;break;default:a=Math.max(u,Math.min(d,n))}var c=this.getTotalSize();return Math.max(0,Math.min(c-r,a))},e.prototype.getVisibleRange=function(e){var t=e.containerSize,i=e.offset,r=e.overscanCount;if(0===this.getTotalSize())return{};var n=i+t,o=this.findNearestItem(i);if(void 0===o)throw Error("Invalid offset "+i+" specified");var l=this.getSizeAndPositionForIndex(o);i=l.offset+l.size;for(var a=o;i<n&&a<this.itemCount-1;)a++,i+=this.getSizeAndPositionForIndex(a).size;return r&&(o=Math.max(0,o-r),a=Math.min(a+r,this.itemCount-1)),{start:o,stop:a}},e.prototype.resetItem=function(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)},e.prototype.findNearestItem=function(e){if(isNaN(e))throw Error("Invalid offset "+e+" specified");e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})},e.prototype.binarySearch=function(e){for(var t=e.low,i=e.high,r=e.offset,n=0,o=0;t<=i;){if(n=t+Math.floor((i-t)/2),(o=this.getSizeAndPositionForIndex(n).offset)===r)return n;o<r?t=n+1:o>r&&(i=n-1)}return t>0?t-1:0},e.prototype.exponentialSearch=function(e){for(var t=e.index,i=e.offset,r=1;t<this.itemCount&&this.getSizeAndPositionForIndex(t).offset<i;)t+=r,r*=2;return this.binarySearch({high:Math.min(t,this.itemCount-1),low:Math.floor(t/2),offset:i})},e}(),j={overflow:"auto",willChange:"transform",WebkitOverflowScrolling:"touch"},E={position:"relative",width:"100%",minHeight:"100%"},F={position:"absolute",top:0,left:0,width:"100%"},y=d({},F,{position:"sticky"}),O=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemSizeGetter=function(e){return function(i){return t.getSize(i,e)}},t.sizeAndPositionManager=new g({itemCount:t.props.itemCount,itemSizeGetter:t.itemSizeGetter(t.props.itemSize),estimatedItemSize:t.getEstimatedItemSize()}),t.state={offset:t.props.scrollOffset||null!=t.props.scrollToIndex&&t.getOffsetForIndex(t.props.scrollToIndex)||0,scrollChangeReason:s.REQUESTED},t.styleCache={},t.getRef=function(e){t.rootNode=e},t.handleScroll=function(e){var i=t.props.onScroll,r=t.getNodeOffset();r<0||t.state.offset===r||e.target!==t.rootNode||(t.setState({offset:r,scrollChangeReason:s.OBSERVED}),"function"==typeof i&&i(r,e))},t}return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}(i,e),i.prototype.componentDidMount=function(){var e=this.props,t=e.scrollOffset,i=e.scrollToIndex;this.rootNode.addEventListener("scroll",this.handleScroll,{passive:!0}),null!=t?this.scrollTo(t):null!=i&&this.scrollTo(this.getOffsetForIndex(i))},i.prototype.componentWillReceiveProps=function(e){var t=this.props,i=t.estimatedItemSize,r=t.itemCount,n=t.itemSize,o=t.scrollOffset,l=t.scrollToAlignment,a=t.scrollToIndex,d=e.scrollToIndex!==a||e.scrollToAlignment!==l,u=e.itemCount!==r||e.itemSize!==n||e.estimatedItemSize!==i;e.itemSize!==n&&this.sizeAndPositionManager.updateConfig({itemSizeGetter:this.itemSizeGetter(e.itemSize)}),e.itemCount===r&&e.estimatedItemSize===i||this.sizeAndPositionManager.updateConfig({itemCount:e.itemCount,estimatedItemSize:this.getEstimatedItemSize(e)}),u&&this.recomputeSizes(),e.scrollOffset!==o?this.setState({offset:e.scrollOffset||0,scrollChangeReason:s.REQUESTED}):"number"==typeof e.scrollToIndex&&(d||u)&&this.setState({offset:this.getOffsetForIndex(e.scrollToIndex,e.scrollToAlignment,e.itemCount),scrollChangeReason:s.REQUESTED})},i.prototype.componentDidUpdate=function(e,t){var i=this.state,r=i.offset,n=i.scrollChangeReason;t.offset!==r&&n===s.REQUESTED&&this.scrollTo(r)},i.prototype.componentWillUnmount=function(){this.rootNode.removeEventListener("scroll",this.handleScroll)},i.prototype.scrollTo=function(e){var i=this.props.scrollDirection,r=void 0===i?t.ScrollDirection.VERTICAL:i;this.rootNode[_[r]]=e},i.prototype.getOffsetForIndex=function(e,i,r){void 0===i&&(i=this.props.scrollToAlignment),void 0===r&&(r=this.props.itemCount);var n=this.props.scrollDirection,o=void 0===n?t.ScrollDirection.VERTICAL:n;return(e<0||e>=r)&&(e=0),this.sizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:this.props[x[o]],currentOffset:this.state&&this.state.offset||0,targetIndex:e})},i.prototype.recomputeSizes=function(e){void 0===e&&(e=0),this.styleCache={},this.sizeAndPositionManager.resetItem(e)},i.prototype.render=function(){var e,i=this,n=this.props,o=(n.estimatedItemSize,n.height),l=n.overscanCount,a=void 0===l?3:l,s=n.renderItem,u=(n.itemCount,n.itemSize,n.onItemsRendered),c=(n.onScroll,n.scrollDirection),f=void 0===c?t.ScrollDirection.VERTICAL:c,p=(n.scrollOffset,n.scrollToIndex,n.scrollToAlignment,n.stickyIndices),m=n.style,_=n.width,b=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&(i[r[n]]=e[r[n]])}return i}(n,["estimatedItemSize","height","overscanCount","renderItem","itemCount","itemSize","onItemsRendered","onScroll","scrollDirection","scrollOffset","scrollToIndex","scrollToAlignment","stickyIndices","style","width"]),h=this.state.offset,v=this.sizeAndPositionManager.getVisibleRange({containerSize:this.props[x[f]]||0,offset:h,overscanCount:a}),g=v.start,F=v.stop,y=[],O=d({},j,m,{height:o,width:_}),w=d({},E,((e={})[x[f]]=this.sizeAndPositionManager.getTotalSize(),e));if(null!=p&&0!==p.length&&(p.forEach((function(e){return y.push(s({index:e,style:i.getStyle(e,!0)}))})),f===t.ScrollDirection.HORIZONTAL&&(w.display="flex")),void 0!==g&&void 0!==F){for(var P=g;P<=F;P++)null!=p&&p.includes(P)||y.push(s({index:P,style:this.getStyle(P,!1)}));"function"==typeof u&&u({startIndex:g,stopIndex:F})}return r.createElement("div",d({ref:this.getRef},b,{style:O}),r.createElement("div",{style:w},y))},i.prototype.getNodeOffset=function(){var e=this.props.scrollDirection,i=void 0===e?t.ScrollDirection.VERTICAL:e;return this.rootNode[_[i]]},i.prototype.getEstimatedItemSize=function(e){return void 0===e&&(e=this.props),e.estimatedItemSize||"number"==typeof e.itemSize&&e.itemSize||50},i.prototype.getSize=function(e,t){return"function"==typeof t?t(e):Array.isArray(t)?t[e]:t},i.prototype.getStyle=function(e,i){var r=this.styleCache[e];if(r)return r;var n,o,l=this.props.scrollDirection,a=void 0===l?t.ScrollDirection.VERTICAL:l,s=this.sizeAndPositionManager.getSizeAndPositionForIndex(e),u=s.size,c=s.offset;return this.styleCache[e]=i?d({},y,((n={})[x[a]]=u,n[h[a]]=c,n[v[a]]=-(c+u),n.zIndex=1,n)):d({},F,((o={})[x[a]]=u,o[b[a]]=c,o))},i.defaultProps={overscanCount:3,scrollDirection:t.ScrollDirection.VERTICAL,width:"100%"},i.propTypes={estimatedItemSize:n.number,height:n.oneOfType([n.number,n.string]).isRequired,itemCount:n.number.isRequired,itemSize:n.oneOfType([n.number,n.array,n.func]).isRequired,onScroll:n.func,onItemsRendered:n.func,overscanCount:n.number,renderItem:n.func.isRequired,scrollOffset:n.number,scrollToIndex:n.number,scrollToAlignment:n.oneOf([l.AUTO,l.START,l.CENTER,l.END]),scrollDirection:n.oneOf([t.ScrollDirection.HORIZONTAL,t.ScrollDirection.VERTICAL]),stickyIndices:n.arrayOf(n.number),style:n.object,width:n.oneOfType([n.number,n.string])},i}(r.PureComponent);t.default=O},function(e,t,i){e.exports=i(36)(7)},function(e,t,i){switch(window.__kbnThemeTag__){case"v7dark":return i(72);case"v7light":return i(74);case"v8dark":return i(76);case"v8light":return i(78)}},function(e,t,i){var r=i(44),n=i(73);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};r(n,o);e.exports=n.locals||{}},function(e,t,i){(t=i(45)(!1)).push([e.i,".indexPatternFieldEditor__previewFieldList{position:relative}.indexPatternFieldEditor__previewFieldList__item{border-bottom:1px solid #343741;height:40px;align-items:center;overflow:hidden}.indexPatternFieldEditor__previewFieldList__item--highlighted{background:#4d3e25;font-weight:600}.indexPatternFieldEditor__previewFieldList__item__key,.indexPatternFieldEditor__previewFieldList__item__value{overflow:hidden}.indexPatternFieldEditor__previewFieldList__item__actions{flex-basis:24px !important}.indexPatternFieldEditor__previewFieldList__item__actionsBtn{display:none}.indexPatternFieldEditor__previewFieldList__item--pinned .indexPatternFieldEditor__previewFieldList__item__actionsBtn,.indexPatternFieldEditor__previewFieldList__item:hover .indexPatternFieldEditor__previewFieldList__item__actionsBtn{display:block}.indexPatternFieldEditor__previewFieldList__item__value .euiToolTipAnchor{width:100%}.indexPatternFieldEditor__previewFieldList__item__key__wrapper,.indexPatternFieldEditor__previewFieldList__item__value__wrapper{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;width:100%}.indexPatternFieldEditor__previewFieldList__showMore{position:absolute;width:100%;height:40px;bottom:-40px;display:flex;align-items:flex-end}\n",""]),e.exports=t},function(e,t,i){var r=i(44),n=i(75);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};r(n,o);e.exports=n.locals||{}},function(e,t,i){(t=i(45)(!1)).push([e.i,".indexPatternFieldEditor__previewFieldList{position:relative}.indexPatternFieldEditor__previewFieldList__item{border-bottom:1px solid #D3DAE6;height:40px;align-items:center;overflow:hidden}.indexPatternFieldEditor__previewFieldList__item--highlighted{background:#fef6e6;font-weight:600}.indexPatternFieldEditor__previewFieldList__item__key,.indexPatternFieldEditor__previewFieldList__item__value{overflow:hidden}.indexPatternFieldEditor__previewFieldList__item__actions{flex-basis:24px !important}.indexPatternFieldEditor__previewFieldList__item__actionsBtn{display:none}.indexPatternFieldEditor__previewFieldList__item--pinned .indexPatternFieldEditor__previewFieldList__item__actionsBtn,.indexPatternFieldEditor__previewFieldList__item:hover .indexPatternFieldEditor__previewFieldList__item__actionsBtn{display:block}.indexPatternFieldEditor__previewFieldList__item__value .euiToolTipAnchor{width:100%}.indexPatternFieldEditor__previewFieldList__item__key__wrapper,.indexPatternFieldEditor__previewFieldList__item__value__wrapper{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;width:100%}.indexPatternFieldEditor__previewFieldList__showMore{position:absolute;width:100%;height:40px;bottom:-40px;display:flex;align-items:flex-end}\n",""]),e.exports=t},function(e,t,i){var r=i(44),n=i(77);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};r(n,o);e.exports=n.locals||{}},function(e,t,i){(t=i(45)(!1)).push([e.i,".indexPatternFieldEditor__previewFieldList{position:relative}.indexPatternFieldEditor__previewFieldList__item{border-bottom:1px solid #343741;height:40px;align-items:center;overflow:hidden}.indexPatternFieldEditor__previewFieldList__item--highlighted{background:#493f22;font-weight:600}.indexPatternFieldEditor__previewFieldList__item__key,.indexPatternFieldEditor__previewFieldList__item__value{overflow:hidden}.indexPatternFieldEditor__previewFieldList__item__actions{flex-basis:24px !important}.indexPatternFieldEditor__previewFieldList__item__actionsBtn{display:none}.indexPatternFieldEditor__previewFieldList__item--pinned .indexPatternFieldEditor__previewFieldList__item__actionsBtn,.indexPatternFieldEditor__previewFieldList__item:hover .indexPatternFieldEditor__previewFieldList__item__actionsBtn{display:block}.indexPatternFieldEditor__previewFieldList__item__value .euiToolTipAnchor{width:100%}.indexPatternFieldEditor__previewFieldList__item__key__wrapper,.indexPatternFieldEditor__previewFieldList__item__value__wrapper{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;width:100%}.indexPatternFieldEditor__previewFieldList__showMore{position:absolute;width:100%;height:40px;bottom:-40px;display:flex;align-items:flex-end}\n",""]),e.exports=t},function(e,t,i){var r=i(44),n=i(79);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};r(n,o);e.exports=n.locals||{}},function(e,t,i){(t=i(45)(!1)).push([e.i,".indexPatternFieldEditor__previewFieldList{position:relative}.indexPatternFieldEditor__previewFieldList__item{border-bottom:1px solid #D3DAE6;height:40px;align-items:center;overflow:hidden}.indexPatternFieldEditor__previewFieldList__item--highlighted{background:#fff9e8;font-weight:600}.indexPatternFieldEditor__previewFieldList__item__key,.indexPatternFieldEditor__previewFieldList__item__value{overflow:hidden}.indexPatternFieldEditor__previewFieldList__item__actions{flex-basis:24px !important}.indexPatternFieldEditor__previewFieldList__item__actionsBtn{display:none}.indexPatternFieldEditor__previewFieldList__item--pinned .indexPatternFieldEditor__previewFieldList__item__actionsBtn,.indexPatternFieldEditor__previewFieldList__item:hover .indexPatternFieldEditor__previewFieldList__item__actionsBtn{display:block}.indexPatternFieldEditor__previewFieldList__item__value .euiToolTipAnchor{width:100%}.indexPatternFieldEditor__previewFieldList__item__key__wrapper,.indexPatternFieldEditor__previewFieldList__item__value__wrapper{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;width:100%}.indexPatternFieldEditor__previewFieldList__showMore{position:absolute;width:100%;height:40px;bottom:-40px;display:flex;align-items:flex-end}\n",""]),e.exports=t},function(e,t,i){switch(window.__kbnThemeTag__){case"v7dark":return i(81);case"v7light":return i(83);case"v8dark":return i(85);case"v8light":return i(87)}},function(e,t,i){var r=i(44),n=i(82);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};r(n,o);e.exports=n.locals||{}},function(e,t,i){(t=i(45)(!1)).push([e.i,".indexPatternFieldEditor__previewPannel{display:flex;flex-direction:column;height:100%}.indexPatternFieldEditor__previewImageModal__wrapper{padding:16px}.indexPatternFieldEditor__previewImageModal__wrapper img{max-width:100%}.indexPatternFieldEditor__previewEmptySearchResult__title{font-weight:400}\n",""]),e.exports=t},function(e,t,i){var r=i(44),n=i(84);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};r(n,o);e.exports=n.locals||{}},function(e,t,i){(t=i(45)(!1)).push([e.i,".indexPatternFieldEditor__previewPannel{display:flex;flex-direction:column;height:100%}.indexPatternFieldEditor__previewImageModal__wrapper{padding:16px}.indexPatternFieldEditor__previewImageModal__wrapper img{max-width:100%}.indexPatternFieldEditor__previewEmptySearchResult__title{font-weight:400}\n",""]),e.exports=t},function(e,t,i){var r=i(44),n=i(86);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};r(n,o);e.exports=n.locals||{}},function(e,t,i){(t=i(45)(!1)).push([e.i,".indexPatternFieldEditor__previewPannel{display:flex;flex-direction:column;height:100%}.indexPatternFieldEditor__previewImageModal__wrapper{padding:16px}.indexPatternFieldEditor__previewImageModal__wrapper img{max-width:100%}.indexPatternFieldEditor__previewEmptySearchResult__title{font-weight:400}\n",""]),e.exports=t},function(e,t,i){var r=i(44),n=i(88);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};r(n,o);e.exports=n.locals||{}},function(e,t,i){(t=i(45)(!1)).push([e.i,".indexPatternFieldEditor__previewPannel{display:flex;flex-direction:column;height:100%}.indexPatternFieldEditor__previewImageModal__wrapper{padding:16px}.indexPatternFieldEditor__previewImageModal__wrapper img{max-width:100%}.indexPatternFieldEditor__previewEmptySearchResult__title{font-weight:400}\n",""]),e.exports=t},,,,,,,,,,,function(e,t,i){"use strict";i.r(t),i.d(t,"FieldEditorFlyoutContentContainer",(function(){return we}));var r=i(1),n=i.n(r),o=i(2),l=i(35),a=i(11);const s=({links:e})=>({runtimePainless:e.indexPatterns.runtimeFields,painlessSyntax:e.scriptedFields.painlessLangSpec}),d=e=>"script_exception"===e.type?e:e.caused_by?d(e.caused_by):null,u=(e,t=!1)=>{var i,r,n,l;if(void 0===e)return null;const a=t?e:(e=>{if(void 0===e||!Array.isArray(e.failed_shards))return null;let t=null;for(const i of e.failed_shards)if(t=d(i.reason),null!==t)break;return t})(e.caused_by);return null===a?null:{message:o.i18n.translate("indexPatternFieldEditor.editor.form.scriptEditor.compileErrorMessage",{defaultMessage:"Error compiling the painless script"}),position:null!==(i=a.position)&&void 0!==i?i:null,scriptStack:null!==(r=a.script_stack)&&void 0!==r?r:[],reason:null!==(n=null===(l=a.caused_by)||void 0===l?void 0:l.reason)&&void 0!==n?n:null}};i(21);var c=i(13),f=i(3),p=i(56),m=i.n(p),_=i(40),x=i.n(_),b=(i(58),i(0));let h=0;const v=Object(r.createContext)({addPanel:()=>({removePanel:()=>{},isFixedWidth:!1})}),g=(e,{innerWidth:t})=>Math.min(e,.8*t),j=Object(r.createContext)({registerFooter:()=>{},registerContent:()=>{}}),E=()=>{const e=Object(r.useContext)(j);if(void 0===e)throw new Error("useFlyoutPanel() must be used within a <flyoutPanelContext.Provider />");return e},F=({maxWidth:e,flyoutClassName:t,fixedPanelWidths:i=!1,...n})=>{const o=Object(r.useMemo)((()=>{const e=document.getElementsByClassName(t);return 0===e.length?null:e.item(0)}),[t]),[l,a]=Object(r.useState)({}),s=Object(r.useCallback)((e=>{a((t=>{const{[e]:i,...r}=t;return r}))}),[]),d=Object(r.useCallback)((e=>{const t=h++;return a((i=>({...i,[t]:e}))),{removePanel:s.bind(null,t),isFixedWidth:i}}),[s,i]),u=Object(r.useMemo)((()=>({addPanel:d})),[d]);return Object(r.useLayoutEffect)((()=>{if(!o)return;let t;if(i){const i=Object.values(l).reduce(((e,{width:t=0})=>e+t),0);t=Math.min(e,i),o.style.minWidth=`${g(t,window)}px`,o.style.maxWidth=`${g(t,window)}px`}else{const i=Math.min(100,Object.values(l).reduce(((e,{width:t=0})=>e+t),0));t=e*i/100,o.style.maxWidth=`${g(t,window)}px`}}),[l,e,i,t,o]),Object(b.jsx)(v.Provider,{value:u},Object(b.jsx)(f.EuiFlexGroup,m()({className:"fieldEditor__flyoutPanels",gutterSize:"none"},n)))},y=({children:e,width:t,className:i="",backgroundColor:n,border:o,"data-test-subj":l,...a})=>{const[s,d]=Object(r.useState)({hasContent:!1,hasFooter:!1}),[u,c]=Object(r.useState)({}),p=x()("fieldEditor__flyoutPanel",i,{"fieldEditor__flyoutPanel--pageBackground":"euiPageBackground"===n,"fieldEditor__flyoutPanel--emptyShade":"euiEmptyShade"===n,"fieldEditor__flyoutPanel--leftBorder":"left"===o,"fieldEditor__flyoutPanel--rightBorder":"right"===o,"fieldEditor__flyoutPanel--withContent":s.hasContent}),{addPanel:_}=(()=>{const e=Object(r.useContext)(v);if(void 0===e)throw new Error("<Panel /> must be used within a <Panels /> wrapper");return e})(),h=Object(r.useCallback)((()=>{d((e=>({...e,hasContent:!0})))}),[]),g=Object(r.useCallback)((()=>{d((e=>{if(!e.hasContent)throw new Error("You need to add a <FlyoutPanels.Content /> when you add a <FlyoutPanels.Footer />");return{...e,hasFooter:!0}}))}),[]),E=Object(r.useMemo)((()=>({registerContent:h,registerFooter:g})),[g,h]);return Object(r.useLayoutEffect)((()=>{const{removePanel:e,isFixedWidth:i}=_({width:t});return t&&c((e=>i?{...e,width:`${t}px`}:{...e,minWidth:`${t}%`})),e}),[t,_]),Object(b.jsx)(f.EuiFlexItem,{className:"fieldEditor__flyoutPanels__column",style:u,grow:!1,"data-test-subj":l},Object(b.jsx)(j.Provider,{value:E},Object(b.jsx)("div",m()({className:p},a),e)))},O=e=>{const{registerContent:t}=E();return Object(r.useEffect)((()=>{t()}),[t]),Object(b.jsx)("div",m()({className:"fieldEditor__flyoutPanel__content",tabIndex:0},e))},w=e=>Object(b.jsx)(n.a.Fragment,null,Object(b.jsx)(f.EuiFlyoutHeader,m()({className:"fieldEditor__flyoutPanel__header"},e)),Object(b.jsx)(f.EuiSpacer,null)),P=e=>{const{registerFooter:t}=E();return Object(r.useEffect)((()=>{t()}),[t]),Object(b.jsx)(f.EuiFlyoutFooter,m()({className:"fieldEditor__flyoutPanel__footer"},e))},S=Object(r.createContext)(void 0),C=({services:e,indexPattern:t,links:i,uiSettings:n,fieldTypeToProcess:o,fieldFormats:l,fieldFormatEditors:a,namesNotAllowed:s,existingConcreteFields:d,children:u})=>{const c=Object(r.useMemo)((()=>({indexPattern:t,fieldTypeToProcess:o,links:i,uiSettings:n,services:e,fieldFormats:l,fieldFormatEditors:a,namesNotAllowed:s,existingConcreteFields:d})),[t,o,e,i,n,l,a,s,d]);return Object(b.jsx)(S.Provider,{value:c},u)},M=()=>{const e=Object(r.useContext)(S);if(void 0===e)throw new Error("useFieldEditorContext must be used within a <FieldEditorContext />");return e};var T=i(16),I=i(5),L=i(67),k=i.n(L);const z=Object(r.createContext)(void 0),R={name:null,index:null,script:null,document:null,type:null,format:null},D=e=>`<span>${"object"==typeof e?JSON.stringify(e):null!=e?e:"-"}</span>`,N=({children:e})=>{var t;const i=Object(r.useRef)(0),[n,l]=Object(r.useState)({type:null,script:void 0,documentId:void 0}),{indexPattern:a,fieldTypeToProcess:s,services:{search:d,notifications:c,api:{getFieldPreview:f}},fieldFormats:p}=M(),[m,_]=Object(r.useState)({fields:[],error:null}),[x,h]=Object(r.useState)(R),[v,g]=Object(r.useState)({documents:[],currentIdx:0}),[j,E]=Object(r.useState)(!1),[F,y]=Object(r.useState)(!1),[O,w]=Object(r.useState)(!1),[P,S]=Object(r.useState)(null),[C,I]=Object(r.useState)("cluster"),[L,N]=Object(r.useState)({}),{documents:B,currentIdx:A}=v,V=Object(r.useMemo)((()=>B[A]),[B,A]),U=null==V?void 0:V._index,G=null!==(t=null==V?void 0:V._id)&&void 0!==t?t:"",W=B.length,{name:H,document:q,script:$,format:Z,type:J}=x,Q=Object(r.useCallback)((e=>{h((t=>({...t,...e})))}),[]),Y=Object(r.useMemo)((()=>{if(!(""!==G))return!1;if(!["type","script","index","document"].every((e=>Boolean(x[e]))))return!1;return n.type!==J||n.script!==(null==$?void 0:$.source)||n.documentId!==G}),[J,null==$?void 0:$.source,G,x,n]),K=Object(r.useCallback)((e=>{if(null!=Z&&Z.id){const r=p.getInstance(Z.id,Z.params);var t,i;if(r)return null!==(t=null===(i=r.convertObject)||void 0===i?void 0:i.html(e))&&void 0!==t?t:JSON.stringify(e)}return D(e)}),[Z,p]),X=Object(r.useCallback)((async(e=50)=>{if("number"!=typeof e)throw new Error('The "limit" option must be a number');y(!0),g({documents:[],currentIdx:0}),_({fields:[],error:null});const[t,i]=await d.search({params:{index:a.title,body:{size:e}}}).toPromise().then((e=>[e,null])).catch((e=>[null,e]));y(!1),S(null),g({documents:t?t.rawResponse.hits.hits:[],currentIdx:0}),_((e=>({...e,error:i})))}),[a,d]),ee=Object(r.useCallback)((async e=>{if(!Boolean(e.trim()))return;y(!0);const[t,i]=await d.search({params:{index:a.title,body:{size:1,query:{ids:{values:[e]}}}}}).toPromise().then((e=>[e,null])).catch((e=>[null,e]));y(!1);const r=(null==t?void 0:t.rawResponse.hits.total)>0,n=r?t.rawResponse.hits.hits:[],l=Boolean(i)?{code:"ERR_FETCHING_DOC",error:{message:i.toString()}}:!1===r?{code:"DOC_NOT_FOUND",error:{message:o.i18n.translate("indexPatternFieldEditor.fieldPreview.error.documentNotFoundDescription",{defaultMessage:"Document ID not found"})}}:null;_((e=>({...e,error:l}))),g({documents:n,currentIdx:0}),null!==l&&w(!1)}),[a,d]),te=Object(r.useCallback)((async()=>{var e,t;if(l({type:x.type,script:null===(e=x.script)||void 0===e?void 0:e.source,documentId:G}),!Y)return;const r=++i.current,n=await f({index:U,document:x.document,context:`${x.type}_field`,script:x.script,documentId:G});if(r!==i.current)return;w(!1);const{error:a}=n;if(a){const e=o.i18n.translate("indexPatternFieldEditor.fieldPreview.errorTitle",{defaultMessage:"Failed to load field preview"});return void c.toasts.addError(a,{title:e})}const{values:s,error:d}=null!==(t=n.data)&&void 0!==t?t:{values:[],error:{}};if(d){var p;const e={message:o.i18n.translate("indexPatternFieldEditor.fieldPreview.defaultErrorTitle",{defaultMessage:"Unable to run the provided script"})};_({fields:[],error:{code:"PAINLESS_SCRIPT_ERROR",error:null!==(p=u(d,!0))&&void 0!==p?p:e}})}else{const[e]=s,t=K(e);_({fields:[{key:x.name,value:e,formattedValue:t}],error:null})}}),[Y,x,U,G,f,c.toasts,K]),ie=Object(r.useCallback)((()=>{g(A>=W-1?e=>({...e,currentIdx:0}):e=>({...e,currentIdx:e.currentIdx+1}))}),[A,W]),re=Object(r.useCallback)((()=>{g(0===A?e=>({...e,currentIdx:W-1}):e=>({...e,currentIdx:e.currentIdx-1}))}),[A,W]),ne=Object(r.useCallback)((()=>{i.current=0,g({documents:[],currentIdx:0}),_({fields:[],error:null}),l({type:null,script:void 0,documentId:void 0}),I("cluster"),w(!1),y(!1)}),[]),oe=Object(r.useMemo)((()=>({fields:m.fields,error:m.error,isLoadingPreview:O,params:{value:x,update:Q},currentDocument:{value:V,id:null!==P?P:G,isLoading:F,isCustomId:null!==P},documents:{loadSingle:S,loadFromCluster:X},navigation:{isFirstDoc:0===A,isLastDoc:A>=W-1,next:ie,prev:re},panel:{isVisible:j,setIsVisible:E},from:{value:C,set:I},reset:ne,pinnedFields:{value:L,set:N}})),[m,x,O,Q,V,G,X,F,P,A,W,ie,re,j,C,ne,L]);return Object(r.useEffect)((()=>{Y&&w(!0)}),[Y,P]),Object(r.useEffect)((()=>{null!==P&&(y(!0),g({documents:[],currentIdx:0}),_((e=>{const{fields:{0:t}}=e;return{...e,fields:[{...t,value:void 0,formattedValue:D(void 0)}]}})))}),[P]),Object(r.useEffect)((()=>{j&&X()}),[j,X,s]),Object(r.useEffect)((()=>{Q({document:null==V?void 0:V._source,index:null==V?void 0:V._index})}),[V,Q]),Object(r.useEffect)((()=>{_((e=>{const{fields:{0:t}}=e,i=null===$&&Boolean(q)?Object(T.get)(q,null!=H?H:""):null==t?void 0:t.value,r=K(i);return{...e,fields:[{...t,key:null!=H?H:"",value:i,formattedValue:r}]}}))}),[H,$,q,K]),k()(te,500,[te]),k()((()=>{null!==P&&ee(P)}),500,[P]),Object(b.jsx)(z.Provider,{value:oe},e)},B=()=>{const e=Object(r.useContext)(z);if(void 0===e)throw new Error("useFieldPreviewContext must be used within a <FieldPreviewProvider />");return e},A={title:o.i18n.translate("indexPatternFieldEditor.fieldPreview.title",{defaultMessage:"Preview"}),customData:o.i18n.translate("indexPatternFieldEditor.fieldPreview.subTitle.customData",{defaultMessage:"Custom data"}),updatingLabel:o.i18n.translate("indexPatternFieldEditor.fieldPreview.updatingPreviewLabel",{defaultMessage:"Updating..."})},V=()=>{const{indexPattern:e}=M(),{from:t,isLoadingPreview:i,currentDocument:{isLoading:r}}=B(),n=i||r;return Object(b.jsx)("div",null,Object(b.jsx)(f.EuiFlexGroup,{alignItems:"center"},Object(b.jsx)(f.EuiFlexItem,{grow:!1},Object(b.jsx)(f.EuiTitle,{size:"s"},Object(b.jsx)("h2",{"data-test-subj":"title"},A.title))),n&&Object(b.jsx)(f.EuiFlexItem,{"data-test-subj":"isUpdatingIndicator"},Object(b.jsx)(f.EuiFlexGroup,{gutterSize:"xs"},Object(b.jsx)(f.EuiFlexItem,{grow:!1},Object(b.jsx)(f.EuiLoadingSpinner,{size:"m"})),Object(b.jsx)(f.EuiFlexItem,{grow:!1},A.updatingLabel)))),Object(b.jsx)(f.EuiText,null,Object(b.jsx)(f.EuiTextColor,{color:"subdued","data-test-subj":"subTitle"},o.i18n.translate("indexPatternFieldEditor.fieldPreview.subTitle",{defaultMessage:"From: {from}",values:{from:"cluster"===t.value?e.title:A.customData}}))))},U=()=>Object(b.jsx)(f.EuiFlexGroup,{style:{height:"100%"},"data-test-subj":"emptyPrompt"},Object(b.jsx)(f.EuiFlexItem,null,Object(b.jsx)(f.EuiEmptyPrompt,{iconType:"inspect",title:Object(b.jsx)("h2",null,o.i18n.translate("indexPatternFieldEditor.fieldPreview.emptyPromptTitle",{defaultMessage:"Preview"})),titleSize:"s",body:Object(b.jsx)(f.EuiText,{size:"s"},Object(b.jsx)(f.EuiTextColor,{color:"subdued"},Object(b.jsx)("p",null,o.i18n.translate("indexPatternFieldEditor.fieldPreview.emptyPromptDescription",{defaultMessage:"Enter the name of an existing field or define a script to view a preview of the calculated output."}))))}))),G=()=>{const{currentDocument:{id:e,isCustomId:t},documents:{loadSingle:i,loadFromCluster:n},navigation:{prev:l,next:a},error:s}=B(),d=null!==s&&"DOC_NOT_FOUND"===s.code?o.i18n.translate("indexPatternFieldEditor.fieldPreview.documentIdField.documentNotFoundError",{defaultMessage:"Document not found"}):null,u=null!==s&&"DOC_NOT_FOUND"===s.code,c=!1===t,p=Object(r.useCallback)((e=>{const t=e.target.value;i(t)}),[i]);return Object(b.jsx)("div",null,Object(b.jsx)(f.EuiFlexGroup,{gutterSize:"s"},Object(b.jsx)(f.EuiFlexItem,null,Object(b.jsx)(f.EuiFormRow,{label:o.i18n.translate("indexPatternFieldEditor.fieldPreview.documentIdField.label",{defaultMessage:"Document ID"}),error:d,isInvalid:u,fullWidth:!0},Object(b.jsx)(f.EuiFieldText,{isInvalid:u,value:e,onChange:p,fullWidth:!0,"data-test-subj":"documentIdField"})),t&&Object(b.jsx)("span",null,Object(b.jsx)(f.EuiButtonEmpty,{color:"primary",size:"xs",flush:"left",onClick:()=>n(),"data-test-subj":"loadDocsFromClusterButton"},o.i18n.translate("indexPatternFieldEditor.fieldPreview.documentIdField.loadDocumentsFromCluster",{defaultMessage:"Load documents from cluster"})))),c&&Object(b.jsx)(f.EuiFlexItem,{grow:!1,"data-test-subj":"documentsNav"},Object(b.jsx)(f.EuiFlexGroup,{gutterSize:"s",alignItems:"flexEnd"},Object(b.jsx)(f.EuiFlexItem,{grow:!1},Object(b.jsx)(f.EuiButtonIcon,{display:"base",size:"m",onClick:l,iconType:"arrowLeft","data-test-subj":"goToPrevDocButton","aria-label":o.i18n.translate("indexPatternFieldEditor.fieldPreview.documentNav.previousArialabel",{defaultMessage:"Previous document"})})),Object(b.jsx)(f.EuiFlexItem,{grow:!1},Object(b.jsx)(f.EuiButtonIcon,{display:"base",size:"m",onClick:a,iconType:"arrowRight","data-test-subj":"goToNextDocButton","aria-label":o.i18n.translate("indexPatternFieldEditor.fieldPreview.documentNav.nextArialabel",{defaultMessage:"Next document"})}))))))},W=()=>{const{error:e}=B();return null===e?null:Object(b.jsx)(f.EuiCallOut,{title:o.i18n.translate("indexPatternFieldEditor.fieldPreview.errorCallout.title",{defaultMessage:"Preview error"}),color:"danger",iconType:"cross",role:"alert","data-test-subj":"previewError"},"PAINLESS_SCRIPT_ERROR"===e.code?Object(b.jsx)("p",{"data-test-subj":"reason"},e.error.reason):Object(b.jsx)("p",{"data-test-subj":"title"},e.error.message))},H=e=>{const t=new RegExp("max-width:[^;]+;","gm");return t.test(e)?e.replace(t,"max-width: 100%;"):e},q=({imgHTML:e,closeModal:t})=>Object(b.jsx)(f.EuiModal,{onClose:t},Object(b.jsx)(f.EuiModalBody,null,Object(b.jsx)("div",{className:"indexPatternFieldEditor__previewImageModal__wrapper",dangerouslySetInnerHTML:{__html:H(e)}}))),$=({field:{key:e,value:t,formattedValue:i,isPinned:l=!1},highlighted:a,toggleIsPinned:s})=>{const[d,u]=Object(r.useState)(!1),c=x()("indexPatternFieldEditor__previewFieldList__item",{"indexPatternFieldEditor__previewFieldList__item--highlighted":a,"indexPatternFieldEditor__previewFieldList__item--pinned":l}),p=null==i?void 0:i.includes("<img");return Object(b.jsx)(n.a.Fragment,null,Object(b.jsx)(f.EuiFlexGroup,{className:c,gutterSize:"none","data-test-subj":"listItem"},Object(b.jsx)(f.EuiFlexItem,{className:"indexPatternFieldEditor__previewFieldList__item__key"},Object(b.jsx)("div",{className:"indexPatternFieldEditor__previewFieldList__item__key__wrapper","data-test-subj":"key"},e)),Object(b.jsx)(f.EuiFlexItem,{className:"indexPatternFieldEditor__previewFieldList__item__value","data-test-subj":"value"},Object(b.jsx)(f.EuiToolTip,{position:"top",content:"string"!=typeof t?JSON.stringify(t):t},p?Object(b.jsx)(f.EuiButtonEmpty,{color:"text",onClick:()=>u(!0),iconType:"image"},o.i18n.translate("indexPatternFieldEditor.fieldPreview.viewImageButtonLabel",{defaultMessage:"View image"})):void 0!==i?Object(b.jsx)("span",{className:"indexPatternFieldEditor__previewFieldList__item__value__wrapper",dangerouslySetInnerHTML:{__html:i}}):Object(b.jsx)("span",{className:"indexPatternFieldEditor__previewFieldList__item__value__wrapper"},JSON.stringify(t)))),Object(b.jsx)(f.EuiFlexItem,{className:"indexPatternFieldEditor__previewFieldList__item__actions",grow:!1},s&&Object(b.jsx)(f.EuiButtonIcon,{onClick:()=>{s(e)},color:"text",iconType:"pinFilled","data-test-subj":"pinFieldButton","aria-label":o.i18n.translate("indexPatternFieldEditor.fieldPreview.pinFieldButtonLabel",{defaultMessage:"Pin field"}),className:"indexPatternFieldEditor__previewFieldList__item__actionsBtn"}))),d&&Object(b.jsx)(q,{imgHTML:i,closeModal:()=>u(!1)}))};var Z=i(69),J=i.n(Z);i(71);function Q(e){return e.replace(/[-\[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}const Y=({height:e,clearSearch:t,searchValue:i=""})=>{const{indexPattern:l}=M(),{currentDocument:{value:a},pinnedFields:{value:s,set:d}}=B(),[u,c]=Object(r.useState)(!1),{fields:{getAll:p}}=l,m=Object(r.useMemo)((()=>p()),[p]),_=Object(r.useMemo)((()=>m.map((({name:e,displayName:t})=>{const i=Object(T.get)(null==a?void 0:a._source,e);return{key:t,value:i,formattedValue:D(i),isPinned:!1}})).filter((({value:e})=>void 0!==e))),[m,null==a?void 0:a._source]),x=Object(r.useMemo)((()=>{const e=[],t=[];return _.forEach((i=>{s[i.key]?e.push({...i,isPinned:!0}):t.push({...i,isPinned:!1})})),[...e,...t]}),[_,s]),{filteredFields:h,totalFields:v}=Object(r.useMemo)((()=>{const e=""===i.trim()?x:x.filter((({key:e})=>function(e,t){const i=`.*${e.split("").map(Q).join(".*")}.*`;return new RegExp(i,"i").test(t)}(i,e))),t=e.length;return u?{filteredFields:e,totalFields:t}:{filteredFields:e.filter(((e,t)=>t<7)),totalFields:t}}),[x,u,i]),g=""!==i.trim()&&0===v,j=Math.min(40*h.length,e-40),E=Object(r.useCallback)((()=>{c((e=>!e))}),[]),F=Object(r.useCallback)((e=>{d((t=>{const i=!t[e];return{...t,[e]:i}}))}),[d]);return void 0===a||-1===e?null:Object(b.jsx)("div",{className:"indexPatternFieldEditor__previewFieldList"},g?Object(b.jsx)(n.a.Fragment,null,Object(b.jsx)(f.EuiSpacer,null),Object(b.jsx)(f.EuiEmptyPrompt,{iconType:"search",title:Object(b.jsx)(f.EuiTextColor,{color:"subdued"},Object(b.jsx)("h3",{className:"indexPatternFieldEditor__previewEmptySearchResult__title"},o.i18n.translate("indexPatternFieldEditor.fieldPreview.searchResult.emptyPromptTitle",{defaultMessage:"No matching fields in this index pattern"}))),titleSize:"xs",actions:Object(b.jsx)(f.EuiButton,{onClick:t,"data-test-subj":"clearSearchButton"},o.i18n.translate("indexPatternFieldEditor.fieldPreview.searchResult.emptyPrompt.clearSearchButtonLabel",{defaultMessage:"Clear search"})),"data-test-subj":"emptySearchResult"})):Object(b.jsx)(J.a,{style:{overflowX:"hidden"},width:"100%",height:j,itemCount:h.length,itemSize:40,overscanCount:4,renderItem:({index:e,style:t})=>{const i=h[e];return Object(b.jsx)("div",{key:i.key,style:t,"data-test-subj":"indexPatternFieldList"},Object(b.jsx)($,{key:i.key,field:i,toggleIsPinned:F}))}}),v<=7?null:Object(b.jsx)("div",{className:"indexPatternFieldEditor__previewFieldList__showMore"},Object(b.jsx)(f.EuiButtonEmpty,{onClick:E,flush:"left"},u?o.i18n.translate("indexPatternFieldEditor.fieldPreview.showLessFieldsButtonLabel",{defaultMessage:"Show less"}):o.i18n.translate("indexPatternFieldEditor.fieldPreview.showMoreFieldsButtonLabel",{defaultMessage:"Show more"}))))};i(80);const K=()=>{const[e,t]=Object(r.useState)(-1),[i,l]=Object(r.useState)(""),{params:{value:{name:a,script:s,format:d}},fields:u,error:c,reset:p}=B(),m=null===a&&null===s&&null===d||!(null!==c||u.length>0)&&(null===a&&null===d),_=Object(r.useCallback)((({height:e})=>{t(e)}),[]);Object(r.useEffect)((()=>p),[p]);const x=null===c||"DOC_NOT_FOUND"!==c.code&&"ERR_FETCHING_DOC"!==c.code;return Object(b.jsx)("div",{className:"indexPatternFieldEditor__previewPannel",tabIndex:0},m?Object(b.jsx)(U,null):Object(b.jsx)(n.a.Fragment,null,Object(b.jsx)(V,null),Object(b.jsx)(f.EuiSpacer,null),Object(b.jsx)(G,null),Object(b.jsx)(f.EuiSpacer,{size:"s"}),Object(b.jsx)(f.EuiFieldSearch,{value:i,onChange:e=>l(e.target.value),placeholder:o.i18n.translate("indexPatternFieldEditor.fieldPreview.filterFieldsPlaceholder",{defaultMessage:"Filter fields"}),fullWidth:!0,"data-test-subj":"filterFieldsInput"}),Object(b.jsx)(f.EuiSpacer,{size:"s"}),Object(b.jsx)(W,null),Object(b.jsx)(f.EuiSpacer,{size:"s"}),x&&Object(b.jsx)(n.a.Fragment,null,(()=>{if(0===u.length)return null;const[e]=u;return Object(b.jsx)("ul",null,Object(b.jsx)("li",{"data-test-subj":"fieldPreviewItem"},Object(b.jsx)($,{field:e,highlighted:!0})))})(),Object(b.jsx)(f.EuiResizeObserver,{onResize:_},(t=>Object(b.jsx)("div",{ref:t,style:{flex:1}},Object(b.jsx)(Y,{height:e,clearSearch:()=>l(""),searchValue:i,key:e})))))))},X=[{label:"Keyword",value:"keyword"},{label:"Long",value:"long"},{label:"Double",value:"double"},{label:"Date",value:"date"},{label:"IP",value:"ip"},{label:"Boolean",value:"boolean"},{label:"Geo point",value:"geo_point"}],{emptyField:ee,numberGreaterThanField:te}=I.h,ie={name:{label:o.i18n.translate("indexPatternFieldEditor.editor.form.nameLabel",{defaultMessage:"Name"}),validations:[{validator:ee(o.i18n.translate("indexPatternFieldEditor.editor.form.validations.nameIsRequiredErrorMessage",{defaultMessage:"A name is required."}))}]},type:{label:o.i18n.translate("indexPatternFieldEditor.editor.form.runtimeTypeLabel",{defaultMessage:"Type"}),defaultValue:[X[0]]},script:{source:{label:o.i18n.translate("indexPatternFieldEditor.editor.form.defineFieldLabel",{defaultMessage:"Define script"}),validations:[{validator:ee(o.i18n.translate("indexPatternFieldEditor.editor.form.validations.scriptIsRequiredErrorMessage",{defaultMessage:"A script is required to set the field value."}))}]}},customLabel:{label:o.i18n.translate("indexPatternFieldEditor.editor.form.customLabelLabel",{defaultMessage:"Custom label"}),validations:[{validator:ee(o.i18n.translate("indexPatternFieldEditor.editor.form.validations.customLabelIsRequiredErrorMessage",{defaultMessage:"Give a label to the field."}))}]},popularity:{label:o.i18n.translate("indexPatternFieldEditor.editor.form.popularityLabel",{defaultMessage:"Popularity"}),validations:[{validator:ee(o.i18n.translate("indexPatternFieldEditor.editor.form.validations.popularityIsRequiredErrorMessage",{defaultMessage:"Give a popularity to the field."}))},{validator:te({than:0,allowEquality:!0,message:o.i18n.translate("indexPatternFieldEditor.editor.form.validations.popularityGreaterThan0ErrorMessage",{defaultMessage:"The popularity must be zero or greater."})})}]},__meta__:{isCustomLabelVisible:{defaultValue:!1},isValueVisible:{defaultValue:!1},isFormatVisible:{defaultValue:!1},isPopularityVisible:{defaultValue:!1}}},re=e=>({value:t})=>{if(e.includes(t))return{message:o.i18n.translate("indexPatternFieldEditor.editor.runtimeFieldsEditor.existRuntimeFieldNamesValidationErrorMessage",{defaultMessage:"A field with this name already exists."})}},ne=({isDisabled:e=!1})=>Object(b.jsx)(I.f,{path:"type"},(({label:t,value:i,setValue:r})=>void 0===i?null:Object(b.jsx)(n.a.Fragment,null,Object(b.jsx)(f.EuiFormRow,{label:t,fullWidth:!0},Object(b.jsx)(f.EuiComboBox,{placeholder:o.i18n.translate("indexPatternFieldEditor.editor.form.runtimeType.placeholderLabel",{defaultMessage:"Select a type"}),singleSelection:{asPlainText:!0},options:X,selectedOptions:i,onChange:e=>{0!==e.length&&r(e)},isClearable:!1,isDisabled:e,"data-test-subj":"typeField","aria-label":o.i18n.translate("indexPatternFieldEditor.editor.form.typeSelectAriaLabel",{defaultMessage:"Type select"}),"aria-controls":"runtimeFieldScript",fullWidth:!0}))))),oe=()=>Object(b.jsx)(I.f,{path:"customLabel",component:I.d}),le=()=>Object(b.jsx)(I.f,{path:"popularity",component:I.c,componentProps:{euiFieldProps:{"data-test-subj":"editorFieldCount"}}});var ae=i(42);const se=e=>{switch(e){case"keyword":return"string_script_field_script_field";case"long":return"long_script_field_script_field";case"double":return"double_script_field_script_field";case"date":return"date_script_field";case"ip":return"ip_script_field_script_field";case"boolean":return"boolean_script_field_script_field";default:return"string_script_field_script_field"}},de=n.a.memo((({existingConcreteFields:e,links:t,syntaxError:i})=>{const l=Object(r.useRef)(),[a,s]=Object(r.useState)(se(ie.type.defaultValue[0].value)),[d,u]=Object(r.useState)(),p=ae.PainlessLang.getSuggestionProvider(a,e),[{type:m,script:{source:_}={source:""}}]=Object(I.m)({watch:["type","script.source"]}),{clear:x}=i,h=Object(r.useMemo)((()=>({...ie.script.source,validations:[...ie.script.source.validations,{validator:()=>(l.current&&clearTimeout(l.current),new Promise((e=>{l.current=setTimeout((()=>{const t=ae.PainlessLang.getSyntaxErrors();if(d&&t[d]&&t[d].length>0)return e({message:o.i18n.translate("indexPatternFieldEditor.editor.form.scriptEditorValidationMessage",{defaultMessage:"Invalid Painless syntax."})});e(void 0)}),600)})))}]})),[d]);return Object(r.useEffect)((()=>{s(se(m[0].value))}),[m]),Object(r.useEffect)((()=>{x()}),[_,x]),Object(b.jsx)(I.f,{path:"script.source",config:h},(({value:e,setValue:r,label:l,isValid:a,getErrorsMessages:s})=>{let d="";var m;null!==i.error?d=null!==(m=i.error.reason)&&void 0!==m?m:i.error.message:d=s();return Object(b.jsx)(n.a.Fragment,null,Object(b.jsx)(f.EuiFormRow,{label:l,id:"runtimeFieldScript",error:d,isInvalid:null!==i.error||!a,helpText:Object(b.jsx)(c.FormattedMessage,{id:"indexPatternFieldEditor.editor.form.source.scriptFieldHelpText",defaultMessage:"Runtime fields without a script retrieve values from {source}. If the field doesn't exist in _source, a search request returns no value. {learnMoreLink}",values:{learnMoreLink:Object(b.jsx)(f.EuiLink,{href:t.runtimePainless,target:"_blank",external:!0,"data-test-subj":"painlessSyntaxLearnMoreLink"},o.i18n.translate("indexPatternFieldEditor.editor.form.script.learnMoreLinkText",{defaultMessage:"Learn about script syntax."})),source:Object(b.jsx)(f.EuiCode,null,"_source")}}),fullWidth:!0},Object(b.jsx)(I.a,{languageId:ae.PainlessLang.ID,suggestionProvider:p,width:"99%",height:"300px",value:e,onChange:r,editorDidMount:e=>{var t;return u(null===(t=e.getModel())||void 0===t?void 0:t.id)},options:{fontSize:12,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on",wrappingIndent:"indent",automaticLayout:!0,suggest:{snippetsPreventQuickSuggestions:!1}},"data-test-subj":"scriptField","aria-label":o.i18n.translate("indexPatternFieldEditor.editor.form.scriptEditorAriaLabel",{defaultMessage:"Script editor"})})),null!==i.error&&Object(b.jsx)(n.a.Fragment,null,Object(b.jsx)(f.EuiSpacer,null),Object(b.jsx)(f.EuiTitle,{size:"xs"},Object(b.jsx)("h3",null,o.i18n.translate("indexPatternFieldEditor.editor.form.scriptEditor.debugErrorMessage",{defaultMessage:"Syntax error detail"}))),Object(b.jsx)(f.EuiSpacer,{size:"xs"}),Object(b.jsx)(f.EuiCodeBlock,{whiteSpace:"pre"},i.error.scriptStack.join("\n"))))}))}));var ue=i(20);const ce=()=>{const{indexPattern:e,uiSettings:t,fieldFormats:i,fieldFormatEditors:o}=M(),l=Object(r.useRef)(!1),[{type:a}]=Object(I.m)({watch:["name","type"]}),{getFields:s,isSubmitted:d}=Object(I.l)(),[u,c]=Object(r.useState)(),p=a.reduce(((e,t)=>(void 0!==t.value&&e.push(t.value),e)),[]);return Object(r.useEffect)((()=>{void 0===u?s().format.setErrors([]):s().format.setErrors([{message:u}])}),[u,s]),Object(r.useEffect)((()=>{l.current&&s().format.reset(),l.current=!0}),[a,s]),Object(b.jsx)(I.f,{path:"format"},(({setValue:r,errors:l,value:a})=>Object(b.jsx)(n.a.Fragment,null,d&&l.length>0&&Object(b.jsx)(n.a.Fragment,null,Object(b.jsx)(f.EuiCallOut,{title:l.map((e=>e.message)),color:"danger",iconType:"cross","data-test-subj":"formFormatError"}),Object(b.jsx)(f.EuiSpacer,{size:"m"})),Object(b.jsx)(ue.a,{esTypes:p||["keyword"],indexPattern:e,fieldFormatEditors:o,fieldFormats:i,uiSettings:t,onChange:r,onError:c,value:a,key:p.join(", ")}))))},fe=({title:e,description:t,children:i,formFieldPath:r,withDividerRule:o=!1,"data-test-subj":l})=>{const[a]=Object(I.m)({watch:r}),s=Boolean(Object(T.get)(a,r));return Object(b.jsx)(n.a.Fragment,null,Object(b.jsx)(f.EuiFlexGroup,{"data-test-subj":null!=l?l:"formRow"},Object(b.jsx)(f.EuiFlexItem,{grow:!1},Object(b.jsx)(I.f,{path:r,component:I.e,componentProps:{euiFieldProps:{label:e,showLabel:!1,"data-test-subj":"toggle"}}})),Object(b.jsx)(f.EuiFlexItem,null,Object(b.jsx)("div",null,Object(b.jsx)(f.EuiTitle,{size:"xs"},Object(b.jsx)("h3",null,e)),Object(b.jsx)(f.EuiSpacer,{size:"xs"}),Object(b.jsx)(f.EuiText,{size:"s",color:"subdued"},t),s&&Object(b.jsx)(n.a.Fragment,null,Object(b.jsx)(f.EuiSpacer,{size:"l"}),i)))),o&&Object(b.jsx)(f.EuiHorizontalRule,null))},pe=({children:e})=>{const[t,i]=Object(r.useState)(!1);return Object(b.jsx)(n.a.Fragment,null,Object(b.jsx)(f.EuiButtonEmpty,{onClick:()=>{i(!t)},flush:"left","data-test-subj":"toggleAdvancedSetting"},t?o.i18n.translate("indexPatternFieldEditor.editor.form.advancedSettings.hideButtonLabel",{defaultMessage:"Hide advanced settings"}):o.i18n.translate("indexPatternFieldEditor.editor.form.advancedSettings.showButtonLabel",{defaultMessage:"Show advanced settings"})),Object(b.jsx)("div",{style:{display:t?"block":"none"},"data-test-subj":"advancedSettings"},Object(b.jsx)(f.EuiSpacer,{size:"m"}),Object(b.jsx)("div",null,e)))},me=o.i18n.translate("indexPatternFieldEditor.editor.form.changeWarning",{defaultMessage:"Changing name or type can break searches and visualizations that rely on this field."}),_e=e=>{let t;if(e.type){var i;const r=null===(i=X.find((({value:t})=>t===e.type)))||void 0===i?void 0:i.label;t=[{label:null!=r?r:e.type,value:e.type}]}else t=[X[0]];return{...e,type:t,__meta__:{isCustomLabelVisible:void 0!==e.customLabel,isValueVisible:void 0!==e.script,isFormatVisible:void 0!==e.format,isPopularityVisible:void 0!==e.popularity}}},xe=e=>{const{__meta__:t,type:i,...r}=e;return{type:i[0].value,...r}},be=({field:e,onChange:t,onFormModifiedChange:i,syntaxError:l})=>{var a,s;const{links:d,namesNotAllowed:u,existingConcreteFields:p,fieldTypeToProcess:m}=M(),{params:{update:_},panel:{setIsVisible:x}}=B(),{form:h}=Object(I.k)({defaultValue:e,schema:ie,deserializer:_e,serializer:xe}),{submit:v,isValid:g,isSubmitted:j,getFields:E}=h,{clear:F}=l,y=((e,t)=>{var i;const r=ie.name;return e?{...r,validations:[...null!==(i=r.validations)&&void 0!==i?i:[],{validator:re(e.filter((e=>e!==(null==t?void 0:t.name))))}]}:r})(u,e),O={customLabel:{title:o.i18n.translate("indexPatternFieldEditor.editor.form.customLabelTitle",{defaultMessage:"Set custom label"}),description:o.i18n.translate("indexPatternFieldEditor.editor.form.customLabelDescription",{defaultMessage:"Create a label to display in place of the field name in Discover, Maps, and Visualize. Useful for shortening a long field name.  Queries and filters use the original field name."})},value:{title:o.i18n.translate("indexPatternFieldEditor.editor.form.valueTitle",{defaultMessage:"Set value"}),description:Object(b.jsx)(c.FormattedMessage,{id:"indexPatternFieldEditor.editor.form.valueDescription",defaultMessage:"Set a value for the field instead of retrieving it from the field with the same name in {source}.",values:{source:Object(b.jsx)(f.EuiCode,null,"_source")}})},format:{title:o.i18n.translate("indexPatternFieldEditor.editor.form.formatTitle",{defaultMessage:"Set format"}),description:o.i18n.translate("indexPatternFieldEditor.editor.form.formatDescription",{defaultMessage:"Set your preferred format for displaying the value. Changing the format can affect the value and prevent highlighting in Discover."})},popularity:{title:o.i18n.translate("indexPatternFieldEditor.editor.form.popularityTitle",{defaultMessage:"Set popularity"}),description:o.i18n.translate("indexPatternFieldEditor.editor.form.popularityDescription",{defaultMessage:"Adjust the popularity to make the field appear higher or lower in the fields list.  By default, Discover orders fields from most selected to least selected."})}},[w]=Object(I.m)({form:h}),P=Object(I.n)({form:h,discard:["__meta__.isCustomLabelVisible","__meta__.isValueVisible","__meta__.isFormatVisible","__meta__.isPopularityVisible"]}),{name:S,type:C,script:L,format:k}=w,{name:z,type:R}=E(),D=null!==(a=Boolean(null==e?void 0:e.name)&&(null==z?void 0:z.isModified))&&void 0!==a&&a,N=null!==(s=Boolean(null==e?void 0:e.type)&&(null==R?void 0:R.isModified))&&void 0!==s&&s,A=Object(T.get)(w,"__meta__.isValueVisible"),V=Object(T.get)(w,"__meta__.isFormatVisible");return Object(r.useEffect)((()=>{t&&t({isValid:g,isSubmitted:j,submit:v})}),[t,g,j,v]),Object(r.useEffect)((()=>{F()}),[C,F]),Object(r.useEffect)((()=>{_({name:Boolean(null==S?void 0:S.trim())?S:null,type:null==C?void 0:C[0].value,script:!1===A||!1===Boolean(null==L?void 0:L.source.trim())?null:L,format:void 0!==(null==k?void 0:k.id)?k:null})}),[S,C,L,A,k,_]),Object(r.useEffect)((()=>{x(!(!A&&!V))}),[A,V,x]),Object(r.useEffect)((()=>{i&&i(P)}),[P,i]),Object(b.jsx)(I.b,{form:h,className:"indexPatternFieldEditor__form","data-test-subj":"indexPatternFieldEditorForm"},Object(b.jsx)(f.EuiFlexGroup,null,Object(b.jsx)(f.EuiFlexItem,null,Object(b.jsx)(I.f,{path:"name",config:y,component:I.d,"data-test-subj":"nameField",componentProps:{euiFieldProps:{disabled:"concrete"===m,"aria-label":o.i18n.translate("indexPatternFieldEditor.editor.form.nameAriaLabel",{defaultMessage:"Name field"})}}})),Object(b.jsx)(f.EuiFlexItem,null,Object(b.jsx)(ne,{isDisabled:"concrete"===m}))),(D||N)&&Object(b.jsx)(n.a.Fragment,null,Object(b.jsx)(f.EuiSpacer,{size:"xs"}),Object(b.jsx)(f.EuiCallOut,{color:"warning",title:me,iconType:"alert",size:"s","data-test-subj":"changeWarning"})),Object(b.jsx)(f.EuiSpacer,{size:"xl"}),Object(b.jsx)(fe,{title:O.customLabel.title,description:O.customLabel.description,formFieldPath:"__meta__.isCustomLabelVisible","data-test-subj":"customLabelRow",withDividerRule:!0},Object(b.jsx)(oe,null)),"runtime"===m&&Object(b.jsx)(fe,{title:O.value.title,description:O.value.description,formFieldPath:"__meta__.isValueVisible","data-test-subj":"valueRow",withDividerRule:!0},Object(b.jsx)(de,{existingConcreteFields:p,links:d,syntaxError:l})),Object(b.jsx)(fe,{title:O.format.title,description:O.format.description,formFieldPath:"__meta__.isFormatVisible","data-test-subj":"formatRow",withDividerRule:!0},Object(b.jsx)(ce,null)),Object(b.jsx)(pe,null,Object(b.jsx)(fe,{title:O.popularity.title,description:O.popularity.description,formFieldPath:"__meta__.isPopularityVisible","data-test-subj":"popularityRow",withDividerRule:!0},Object(b.jsx)(le,null))))},he=n.a.memo(be);i(19);const ve={title:o.i18n.translate("indexPatternFieldEditor.cancelField.confirmationModal.title",{defaultMessage:"Discard changes"}),description:o.i18n.translate("indexPatternFieldEditor.cancelField.confirmationModal.description",{defaultMessage:"Changes that you've made to your field will be discarded, are you sure you want to continue?"}),cancelButton:o.i18n.translate("indexPatternFieldEditor.cancelField.confirmationModal.cancelButtonLabel",{defaultMessage:"Cancel"})},ge=({onCancel:e,onConfirm:t})=>Object(b.jsx)(f.EuiConfirmModal,{title:ve.title,"data-test-subj":"runtimeFieldModifiedFieldConfirmModal",cancelButtonText:ve.cancelButton,confirmButtonText:ve.title,onCancel:e,onConfirm:t,maxWidth:600},Object(b.jsx)("p",null,ve.description)),je=({fieldName:e,onCancel:t,onConfirm:i})=>{const n=(e=>({cancelButtonText:o.i18n.translate("indexPatternFieldEditor.saveRuntimeField.confirmationModal.cancelButtonLabel",{defaultMessage:"Cancel"}),confirmButtonText:o.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmationModal.saveButtonLabel",{defaultMessage:"Save changes"}),warningChangingFields:o.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmModal.warningChangingFields",{defaultMessage:"Changing name or type can break searches and visualizations that rely on this field."}),typeConfirm:o.i18n.translate("indexPatternFieldEditor.saveRuntimeField.confirmModal.typeConfirm",{defaultMessage:"Enter CHANGE to continue"}),titleConfirmChanges:o.i18n.translate("indexPatternFieldEditor.saveRuntimeField.confirmModal.title",{defaultMessage:"Save changes to '{name}'",values:{name:e}})}))(e),[l,a]=Object(r.useState)("");return Object(b.jsx)(f.EuiConfirmModal,{title:n.titleConfirmChanges,"data-test-subj":"runtimeFieldSaveConfirmModal",cancelButtonText:n.cancelButtonText,confirmButtonText:n.confirmButtonText,confirmButtonDisabled:"CHANGE"!==(null==l?void 0:l.toUpperCase()),onCancel:t,onConfirm:i},Object(b.jsx)(f.EuiCallOut,{color:"warning",title:n.warningChangingFields,iconType:"alert",size:"s"}),Object(b.jsx)(f.EuiSpacer,null),Object(b.jsx)(f.EuiFormRow,{label:n.typeConfirm},Object(b.jsx)(f.EuiFieldText,{value:l,onChange:e=>a(e.target.value),"data-test-subj":"saveModalConfirmText"})))},Ee={cancelButtonLabel:o.i18n.translate("indexPatternFieldEditor.editor.flyoutCancelButtonLabel",{defaultMessage:"Cancel"}),saveButtonLabel:o.i18n.translate("indexPatternFieldEditor.editor.flyoutSaveButtonLabel",{defaultMessage:"Save"}),formErrorsCalloutTitle:o.i18n.translate("indexPatternFieldEditor.editor.validationErrorTitle",{defaultMessage:"Fix errors in form before continuing."})},Fe={confirmChangeNameOrType:!1,confirmUnsavedChanges:!1},ye=({field:e,onSave:t,onCancel:i,runtimeFieldValidator:o,isSavingField:l,onMounted:s})=>{const d=!!e,{indexPattern:u}=M(),{panel:{isVisible:p}}=B(),[m,_]=Object(r.useState)({isSubmitted:!1,isValid:!!e||void 0,submit:e?async()=>({isValid:!0,data:e}):async()=>({isValid:!1,data:{}})}),[x,h]=Object(r.useState)(null),[v,g]=Object(r.useState)(!1),[j,E]=Object(r.useState)(Fe),[S,C]=Object(r.useState)(!1),{submit:T,isValid:I,isSubmitted:L}=m,k=!1===I||null!==x,z=Object(r.useCallback)((()=>h(null)),[]),R=Object(r.useMemo)((()=>({error:x,clear:z})),[x,z]),D=Object(r.useCallback)((()=>(S&&E({...Fe,confirmUnsavedChanges:!0}),!S)),[S]),N=Object(r.useCallback)((async()=>{const{isValid:i,data:r}=await T(),n=(null==e?void 0:e.name)!==r.name,l=(null==e?void 0:e.type)!==r.type;if(i){if(r.script){g(!0);const e=await o({type:r.type,script:r.script});if(g(!1),h(e),e)return}d&&(n||l)?E({...Fe,confirmChangeNameOrType:!0}):t(r)}}),[t,T,o,e,d]),A=Object(r.useCallback)((()=>{D()&&i()}),[i,D]);return Object(r.useEffect)((()=>{if(s)return s({canCloseValidator:D}),()=>{s({canCloseValidator:()=>!0})}}),[s,D]),Object(b.jsx)(n.a.Fragment,null,Object(b.jsx)(F,{flyoutClassName:a.a,maxWidth:1180,"data-test-subj":"fieldEditor",fixedPanelWidths:!0},Object(b.jsx)(y,{width:600},Object(b.jsx)(O,null,Object(b.jsx)(w,null,Object(b.jsx)(f.EuiTitle,{"data-test-subj":"flyoutTitle"},Object(b.jsx)("h2",null,e?Object(b.jsx)(c.FormattedMessage,{id:"indexPatternFieldEditor.editor.flyoutEditFieldTitle",defaultMessage:"Edit field '{fieldName}'",values:{fieldName:e.name}}):Object(b.jsx)(c.FormattedMessage,{id:"indexPatternFieldEditor.editor.flyoutDefaultTitle",defaultMessage:"Create field"}))),Object(b.jsx)(f.EuiText,{color:"subdued"},Object(b.jsx)("p",null,Object(b.jsx)(c.FormattedMessage,{id:"indexPatternFieldEditor.editor.flyoutEditFieldSubtitle",defaultMessage:"Index pattern: {patternName}",values:{patternName:Object(b.jsx)("i",null,u.title)}})))),Object(b.jsx)(he,{field:e,onChange:_,onFormModifiedChange:C,syntaxError:R})),Object(b.jsx)(P,null,Object(b.jsx)(n.a.Fragment,null,L&&k&&Object(b.jsx)(n.a.Fragment,null,Object(b.jsx)(f.EuiCallOut,{title:Ee.formErrorsCalloutTitle,color:"danger",iconType:"cross","data-test-subj":"formError"}),Object(b.jsx)(f.EuiSpacer,{size:"m"})),Object(b.jsx)(f.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(b.jsx)(f.EuiFlexItem,{grow:!1},Object(b.jsx)(f.EuiButtonEmpty,{iconType:"cross",flush:"left",onClick:A,"data-test-subj":"closeFlyoutButton"},Ee.cancelButtonLabel)),Object(b.jsx)(f.EuiFlexItem,{grow:!1},Object(b.jsx)(f.EuiButton,{color:"primary",onClick:N,"data-test-subj":"fieldSaveButton",fill:!0,disabled:k,isLoading:l||v},Ee.saveButtonLabel)))))),p&&Object(b.jsx)(y,{width:440,backgroundColor:"euiPageBackground",border:"left","data-test-subj":"previewPanel"},Object(b.jsx)(K,null))),j.confirmChangeNameOrType?Object(b.jsx)(je,{fieldName:null==e?void 0:e.name,onConfirm:async()=>{const{data:e}=await T();t(e)},onCancel:()=>{E(Fe)}}):j.confirmUnsavedChanges?Object(b.jsx)(ge,{onConfirm:()=>{E(Fe),i()},onCancel:()=>{E(Fe)}}):null)},Oe=n.a.memo(ye),we=({field:e,onSave:t,onCancel:i,onMounted:n,docLinks:d,fieldTypeToProcess:c,indexPattern:f,indexPatternService:p,search:m,notifications:_,usageCollection:x,apiService:h,fieldFormatEditors:v,fieldFormats:g,uiSettings:j})=>{const E=((e,t)=>{var i;if(void 0!==t)return{name:t.name,type:null!=t&&t.esTypes?t.esTypes[0]:"keyword",script:t.runtimeField?t.runtimeField.script:void 0,customLabel:t.customLabel,popularity:t.count,format:null===(i=e.getFormatterForFieldNoDefault(t.name))||void 0===i?void 0:i.toJSON()}})(f,e),[F,y]=Object(r.useState)(!1),{fields:O}=f,w=Object(r.useMemo)((()=>O.map((e=>e.name))),[O]),P=Object(r.useMemo)((()=>{const t=[];return O.filter((t=>!((null==e?void 0:e.name)===t.name)&&t.isMapped)).forEach((e=>{t.push({name:e.name,type:e.esTypes&&e.esTypes[0]||""})})),t}),[O,e]),S=Object(r.useMemo)((()=>{return e=f.title,t=m,async i=>await t.search({params:{index:e,body:{runtime_mappings:{temp:i},size:0,query:{match_none:{}}}}}).toPromise().then((()=>null)).catch((e=>u(e.attributes)));var e,t}),[m,f]),M=Object(r.useMemo)((()=>({api:h,search:m,notifications:_})),[h,m,_]),T=Object(r.useCallback)((async i=>{y(!0);const{script:r}=i;if("runtime"===c){try{x.reportUiCounter(a.b,l.METRIC_TYPE.COUNT,"save_runtime")}catch{}null!=e&&e.name&&e.name!==i.name&&f.removeRuntimeField(e.name),f.addRuntimeField(i.name,{type:i.type,script:r})}else try{x.reportUiCounter(a.b,l.METRIC_TYPE.COUNT,"save_concrete")}catch{}const n=f.getFieldByName(i.name);try{if(!n)throw new Error(`Unable to find field named '${i.name}' on index pattern '${f.title}'`);f.setFieldCustomLabel(i.name,i.customLabel),n.count=i.popularity||0,i.format?f.setFieldFormat(i.name,i.format):f.deleteFieldFormat(i.name),await p.updateSavedObject(f).then((()=>{const e=o.i18n.translate("indexPatternFieldEditor.deleteField.savedHeader",{defaultMessage:"Saved '{fieldName}'",values:{fieldName:i.name}});_.toasts.addSuccess(e),y(!1),t(n)}))}catch(e){const t=o.i18n.translate("indexPatternFieldEditor.save.errorTitle",{defaultMessage:"Failed to save field changes"});_.toasts.addError(e,{title:t}),y(!1)}}),[t,f,p,_,c,null==e?void 0:e.name,x]);return Object(b.jsx)(C,{indexPattern:f,uiSettings:j,links:s(d),fieldTypeToProcess:c,services:M,fieldFormatEditors:v,fieldFormats:g,namesNotAllowed:w,existingConcreteFields:P},Object(b.jsx)(N,null,Object(b.jsx)(Oe,{onSave:T,onCancel:i,onMounted:n,field:E,runtimeFieldValidator:S,isSavingField:F})))}}])]);