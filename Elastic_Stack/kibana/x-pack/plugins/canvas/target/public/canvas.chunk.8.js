/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.canvas_bundle_jsonpfunction=window.canvas_bundle_jsonpfunction||[]).push([[8],{111:function(e,t,n){e.exports=n(16)(2394)},142:function(e,t,n){e.exports=n(16)(833)},143:function(e,t,n){"use strict";function r(e,t,n,a){var i=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(i,r.prototype),i.expected=t,i.found=n,i.location=a,i.name="SyntaxError",i}function a(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(r,Error),r.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n,r=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){r=e[n].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,s=this.location.source+":"+i.line+":"+i.column;if(r){var o=this.location.end,l=a("",i.line.toString().length),u=r[i.line-1],c=i.line===o.line?o.column:u.length+1;t+="\n --\x3e "+s+"\n"+l+" |\n"+i.line+" | "+u+"\n"+l+" | "+a("",i.column-1)+a("",c-i.column,"^")}else t+="\n at "+s}return t},r.buildMessage=function(e,t){var n={literal:function(e){return'"'+a(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?i(e[0])+"-"+i(e[1]):i(e)}));return"["+(e.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function a(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function s(e){return n[e.type](e)}return"Expected "+function(e){var t,n,r=e.map(s);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+a(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:r,parse:function(e,t){var n,a={},i=(t=void 0!==t?t:{}).grammarSource,s={start:ve,Literal:qe},o=ve,l=":",u="or",c="and",p="not",d='"',f="\\",h="<=",m=">=",g="@kuery-cursor@",y=/^[\\"]/,b=/^[^"]/,v=/^[\\():<>"*{}]/,w=/^[0-9a-f]/i,_=/^[ \t\r\n\xA0]/,O=de("(",!1),j=de(")",!1),x=de(":",!1),C=de("{",!1),E=de("}",!1),S=he("fieldName"),T=he("value"),k=he("OR"),A=de("or",!0),R=he("AND"),q=de("and",!0),N=he("NOT"),L=de("not",!0),I=he("literal"),F=de('"',!1),D=de("\\",!1),P=fe(["\\",'"'],!1,!1),z=fe(['"'],!0,!1),M={type:"any"},U=de("*",!1),$=de("\\t",!1),Q=de("\\r",!1),B=de("\\n",!1),H=fe(["\\","(",")",":","<",">",'"',"*","{","}"],!1,!1),G=de("u",!1),W=fe([["0","9"],["a","f"]],!1,!0),V=de("<=",!1),K=de(">=",!1),J=de("<",!1),Y=de(">",!1),Z=he("whitespace"),X=fe([" ","\t","\r","\n","Â "],!1,!1),ee=de("@kuery-cursor@",!1),te=function(e,t){return t},ne=function(e,t){return t},re=function(e){if("cursor"===e.type)return e;!Ge&&"wildcard"===e.type&&We.wildcard.hasLeadingWildcard(e)&&function(e,t){throw t=void 0!==t?t:ge(oe,se),function(e,t){return new r(e,null,null,t)}(e,t)}("Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.");const t=Ke(!1);return n=>Ve("is",[n,e,t])},ae=function(){return Be},ie=function(t,n,r){const{start:a,end:i}=ge(oe,se);return{type:"cursor",start:a.offset,end:i.offset-n.length,prefix:t.join(""),suffix:r.join(""),text:e.substring(oe,se).replace(n,"")}},se=0,oe=0,le=[{line:1,column:1}],ue=0,ce=[],pe=0;if("startRule"in t){if(!(t.startRule in s))throw new Error("Can't start parsing from rule \""+t.startRule+'".');o=s[t.startRule]}function de(e,t){return{type:"literal",text:e,ignoreCase:t}}function fe(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function he(e){return{type:"other",description:e}}function me(t){var n,r=le[t];if(r)return r;for(n=t-1;!le[n];)n--;for(r={line:(r=le[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return le[t]=r,r}function ge(e,t){var n=me(e),r=me(t);return{source:i,start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function ye(e){se<ue||(se>ue&&(ue=se,ce=[]),ce.push(e))}function be(e,t,n){return new r(r.buildMessage(e,t),e,t,n)}function ve(){var e,t,n,r,i,s;for(e=se,t=[],n=$e();n!==a;)t.push(n),n=$e();return(n=we())===a&&(n=null),(r=De())!==a?(oe=e,i=n,e="cursor"===(s=r).type?{...s,suggestionTypes:["conjunction"]}:null!==i?i:We.function.buildNode("is","*","*")):(se=e,e=a),e}function we(){var e,t,n,r,i;if(e=se,(t=_e())!==a){if(n=[],r=se,ke()!==a&&(i=_e())!==a?(oe=r,r=te(0,i)):(se=r,r=a),r!==a)for(;r!==a;)n.push(r),r=se,ke()!==a&&(i=_e())!==a?(oe=r,r=te(0,i)):(se=r,r=a);else n=a;n!==a?(oe=e,e=function(e,t){const n=[e,...t];return Be&&n.find((e=>"cursor"===e.type))||Ve("or",n)}(t,n)):(se=e,e=a)}else se=e,e=a;return e===a&&(e=_e()),e}function _e(){var e,t,n,r,i;if(e=se,(t=Oe())!==a){if(n=[],r=se,Ae()!==a&&(i=Oe())!==a?(oe=r,r=te(0,i)):(se=r,r=a),r!==a)for(;r!==a;)n.push(r),r=se,Ae()!==a&&(i=Oe())!==a?(oe=r,r=te(0,i)):(se=r,r=a);else n=a;n!==a?(oe=e,e=function(e,t){const n=[e,...t];return Be&&n.find((e=>"cursor"===e.type))||Ve("and",n)}(t,n)):(se=e,e=a)}else se=e,e=a;return e===a&&(e=Oe()),e}function Oe(){var e,t,n;return e=se,Re()!==a&&(t=je())!==a?(oe=e,e="cursor"===(n=t).type?n:Ve("not",[n])):(se=e,e=a),e===a&&(e=je()),e}function je(){var t,n,r,i,s,o,u,c;if(t=se,40===e.charCodeAt(se)?(n="(",se++):(n=a,0===pe&&ye(O)),n!==a){for(r=[],i=$e();i!==a;)r.push(i),i=$e();(i=we())!==a&&(s=De())!==a?(41===e.charCodeAt(se)?(o=")",se++):(o=a,0===pe&&ye(j)),o!==a?(oe=t,u=i,t="cursor"===(c=s).type?{...c,suggestionTypes:["conjunction"]}:u):(se=t,t=a)):(se=t,t=a)}else se=t,t=a;return t===a&&(t=function(){var t,n,r,i,s,o,u,c,p,d;if(t=se,(n=xe())!==a){for(r=[],i=$e();i!==a;)r.push(i),i=$e();if(58===e.charCodeAt(se)?(i=":",se++):(i=a,0===pe&&ye(x)),i!==a){for(s=[],o=$e();o!==a;)s.push(o),o=$e();if(123===e.charCodeAt(se)?(o="{",se++):(o=a,0===pe&&ye(C)),o!==a){for(u=[],c=$e();c!==a;)u.push(c),c=$e();(c=we())!==a&&(p=De())!==a?(125===e.charCodeAt(se)?(d="}",se++):(d=a,0===pe&&ye(E)),d!==a?(oe=t,t=function(e,t,n){return"cursor"===t.type?{...t,nestedPath:t.nestedPath?`${e.value}.${t.nestedPath}`:e.value}:"cursor"===n.type?{...n,suggestionTypes:["conjunction"]}:Ve("nested",[e,t])}(n,c,p)):(se=t,t=a)):(se=t,t=a)}else se=t,t=a}else se=t,t=a}else se=t,t=a;t===a&&(t=function(){var t;(t=function(){var t,n,r,i,s,o;if(t=se,(n=xe())!==a){for(r=[],i=$e();i!==a;)r.push(i),i=$e();if((i=function(){var t,n;t=se,e.substr(se,2)===h?(n=h,se+=2):(n=a,0===pe&&ye(V));n!==a&&(oe=t,n="lte");(t=n)===a&&(t=se,e.substr(se,2)===m?(n=m,se+=2):(n=a,0===pe&&ye(K)),n!==a&&(oe=t,n="gte"),(t=n)===a&&(t=se,60===e.charCodeAt(se)?(n="<",se++):(n=a,0===pe&&ye(J)),n!==a&&(oe=t,n="lt"),(t=n)===a&&(t=se,62===e.charCodeAt(se)?(n=">",se++):(n=a,0===pe&&ye(Y)),n!==a&&(oe=t,n="gt"),t=n)));return t}())!==a){for(s=[],o=$e();o!==a;)s.push(o),o=$e();(o=qe())!==a?(oe=t,t=function(e,t,n){if("cursor"===n.type)return{...n,suggestionTypes:["conjunction"]};const r=Ye(t,n);return Ve("range",[e,r])}(n,i,o)):(se=t,t=a)}else se=t,t=a}else se=t,t=a;return t}())===a&&(t=function(){var t,n,r,i,s,o;if(t=se,(n=xe())!==a){for(r=[],i=$e();i!==a;)r.push(i),i=$e();if(58===e.charCodeAt(se)?(i=l,se++):(i=a,0===pe&&ye(x)),i!==a){for(s=[],o=$e();o!==a;)s.push(o),o=$e();(o=Ce())!==a?(oe=t,u=n,t="cursor"===(c=o).type?{...c,fieldName:u.value,suggestionTypes:["value","conjunction"]}:c(u)):(se=t,t=a)}else se=t,t=a}else se=t,t=a;var u,c;return t}())===a&&(t=function(){var e,t;e=se,(t=Te())!==a&&(oe=e,t=function(e){if("cursor"===e.type){const t=`${e.prefix}${e.suffix}`.trim();return{...e,fieldName:t,suggestionTypes:["field","operator","conjunction"]}}return e(Ke(null))}(t));return e=t}());return t}());return t}()),t}function xe(){var e;return pe++,e=qe(),pe--,e===a&&(a,0===pe&&ye(S)),e}function Ce(){var t,n,r,i,s,o,l,u;if(t=se,40===e.charCodeAt(se)?(n="(",se++):(n=a,0===pe&&ye(O)),n!==a){for(r=[],i=$e();i!==a;)r.push(i),i=$e();(i=function(){var e,t,n,r,i;if(e=se,(t=Ee())!==a){if(n=[],r=se,ke()!==a&&(i=Ee())!==a?(oe=r,r=ne(0,i)):(se=r,r=a),r!==a)for(;r!==a;)n.push(r),r=se,ke()!==a&&(i=Ee())!==a?(oe=r,r=ne(0,i)):(se=r,r=a);else n=a;n!==a?(oe=e,e=function(e,t){const n=[e,...t],r=Be&&n.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>Ve("or",n.map((t=>t(e))))}(t,n)):(se=e,e=a)}else se=e,e=a;e===a&&(e=Ee());return e}())!==a&&(s=De())!==a?(41===e.charCodeAt(se)?(o=")",se++):(o=a,0===pe&&ye(j)),o!==a?(oe=t,l=i,t="cursor"===(u=s).type?{...u,suggestionTypes:["conjunction"]}:l):(se=t,t=a)):(se=t,t=a)}else se=t,t=a;return t===a&&(t=Te()),t}function Ee(){var e,t,n,r,i;if(e=se,(t=Se())!==a){if(n=[],r=se,Ae()!==a&&(i=Se())!==a?(oe=r,r=ne(0,i)):(se=r,r=a),r!==a)for(;r!==a;)n.push(r),r=se,Ae()!==a&&(i=Se())!==a?(oe=r,r=ne(0,i)):(se=r,r=a);else n=a;n!==a?(oe=e,e=function(e,t){const n=[e,...t],r=Be&&n.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>Ve("and",n.map((t=>t(e))))}(t,n)):(se=e,e=a)}else se=e,e=a;return e===a&&(e=Se()),e}function Se(){var e,t,n;return e=se,Re()!==a&&(t=Ce())!==a?(oe=e,e="cursor"===(n=t).type?{...list,suggestionTypes:["value"]}:e=>Ve("not",[n(e)])):(se=e,e=a),e===a&&(e=Ce()),e}function Te(){var e,t;return pe++,e=se,(t=Ne())!==a&&(oe=e,t=function(e){if("cursor"===e.type)return e;const t=Ke(!0);return n=>Ve("is",[n,e,t])}(t)),(e=t)===a&&(e=se,(t=Ie())!==a&&(oe=e,t=re(t)),e=t),pe--,e===a&&(t=a,0===pe&&ye(T)),e}function ke(){var t,n,r,i,s;if(pe++,t=se,n=[],(r=$e())!==a)for(;r!==a;)n.push(r),r=$e();else n=a;if(n!==a)if("or"===e.substr(se,2).toLowerCase()?(r=e.substr(se,2),se+=2):(r=a,0===pe&&ye(A)),r!==a){if(i=[],(s=$e())!==a)for(;s!==a;)i.push(s),s=$e();else i=a;i!==a?t=n=[n,r,i]:(se=t,t=a)}else se=t,t=a;else se=t,t=a;return pe--,t===a&&(n=a,0===pe&&ye(k)),t}function Ae(){var t,n,r,i,s;if(pe++,t=se,n=[],(r=$e())!==a)for(;r!==a;)n.push(r),r=$e();else n=a;if(n!==a)if("and"===e.substr(se,3).toLowerCase()?(r=e.substr(se,3),se+=3):(r=a,0===pe&&ye(q)),r!==a){if(i=[],(s=$e())!==a)for(;s!==a;)i.push(s),s=$e();else i=a;i!==a?t=n=[n,r,i]:(se=t,t=a)}else se=t,t=a;else se=t,t=a;return pe--,t===a&&(n=a,0===pe&&ye(R)),t}function Re(){var t,n,r,i;if(pe++,t=se,"not"===e.substr(se,3).toLowerCase()?(n=e.substr(se,3),se+=3):(n=a,0===pe&&ye(L)),n!==a){if(r=[],(i=$e())!==a)for(;i!==a;)r.push(i),i=$e();else r=a;r!==a?t=n=[n,r]:(se=t,t=a)}else se=t,t=a;return pe--,t===a&&(n=a,0===pe&&ye(N)),t}function qe(){var e;return pe++,(e=Ne())===a&&(e=Ie()),pe--,e===a&&(a,0===pe&&ye(I)),e}function Ne(){var t,n,r,i,s,o,l;if(t=se,oe=se,(n=(n=ae())?void 0:a)!==a)if(34===e.charCodeAt(se)?(r=d,se++):(r=a,0===pe&&ye(F)),r!==a){for(i=[],s=Le();s!==a;)i.push(s),s=Le();if((s=Qe())!==a){for(o=[],l=Le();l!==a;)o.push(l),l=Le();34===e.charCodeAt(se)?(l=d,se++):(l=a,0===pe&&ye(F)),l!==a?(oe=t,t=ie(i,s,o)):(se=t,t=a)}else se=t,t=a}else se=t,t=a;else se=t,t=a;if(t===a)if(t=se,34===e.charCodeAt(se)?(n=d,se++):(n=a,0===pe&&ye(F)),n!==a){for(r=[],i=Le();i!==a;)r.push(i),i=Le();34===e.charCodeAt(se)?(i=d,se++):(i=a,0===pe&&ye(F)),i!==a?(oe=t,t=Ke(r.join(""))):(se=t,t=a)}else se=t,t=a;return t}function Le(){var t,n,r;return(t=Pe())===a&&(t=Me())===a&&(t=se,92===e.charCodeAt(se)?(n=f,se++):(n=a,0===pe&&ye(D)),n!==a?(y.test(e.charAt(se))?(r=e.charAt(se),se++):(r=a,0===pe&&ye(P)),r!==a?(oe=t,t=r):(se=t,t=a)):(se=t,t=a),t===a&&(t=se,n=se,pe++,r=Qe(),pe--,r===a?n=void 0:(se=n,n=a),n!==a?(b.test(e.charAt(se))?(r=e.charAt(se),se++):(r=a,0===pe&&ye(z)),r!==a?(oe=t,t=r):(se=t,t=a)):(se=t,t=a))),t}function Ie(){var e,t,n,r,i,s;if(e=se,oe=se,(t=(t=ae())?void 0:a)!==a){for(n=[],r=Fe();r!==a;)n.push(r),r=Fe();if((r=Qe())!==a){for(i=[],s=Fe();s!==a;)i.push(s),s=Fe();oe=e,e=ie(n,r,i)}else se=e,e=a}else se=e,e=a;if(e===a){if(e=se,t=[],(n=Fe())!==a)for(;n!==a;)t.push(n),n=Fe();else t=a;t!==a&&(oe=e,t=function(e){const t=e.join("").trim();return"null"===t?Ke(null):"true"===t?Ke(!0):"false"===t?Ke(!1):e.includes(Ze)?Je(t):Ke(t)}(t)),e=t}return e}function Fe(){var t,n,r,i,s;return(t=Pe())===a&&(t=function(){var t,n,r;t=se,92===e.charCodeAt(se)?(n=f,se++):(n=a,0===pe&&ye(D));n!==a&&(r=ze())!==a?(oe=t,t=r):(se=t,t=a);return t}())===a&&(t=Me())===a&&(t=function(){var t,n,r;t=se,92===e.charCodeAt(se)?(n=f,se++):(n=a,0===pe&&ye(D));n!==a?(e.substr(se,2).toLowerCase()===u?(r=e.substr(se,2),se+=2):(r=a,0===pe&&ye(A)),r===a&&(e.substr(se,3).toLowerCase()===c?(r=e.substr(se,3),se+=3):(r=a,0===pe&&ye(q)),r===a&&(e.substr(se,3).toLowerCase()===p?(r=e.substr(se,3),se+=3):(r=a,0===pe&&ye(L)))),r!==a?(oe=t,t=r):(se=t,t=a)):(se=t,t=a);return t}())===a&&(t=function(){var t,n;t=se,42===e.charCodeAt(se)?(n="*",se++):(n=a,0===pe&&ye(U));n!==a&&(oe=t,n=Ze);return t=n}())===a&&(t=se,n=se,pe++,r=ze(),pe--,r===a?n=void 0:(se=n,n=a),n!==a?(r=se,pe++,i=function(){var e;(e=ke())===a&&(e=Ae())===a&&(e=Re());return e}(),pe--,i===a?r=void 0:(se=r,r=a),r!==a?(i=se,pe++,s=Qe(),pe--,s===a?i=void 0:(se=i,i=a),i!==a?(e.length>se?(s=e.charAt(se),se++):(s=a,0===pe&&ye(M)),s!==a?(oe=t,t=s):(se=t,t=a)):(se=t,t=a)):(se=t,t=a)):(se=t,t=a)),t}function De(){var e,t,n,r,i,s;if(e=se,oe=se,(t=(t=ae())?void 0:a)!==a){for(n=[],r=$e();r!==a;)n.push(r),r=$e();if((r=Qe())!==a){for(i=[],s=$e();s!==a;)i.push(s),s=$e();oe=e,e=ie(n,r,i)}else se=e,e=a}else se=e,e=a;if(e===a)for(e=[],t=$e();t!==a;)e.push(t),t=$e();return e}function Pe(){var t,n;return t=se,"\\t"===e.substr(se,2)?(n="\\t",se+=2):(n=a,0===pe&&ye($)),n!==a&&(oe=t,n="\t"),(t=n)===a&&(t=se,"\\r"===e.substr(se,2)?(n="\\r",se+=2):(n=a,0===pe&&ye(Q)),n!==a&&(oe=t,n="\r"),(t=n)===a&&(t=se,"\\n"===e.substr(se,2)?(n="\\n",se+=2):(n=a,0===pe&&ye(B)),n!==a&&(oe=t,n="\n"),t=n)),t}function ze(){var t;return v.test(e.charAt(se))?(t=e.charAt(se),se++):(t=a,0===pe&&ye(H)),t}function Me(){var t,n,r;return t=se,92===e.charCodeAt(se)?(n=f,se++):(n=a,0===pe&&ye(D)),n!==a&&(r=function(){var t,n,r,i,s,o,l,u;t=se,117===e.charCodeAt(se)?(n="u",se++):(n=a,0===pe&&ye(G));n!==a?(r=se,i=se,(s=Ue())!==a&&(o=Ue())!==a&&(l=Ue())!==a&&(u=Ue())!==a?i=s=[s,o,l,u]:(se=i,i=a),(r=i!==a?e.substring(r,se):i)!==a?(oe=t,c=r,t=String.fromCharCode(parseInt(c,16))):(se=t,t=a)):(se=t,t=a);var c;return t}())!==a?(oe=t,t=r):(se=t,t=a),t}function Ue(){var t;return w.test(e.charAt(se))?(t=e.charAt(se),se++):(t=a,0===pe&&ye(W)),t}function $e(){var t;return pe++,_.test(e.charAt(se))?(t=e.charAt(se),se++):(t=a,0===pe&&ye(X)),pe--,t===a&&(a,0===pe&&ye(Z)),t}function Qe(){var t,n;return t=se,oe=se,(ae()?void 0:a)!==a?(e.substr(se,14)===g?(n=g,se+=14):(n=a,0===pe&&ye(ee)),n!==a?(oe=t,t=He):(se=t,t=a)):(se=t,t=a),t}const{parseCursor:Be,cursorSymbol:He,allowLeadingWildcards:Ge=!0,helpers:{nodeTypes:We}}=t,Ve=We.function.buildNodeWithArgumentNodes,Ke=We.literal.buildNode,Je=We.wildcard.buildNode,Ye=We.namedArg.buildNode,{wildcardSymbol:Ze}=We.wildcard;if((n=o())!==a&&se===e.length)return n;throw n!==a&&se<e.length&&ye({type:"end"}),be(ce,ue<e.length?e.charAt(ue):null,ue<e.length?ge(ue,ue+1):ge(ue,ue))}}},201:function(e,t,n){var r,a,i;
/* @license
Papa Parse
v5.2.0
https://github.com/mholt/PapaParse
License: MIT
*/a=[],void 0===(i="function"==typeof(r=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},n=!t.document&&!!t.postMessage,r=n&&/blob:/i.test((t.location||{}).protocol),a={},i=0,s={parse:function(n,r){var o=(r=r||{}).dynamicTyping||!1;if(_(o)&&(r.dynamicTypingFunction=o,o={}),r.dynamicTyping=o,r.transform=!!_(r.transform)&&r.transform,r.worker&&s.WORKERS_SUPPORTED){var l=function(){if(!s.WORKERS_SUPPORTED)return!1;var n,r,o=(n=t.URL||t.webkitURL||null,r=e.toString(),s.BLOB_URL||(s.BLOB_URL=n.createObjectURL(new Blob(["(",r,")();"],{type:"text/javascript"})))),l=new t.Worker(o);return l.onmessage=g,l.id=i++,a[l.id]=l}();return l.userStep=r.step,l.userChunk=r.chunk,l.userComplete=r.complete,l.userError=r.error,r.step=_(r.step),r.chunk=_(r.chunk),r.complete=_(r.complete),r.error=_(r.error),delete r.worker,void l.postMessage({input:n,config:r,workerId:l.id})}var f=null;return s.NODE_STREAM_INPUT,"string"==typeof n?f=r.download?new u(r):new p(r):!0===n.readable&&_(n.read)&&_(n.on)?f=new d(r):(t.File&&n instanceof File||n instanceof Object)&&(f=new c(r)),f.stream(n)},unparse:function(e,t){var n=!1,r=!0,a=",",i="\r\n",o='"',l=o+o,u=!1,c=null;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||s.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(a=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(u=t.skipEmptyLines),"string"==typeof t.newline&&(i=t.newline),"string"==typeof t.quoteChar&&(o=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");c=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+o)}}();var p=new RegExp(h(o),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return f(null,e,u);if("object"==typeof e[0])return f(c||d(e[0]),e,u)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:d(e.data[0])),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),f(e.fields||[],e.data||[],u);throw new Error("Unable to serialize unrecognized input");function d(e){if("object"!=typeof e)return[];var t=[];for(var n in e)t.push(n);return t}function f(e,t,n){var s="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var o=Array.isArray(e)&&0<e.length,l=!Array.isArray(t[0]);if(o&&r){for(var u=0;u<e.length;u++)0<u&&(s+=a),s+=m(e[u],u);0<t.length&&(s+=i)}for(var c=0;c<t.length;c++){var p=o?e.length:t[c].length,d=!1,f=o?0===Object.keys(t[c]).length:0===t[c].length;if(n&&!o&&(d="greedy"===n?""===t[c].join("").trim():1===t[c].length&&0===t[c][0].length),"greedy"===n&&o){for(var h=[],g=0;g<p;g++){var y=l?e[g]:g;h.push(t[c][y])}d=""===h.join("").trim()}if(!d){for(var b=0;b<p;b++){0<b&&!f&&(s+=a);var v=o&&l?e[b]:b;s+=m(t[c][v],b)}c<t.length-1&&(!n||0<p&&!f)&&(s+=i)}}return s}function m(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var r=e.toString().replace(p,l);return"boolean"==typeof n&&n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(r,s.BAD_DELIMITERS)||-1<r.indexOf(a)||" "===r.charAt(0)||" "===r.charAt(r.length-1)?o+r+o:r}}};if(s.RECORD_SEP=String.fromCharCode(30),s.UNIT_SEP=String.fromCharCode(31),s.BYTE_ORDER_MARK="\ufeff",s.BAD_DELIMITERS=["\r","\n",'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!n&&!!t.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=m,s.ParserHandle=f,s.NetworkStreamer=u,s.FileStreamer=c,s.StringStreamer=p,s.ReadableStreamStreamer=d,t.jQuery){var o=t.jQuery;o.fn.parse=function(e){var n=e.config||{},r=[];return this.each((function(e){if("INPUT"!==o(this).prop("tagName").toUpperCase()||"file"!==o(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var a=0;a<this.files.length;a++)r.push({file:this.files[a],inputElem:this,instanceConfig:o.extend({},n)})})),a(),this;function a(){if(0!==r.length){var t,n,a,l,u=r[0];if(_(e.before)){var c=e.before(u.file,u.inputElem);if("object"==typeof c){if("abort"===c.action)return t="AbortError",n=u.file,a=u.inputElem,l=c.reason,void(_(e.error)&&e.error({name:t},n,a,l));if("skip"===c.action)return void i();"object"==typeof c.config&&(u.instanceConfig=o.extend(u.instanceConfig,c.config))}else if("skip"===c)return void i()}var p=u.instanceConfig.complete;u.instanceConfig.complete=function(e){_(p)&&p(e,u.file,u.inputElem),i()},s.parse(u.file,u.instanceConfig)}else _(e.complete)&&e.complete()}function i(){r.splice(0,1),a()}}}function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=v(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new f(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,n){if(this.isFirstChunk&&_(this._config.beforeFirstChunk)){var a=this._config.beforeFirstChunk(e);void 0!==a&&(e=a)}this.isFirstChunk=!1,this._halted=!1;var i=this._partialLine+e;this._partialLine="";var o=this._handle.parse(i,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=o.meta.cursor;this._finished||(this._partialLine=i.substring(l-this._baseIndex),this._baseIndex=l),o&&o.data&&(this._rowCount+=o.data.length);var u=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)t.postMessage({results:o,workerId:s.WORKER_ID,finished:u});else if(_(this._config.chunk)&&!n){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);o=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!u||!_(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),u||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(e){_(this._config.error)?this._config.error(e):r&&this._config.error&&t.postMessage({workerId:s.WORKER_ID,error:e,finished:!1})}}function u(e){var t;(e=e||{}).chunkSize||(e.chunkSize=s.RemoteChunkSize),l.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var r in e)t.setRequestHeader(r,e[r])}if(this._config.chunkSize){var a=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+a)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var n=t.statusText||e;this._sendError(new Error(n))}}function c(e){var t,n;(e=e||{}).chunkSize||(e.chunkSize=s.LocalChunkSize),l.call(this,e);var r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var a=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,a)}var i=t.readAsText(e,this._config.encoding);r||this._chunkLoaded({target:{result:i}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function p(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,n=this._config.chunkSize;return n?(e=t.substring(0,n),t=t.substring(n)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function d(e){l.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=w((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=w((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=w((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=w((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function f(e){var t,n,r,a=Math.pow(2,53),i=-a,o=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,l=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,u=this,c=0,p=0,d=!1,f=!1,g=[],y={data:[],errors:[],meta:{}};if(_(e.step)){var b=e.step;e.step=function(t){if(y=t,j())O();else{if(O(),0===y.data.length)return;c+=t.data.length,e.preview&&c>e.preview?n.abort():(y.data=y.data[0],b(y,u))}}}function w(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function O(){if(y&&r&&(C("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines)for(var t=0;t<y.data.length;t++)w(y.data[t])&&y.data.splice(t--,1);return j()&&function(){if(y)if(Array.isArray(y.data[0])){for(var t=0;j()&&t<y.data.length;t++)y.data[t].forEach(n);y.data.splice(0,1)}else y.data.forEach(n);function n(t){_(e.transformHeader)&&(t=e.transformHeader(t)),g.push(t)}}(),function(){if(!y||!e.header&&!e.dynamicTyping&&!e.transform)return y;function t(t,n){var r,a=e.header?{}:[];for(r=0;r<t.length;r++){var i=r,s=t[r];e.header&&(i=r>=g.length?"__parsed_extra":g[r]),e.transform&&(s=e.transform(s,i)),s=x(i,s),"__parsed_extra"===i?(a[i]=a[i]||[],a[i].push(s)):a[i]=s}return e.header&&(r>g.length?C("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+r,p+n):r<g.length&&C("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+r,p+n)),a}var n=1;return!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(t),n=y.data.length):y.data=t(y.data,0),e.header&&y.meta&&(y.meta.fields=g),p+=n,y}()}function j(){return e.header&&0===g.length}function x(t,n){return r=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[r]&&(e.dynamicTyping[r]=e.dynamicTypingFunction(r)),!0===(e.dynamicTyping[r]||e.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(e){if(o.test(e)){var t=parseFloat(e);if(i<t&&t<a)return!0}return!1}(n)?parseFloat(n):l.test(n)?new Date(n):""===n?null:n):n;var r}function C(e,t,n,r){var a={type:e,code:t,message:n};void 0!==r&&(a.row=r),y.errors.push(a)}this.parse=function(a,i,o){var l=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var n=new RegExp(h(t)+"([^]*?)"+h(t),"gm"),r=(e=e.replace(n,"")).split("\r"),a=e.split("\n"),i=1<a.length&&a[0].length<r[0].length;if(1===r.length||i)return"\n";for(var s=0,o=0;o<r.length;o++)"\n"===r[o][0]&&s++;return s>=r.length/2?"\r\n":"\r"}(a,l)),r=!1,e.delimiter)_(e.delimiter)&&(e.delimiter=e.delimiter(a),y.meta.delimiter=e.delimiter);else{var u=function(t,n,r,a,i){var o,l,u,c;i=i||[",","\t","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var p=0;p<i.length;p++){var d=i[p],f=0,h=0,g=0;u=void 0;for(var y=new m({comments:a,delimiter:d,newline:n,preview:10}).parse(t),b=0;b<y.data.length;b++)if(r&&w(y.data[b]))g++;else{var v=y.data[b].length;h+=v,void 0!==u?0<v&&(f+=Math.abs(v-u),u=v):u=v}0<y.data.length&&(h/=y.data.length-g),(void 0===l||f<=l)&&(void 0===c||c<h)&&1.99<h&&(l=f,o=d,c=h)}return{successful:!!(e.delimiter=o),bestDelimiter:o}}(a,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);u.successful?e.delimiter=u.bestDelimiter:(r=!0,e.delimiter=s.DefaultDelimiter),y.meta.delimiter=e.delimiter}var c=v(e);return e.preview&&e.header&&c.preview++,t=a,n=new m(c),y=n.parse(t,i,o),O(),d?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,n.abort(),t=_(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){u.streamer._halted?(d=!1,u.streamer.parseChunk(t,!0)):setTimeout(u.resume,3)},this.aborted=function(){return f},this.abort=function(){f=!0,n.abort(),y.meta.aborted=!0,_(e.complete)&&e.complete(y),t=""}}function h(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(e){var t,n=(e=e||{}).delimiter,r=e.newline,a=e.comments,i=e.step,o=e.preview,l=e.fastMode,u=t=void 0===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(u=e.escapeChar),("string"!=typeof n||-1<s.BAD_DELIMITERS.indexOf(n))&&(n=","),a===n)throw new Error("Comment character same as delimiter");!0===a?a="#":("string"!=typeof a||-1<s.BAD_DELIMITERS.indexOf(a))&&(a=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var c=0,p=!1;this.parse=function(e,s,d){if("string"!=typeof e)throw new Error("Input must be a string");var f=e.length,m=n.length,g=r.length,y=a.length,b=_(i),v=[],w=[],O=[],j=c=0;if(!e)return D();if(l||!1!==l&&-1===e.indexOf(t)){for(var x=e.split(r),C=0;C<x.length;C++){if(O=x[C],c+=O.length,C!==x.length-1)c+=r.length;else if(d)return D();if(!a||O.substring(0,y)!==a){if(b){if(v=[],N(O.split(n)),P(),p)return D()}else N(O.split(n));if(o&&o<=C)return v=v.slice(0,o),D(!0)}}return D()}for(var E=e.indexOf(n,c),S=e.indexOf(r,c),T=new RegExp(h(u)+h(t),"g"),k=e.indexOf(t,c);;)if(e[c]!==t)if(a&&0===O.length&&e.substring(c,c+y)===a){if(-1===S)return D();c=S+g,S=e.indexOf(r,c),E=e.indexOf(n,c)}else{if(-1!==E&&(E<S||-1===S)){if(!(E<k)){O.push(e.substring(c,E)),c=E+m,E=e.indexOf(n,c);continue}var A=z(E,k,S);if(A&&void 0!==A.nextDelim){E=A.nextDelim,k=A.quoteSearch,O.push(e.substring(c,E)),c=E+m,E=e.indexOf(n,c);continue}}if(-1===S)break;if(O.push(e.substring(c,S)),F(S+g),b&&(P(),p))return D();if(o&&v.length>=o)return D(!0)}else for(k=c,c++;;){if(-1===(k=e.indexOf(t,k+1)))return d||w.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:v.length,index:c}),I();if(k===f-1)return I(e.substring(c,k).replace(T,t));if(t!==u||e[k+1]!==u){if(t===u||0===k||e[k-1]!==u){-1!==E&&E<k+1&&(E=e.indexOf(n,k+1)),-1!==S&&S<k+1&&(S=e.indexOf(r,k+1));var R=L(-1===S?E:Math.min(E,S));if(e[k+1+R]===n){O.push(e.substring(c,k).replace(T,t)),e[c=k+1+R+m]!==t&&(k=e.indexOf(t,c)),E=e.indexOf(n,c),S=e.indexOf(r,c);break}var q=L(S);if(e.substring(k+1+q,k+1+q+g)===r){if(O.push(e.substring(c,k).replace(T,t)),F(k+1+q+g),E=e.indexOf(n,c),k=e.indexOf(t,c),b&&(P(),p))return D();if(o&&v.length>=o)return D(!0);break}w.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:v.length,index:c}),k++}}else k++}return I();function N(e){v.push(e),j=c}function L(t){var n=0;if(-1!==t){var r=e.substring(k+1,t);r&&""===r.trim()&&(n=r.length)}return n}function I(t){return d||(void 0===t&&(t=e.substring(c)),O.push(t),c=f,N(O),b&&P()),D()}function F(t){c=t,N(O),O=[],S=e.indexOf(r,c)}function D(e){return{data:v,errors:w,meta:{delimiter:n,linebreak:r,aborted:p,truncated:!!e,cursor:j+(s||0)}}}function P(){i(D()),v=[],w=[]}function z(r,a,i){var s={nextDelim:void 0,quoteSearch:void 0},o=e.indexOf(t,a+1);if(a<r&&r<o&&(o<i||-1===i)){var l=e.indexOf(n,o);if(-1===l)return s;o<l&&(o=e.indexOf(t,o+1)),s=z(l,o,i)}else s={nextDelim:r,quoteSearch:a};return s}},this.abort=function(){p=!0},this.getCharIndex=function(){return c}}function g(e){var t=e.data,n=a[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var i={abort:function(){r=!0,y(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(_(n.userStep)){for(var s=0;s<t.results.data.length&&(n.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},i),!r);s++);delete t.results}else _(n.userChunk)&&(n.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!r&&y(t.workerId,t.results)}function y(e,t){var n=a[e];_(n.userComplete)&&n.userComplete(t),n.terminate(),delete a[e]}function b(){throw new Error("Not implemented.")}function v(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=v(e[n]);return t}function w(e,t){return function(){e.apply(t,arguments)}}function _(e){return"function"==typeof e}return r&&(t.onmessage=function(e){var n=e.data;if(void 0===s.WORKER_ID&&n&&(s.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:s.WORKER_ID,results:s.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var r=s.parse(n.input,n.config);r&&t.postMessage({workerId:s.WORKER_ID,results:r,finished:!0})}}),(u.prototype=Object.create(l.prototype)).constructor=u,(c.prototype=Object.create(l.prototype)).constructor=c,(p.prototype=Object.create(p.prototype)).constructor=p,(d.prototype=Object.create(l.prototype)).constructor=d,s})?r.apply(t,a):r)||(e.exports=i)},209:function(e,t,n){e.exports=n(16)(114)},210:function(e,t,n){e.exports=n(16)(2381)},211:function(e,t,n){e.exports=n(16)(1069)},212:function(e,t,n){e.exports=n(16)(2388)},213:function(e,t,n){e.exports=n(16)(2386)},214:function(e,t,n){e.exports=n(16)(2398)},378:function(e,t,n){"use strict";n.r(t),n.d(t,"CanvasSrcPlugin",(function(){return plugin_CanvasSrcPlugin}));var r={};n.r(r),n.d(r,"buildNode",(function(){return re})),n.d(r,"toElasticsearchQuery",(function(){return ae}));var a={};n.r(a),n.d(a,"wildcardSymbol",(function(){return ie})),n.d(a,"buildNode",(function(){return le})),n.d(a,"test",(function(){return ue})),n.d(a,"toElasticsearchQuery",(function(){return ce})),n.d(a,"toQueryStringQuery",(function(){return pe})),n.d(a,"hasLeadingWildcard",(function(){return de}));var i={};n.r(i),n.d(i,"buildNodeParams",(function(){return ve})),n.d(i,"toElasticsearchQuery",(function(){return we}));var s={};n.r(s),n.d(s,"buildNodeParams",(function(){return _e})),n.d(s,"toElasticsearchQuery",(function(){return Oe}));var o={};n.r(o),n.d(o,"buildNodeParams",(function(){return je})),n.d(o,"toElasticsearchQuery",(function(){return xe}));var l={};n.r(l),n.d(l,"buildNodeParams",(function(){return Ce})),n.d(l,"toElasticsearchQuery",(function(){return Ee}));var u={};n.r(u),n.d(u,"buildNodeParams",(function(){return ke})),n.d(u,"toElasticsearchQuery",(function(){return Ae}));var c={};n.r(c),n.d(c,"buildNodeParams",(function(){return qe})),n.d(c,"toElasticsearchQuery",(function(){return Ne}));var p={};n.r(p),n.d(p,"buildNodeParams",(function(){return Le})),n.d(p,"toElasticsearchQuery",(function(){return Ie}));var d={};n.r(d),n.d(d,"buildNodeParams",(function(){return Fe})),n.d(d,"toElasticsearchQuery",(function(){return De}));var f={};n.r(f),n.d(f,"buildNodeParams",(function(){return Pe})),n.d(f,"toElasticsearchQuery",(function(){return ze}));var h={};n.r(h),n.d(h,"buildNode",(function(){return Ue})),n.d(h,"buildNodeWithArgumentNodes",(function(){return $e})),n.d(h,"toElasticsearchQuery",(function(){return Qe}));var m={};n.r(m),n.d(m,"buildNode",(function(){return Be})),n.d(m,"toElasticsearchQuery",(function(){return He}));var g=n(7),y=n.n(g),b=n(54);var v=n(65);var w=n(25),_=n.n(w);var O=n(140),j=n(34);var x=n(201),C=n.n(x);var E=n(3),S=n(26);var T=n(45),k=n.n(T);var A=n(103);function R(e){return Object(g.uniqWith)(e.flat(),(({name:e},{name:t})=>e===t))}function q(e){const t=Object(b.s)().ply,[n]=e,r=n.rows.length;e.forEach((e=>{if(e.rows.length!==r)throw t.rowCountMismatch()}));const a=Object(g.map)(e,"rows"),i=[];for(let e=0;e<r;e++){const t=Object(g.map)(a,e);i.push(Object.assign({},...t))}return{type:"datatable",rows:i,columns:R(Object(g.map)(e,"columns"))}}var N=n(0);const L="seriesStyle";var I=n(59);var F=n(209),D=n.n(F);const P=[function(){const{help:e,args:t}=Object(b.t)().all;return{name:"all",type:"boolean",help:e,inputTypes:["null"],args:{condition:{aliases:["_"],types:["boolean"],help:t.condition,required:!0,multi:!0}},fn:(e,t)=>(t.condition||[]).every(Boolean)}},function(){const{help:e,args:t}=Object(b.t)().alterColumn,n=Object(b.s)().alterColumn;return{name:"alterColumn",type:"datatable",inputTypes:["datatable"],help:e,args:{column:{aliases:["_"],types:["string"],required:!0,help:t.column},name:{types:["string"],help:t.name},type:{types:["string"],help:t.type,options:["null","boolean","number","string","date"]}},fn:(e,t)=>{if(!t.column||!t.type&&!t.name)return e;const r=e.columns.find((e=>e.name===t.column));if(!r)throw n.columnNotFound(t.column);const a=t.name||r.name,i=t.type||r.meta.type,s=e.columns.reduce(((e,n)=>(n.name!==t.name&&(n.name!==r.name?e.push(n):e.push({id:a,name:a,meta:{type:i}})),e)),[]);let o=e=>e;t.type&&(o=function(){switch(i){case"string":return"date"===r.meta.type?e=>new Date(e).toISOString():String;case"number":return Number;case"date":return e=>new Date(e).valueOf();case"boolean":return Boolean;case"null":return()=>null;default:throw n.cannotConvertType(i)}}());return{type:"datatable",columns:s,rows:e.rows.map((e=>({...Object(g.omit)(e,r.name),[a]:o(e[r.name])})))}}}},function(){const{help:e,args:t}=Object(b.t)().any;return{name:"any",type:"boolean",inputTypes:["null"],help:e,args:{condition:{aliases:["_"],types:["boolean"],required:!0,multi:!0,help:t.condition}},fn:(e,t)=>(t.condition||[]).some(Boolean)}},function(){const{help:e,args:t}=Object(b.t)().as;return{name:"as",type:"datatable",inputTypes:["string","boolean","number","null"],help:e,args:{name:{types:["string"],aliases:["_"],help:t.name,default:"value"}},fn:(e,t)=>({type:"datatable",columns:[{id:t.name,name:t.name,meta:{type:Object(v.getType)(e)}}],rows:[{[t.name]:e}]})}},function(){const{help:e,args:t}=Object(b.t)().axisConfig,n=Object(b.s)().axisConfig;return{name:"axisConfig",aliases:[],type:"axisConfig",inputTypes:["null"],help:e,args:{max:{types:["number","string","null"],help:t.max},min:{types:["number","string","null"],help:t.min},position:{types:["string"],help:t.position,options:Object.values(v.Position),default:"left"},show:{types:["boolean"],help:t.show,default:!0},tickSize:{types:["number","null"],help:t.tickSize}},fn:(e,t)=>{const{position:r,min:a,max:i,...s}=t;if(!Object.values(v.Position).includes(r))throw n.invalidPosition(r);const o="string"==typeof a?_.a.utc(a).valueOf():a,l="string"==typeof i?_.a.utc(i).valueOf():i;if(null!=o&&isNaN(o))throw n.invalidMinDateString(a);if(null!=l&&isNaN(l))throw n.invalidMaxDateString(i);return{max:l,min:o,type:"axisConfig",position:r,...s}}}},function(){const{help:e}=Object(b.t)().clear;return{name:"clear",type:"null",inputTypes:["null"],help:e,args:{},fn:()=>null}},function(){const{help:e,args:t}=Object(b.t)().columns;return{name:"columns",type:"datatable",inputTypes:["datatable"],help:e,args:{include:{aliases:["_"],types:["string"],help:t.include},exclude:{types:["string"],help:t.exclude}},fn:(e,t)=>{const{include:n,exclude:r}=t,{columns:a,rows:i,...s}=e;let o={...e};if(r){const e=r.split(",").map((e=>e.trim())),t=a.filter((t=>!e.includes(t.name))),n=t.length>0?i.map((t=>Object(g.omit)(t,e))):[];o={rows:n,columns:t,...s}}if(n){const e=n.split(",").map((e=>e.trim())),t=[];e.forEach((e=>{const n=Object(g.find)(o.columns,{name:e});n&&t.push(n)}));const r=t.length>0?o.rows.map((t=>Object(g.pick)(t,e))):[];o={rows:r,columns:t,...s}}return o}}},O.b,function(){const{help:e,args:t}=Object(b.t)().containerStyle,n=Object(b.s)().containerStyle;return{name:"containerStyle",aliases:[],type:"containerStyle",inputTypes:["null"],help:e,args:{backgroundColor:{types:["string"],help:t.backgroundColor},backgroundImage:{types:["string"],help:t.backgroundImage},backgroundRepeat:{types:["string"],help:t.backgroundRepeat,default:"no-repeat",options:Object.values(v.BackgroundRepeat)},backgroundSize:{types:["string"],help:t.backgroundSize,default:"contain",options:Object.values(v.BackgroundSize)},border:{types:["string"],help:t.border},borderRadius:{types:["string"],help:t.borderRadius},opacity:{types:["number"],help:t.opacity},overflow:{types:["string"],help:t.overflow,options:Object.values(v.Overflow),default:"hidden"},padding:{types:["string"],help:t.padding}},fn:(e,t)=>{const{backgroundImage:r,backgroundSize:a,backgroundRepeat:i,...s}=t,o={type:"containerStyle",...s};if(r){if(!Object(j.isValidUrl)(r))throw n.invalidBackgroundImage();o.backgroundImage=`url(${r})`,o.backgroundSize=a,o.backgroundRepeat=i}return JSON.parse(JSON.stringify(o))}}},function(){const{help:e}=Object(b.t)().context;return{name:"context",help:e,args:{},fn:e=>e}},function(){const{help:e,args:t}=Object(b.t)().csv,n=Object(b.s)().csv;return{name:"csv",type:"datatable",inputTypes:["null"],help:e,args:{data:{aliases:["_"],types:["string"],required:!0,help:t.data},delimiter:{types:["string"],help:t.delimiter},newline:{types:["string"],help:t.newline}},fn(e,t){const{data:r,delimiter:a,newline:i}=t,s={transform:e=>e.indexOf('"')>=0?e.trim().replace(/(^\"|\"$)/g,""):e};null!=a&&(s.delimiter=a),null!=i&&(s.newline=i);const o=C.a.parse(r,s),{data:l,errors:u}=o;if(u.length>0)throw n.invalidInputCSV();return l.reduce(((e,t,n)=>{if(0===n)t.forEach((t=>e.columns.push({id:t.trim(),name:t.trim(),meta:{type:"string"}})));else{const n=t.reduce(((t,n,r)=>(t[e.columns[r].name]=n,t)),{});e.rows.push(n)}return e}),{type:"datatable",columns:[],rows:[]})}}},function(){const{help:e,args:t}=Object(b.t)().date,n=Object(b.s)().date;return{name:"date",type:"number",help:e,inputTypes:["null"],args:{value:{aliases:["_"],types:["string"],help:t.value},format:{types:["string"],help:t.format}},fn:(e,t)=>{const{value:r,format:a}=t,i=r&&a?_.a.utc(r,a).toDate():r?new Date(r):new Date;if(isNaN(i.getTime()))throw n.invalidDateInput(r);return i.valueOf()}}},function(){const{help:e,args:t}=Object(b.t)().do;return{name:"do",help:e,args:{fn:{aliases:["_","exp","expression","function"],multi:!0,help:t.fn}},fn:e=>e}},function(){const{help:e,args:t}=Object(b.t)().dropdownControl;return{name:"dropdownControl",aliases:[],type:"render",inputTypes:["datatable"],help:e,args:{filterColumn:{types:["string"],required:!0,help:t.filterColumn},labelColumn:{types:["string"],required:!1,help:t.labelColumn},valueColumn:{types:["string"],required:!0,help:t.valueColumn},filterGroup:{types:["string"],help:t.filterGroup}},fn:(e,{valueColumn:t,filterColumn:n,filterGroup:r,labelColumn:a})=>{let i=[];const s=a||t,o=e.rows.filter((e=>null!==e[t]&&void 0!==e[t]));o.length>0&&(i=o.map((e=>[e[t],e[s]])),i=Object(g.uniqBy)(i,(e=>e[0])));return{type:"render",as:"dropdown_filter",value:{column:n||t,choices:i,filterGroup:r}}}}},function(){const{help:e,args:t}=Object(b.t)().eq;return{name:"eq",type:"boolean",inputTypes:["boolean","number","string","null"],help:e,args:{value:{aliases:["_"],types:["boolean","number","string","null"],required:!0,help:t.value}},fn:(e,t)=>e===t.value}},function(){const{help:e,args:t}=Object(b.t)().exactly;return{name:"exactly",aliases:[],type:"filter",help:e,inputTypes:["filter"],args:{column:{types:["string"],aliases:["field","c"],required:!0,help:t.column},value:{types:["string"],aliases:["v","val"],required:!0,help:t.value},filterGroup:{types:["string"],help:t.filterGroup}},fn:(e,t)=>{const{value:n,column:r}=t,a={type:"filter",filterType:"exactly",value:n,column:r,and:[]};return{...e,and:[...e.and,a]}}}},function(){const{help:e,args:t}=Object(b.t)().filterrows;return{name:"filterrows",aliases:[],type:"datatable",inputTypes:["datatable"],help:e,args:{fn:{resolve:!1,aliases:["_","exp","expression","function"],types:["boolean"],required:!0,help:t.fn}},fn:(e,{fn:t})=>Object(E.defer)((()=>Object(E.combineLatest)(e.rows.map((n=>t({...e,rows:[n]})))))).pipe(Object(S.map)((t=>e.rows.filter(((e,n)=>t[n])))),Object(S.map)((t=>({...e,rows:t}))))}},function(){const{help:e,args:t}=Object(b.t)().formatdate;return{name:"formatdate",type:"string",inputTypes:["number","string"],help:e,args:{format:{aliases:["_"],types:["string"],required:!0,help:t.format}},fn:(e,t)=>t.format?_.a.utc(new Date(e)).format(t.format):_.a.utc(new Date(e)).toISOString()}},function(){const{help:e,args:t}=Object(b.t)().formatnumber;return{name:"formatnumber",type:"string",help:e,inputTypes:["number"],args:{format:{aliases:["_"],types:["string"],help:t.format,required:!0}},fn:(e,t)=>t.format?k()(e).format(t.format):String(e)}},function(){const{help:e,args:t}=Object(b.t)().getCell,n=Object(b.s)().getCell;return{name:"getCell",help:e,inputTypes:["datatable"],args:{column:{types:["string"],aliases:["_","c"],help:t.column},row:{types:["number"],aliases:["r"],help:t.row,default:0}},fn:(e,t)=>{const r=e.rows[t.row];if(!r)throw n.rowNotFound(t.row);const{column:a=e.columns[0].name}=t,i=r[a];if(void 0===i)throw n.columnNotFound(a);return i}}},function(){const{help:e,args:t}=Object(b.t)().gt;return{name:"gt",type:"boolean",inputTypes:["number","string"],help:e,args:{value:{aliases:["_"],types:["number","string"],required:!0,help:t.value}},fn:(e,t)=>{const{value:n}=t;return typeof e==typeof n&&e>n}}},function(){const{help:e,args:t}=Object(b.t)().gte;return{name:"gte",type:"boolean",inputTypes:["number","string"],help:e,args:{value:{aliases:["_"],types:["number","string"],required:!0,help:t.value}},fn:(e,t)=>{const{value:n}=t;return typeof e==typeof n&&e>=n}}},function(){const{help:e,args:t}=Object(b.t)().head;return{name:"head",aliases:[],type:"datatable",inputTypes:["datatable"],help:e,args:{count:{aliases:["_"],types:["number"],help:t.count,default:1}},fn:(e,t)=>({...e,rows:Object(g.take)(e.rows,t.count)})}},function(){const{help:e,args:t}=Object(b.t)().if;return{name:"if",help:e,args:{condition:{types:["boolean"],aliases:["_"],help:t.condition,required:!0},then:{resolve:!1,help:t.then},else:{resolve:!1,help:t.else}},fn:(e,t)=>Object(E.defer)((()=>{var n,r,a;return null!==(n=t.condition?null===(r=t.then)||void 0===r?void 0:r.call(t):null===(a=t.else)||void 0===a?void 0:a.call(t))&&void 0!==n?n:Object(E.of)(e)}))}},function(){const{help:e,args:t}=Object(b.t)().lt;return{name:"lt",type:"boolean",inputTypes:["number","string"],help:e,args:{value:{aliases:["_"],types:["number","string"],required:!0,help:t.value}},fn:(e,t)=>{const{value:n}=t;return typeof e==typeof n&&e<n}}},function(){const{help:e,args:t}=Object(b.t)().lte;return{name:"lte",type:"boolean",inputTypes:["number","string"],help:e,args:{value:{aliases:["_"],types:["number","string"],required:!0,help:t.value}},fn:(e,t)=>{const{value:n}=t;return typeof e==typeof n&&e<=n}}},function(){const{help:e,args:t}=Object(b.t)().joinRows,n=Object(b.s)().joinRows;return{name:"joinRows",type:"string",help:e,inputTypes:["datatable"],args:{column:{aliases:["_"],types:["string"],required:!0,help:t.column},distinct:{types:["boolean"],help:t.distinct,default:!0},quote:{types:["string"],help:t.quote,default:'"\'"'},separator:{aliases:["sep","delimiter"],types:["string"],help:t.separator,default:","}},fn:(e,{column:t,separator:r,quote:a,distinct:i})=>{if(!e.columns.find((e=>e.name===t)))throw n.columnNotFound(t);return e.rows.reduce(((e,n)=>{const r=n[t];return i&&e.includes(r)?e:e.concat(r)}),[]).map((e=>`${a}${((e,t)=>{if(void 0===t||""===t)return e;{const n=new RegExp(t,"g");return e.replace(/\\/g,"\\\\").replace(n,`\\${t}`)}})(e,a)}${a}`)).join(r)}}},function(){const{help:e,args:t}=Object(A.b)().mapCenter;return{name:"mapCenter",help:e,type:"mapCenter",inputTypes:["null"],args:{lat:{types:["number"],required:!0,help:t.lat},lon:{types:["number"],required:!0,help:t.lon},zoom:{types:["number"],required:!0,help:t.zoom}},fn:(e,t)=>({type:"mapCenter",...t})}},function(){const{help:e,args:t}=Object(b.t)().neq;return{name:"neq",type:"boolean",help:e,context:{types:["boolean","number","string","null"]},args:{value:{aliases:["_"],types:["boolean","number","string","null"],required:!0,help:t.value}},fn:(e,t)=>e!==t.value}},function(){const{help:e,args:t}=Object(b.t)().ply,n=Object(b.s)().ply;return{name:"ply",type:"datatable",inputTypes:["datatable"],help:e,args:{by:{types:["string"],help:t.by,multi:!0},expression:{types:["datatable"],resolve:!1,multi:!0,aliases:["exp","fn","function"],help:t.expression}},fn(e,t){var r,a;if(!t)return e;const i=null!==(r=null===(a=t.by)||void 0===a?void 0:a.map((t=>{const r=e.columns.find((({name:e})=>e===t));if(!r)throw n.columnNotFound(t);return r})))&&void 0!==r?r:[],s=t.by?Object.values(Object(g.groupBy)(e.rows,(e=>JSON.stringify(Object(g.pick)(e,t.by))))).map((t=>({...e,rows:t}))):[e],o=s.map((e=>{var n,r;return Object(E.combineLatest)(null!==(n=null===(r=t.expression)||void 0===r?void 0:r.map((t=>Object(E.defer)((()=>t(e))))))&&void 0!==n?n:[Object(E.of)(e)]).pipe(Object(S.map)(q))}));return(o.length?Object(E.combineLatest)(o):Object(E.of)([])).pipe(Object(S.map)((e=>{const n=R([i].concat(Object(g.map)(e,"columns")));return{type:"datatable",rows:Object(g.flatten)(e.map(((e,n)=>e.rows.map((e=>({...Object(g.pick)(s[n].rows[0],t.by),...e})))))),columns:n}})))}}},function(){const{help:e,args:t}=Object(b.t)().render;return{name:"render",aliases:[],type:"render",inputTypes:["render"],help:e,args:{as:{types:["string"],help:t.as,options:["advanced_filter","debug","dropdown_filter","error","image","markdown","metric","pie","plot","progress","repeatImage","shape","table","time_filter","text"]},css:{types:["string"],help:t.css,default:`"${N.q}"`},containerStyle:{types:["containerStyle"],help:t.containerStyle,default:"{containerStyle}"}},fn:(e,t)=>({...e,as:t.as||e.as,css:t.css||N.q,containerStyle:t.containerStyle})}},function(){const{help:e,args:t}=Object(b.t)().replace;return{name:"replace",type:"string",help:e,inputTypes:["string"],args:{pattern:{aliases:["_","regex"],types:["string"],help:t.pattern},flags:{aliases:["modifiers"],types:["string"],help:t.flags,default:"g"},replacement:{types:["string"],help:t.replacement,default:'""'}},fn:(e,t)=>e.replace(new RegExp(t.pattern,t.flags),t.replacement)}},function(){const{help:e,args:t}=Object(b.t)().rounddate;return{name:"rounddate",type:"number",help:e,inputTypes:["number"],args:{format:{aliases:["_"],types:["string"],help:t.format}},fn:(e,t)=>t.format?_.a.utc(_.a.utc(e).format(t.format),t.format).valueOf():e}},function(){const{help:e}=Object(b.t)().rowCount;return{name:"rowCount",aliases:[],type:"number",inputTypes:["datatable"],help:e,args:{},fn:e=>e.rows.length}},function(){const{help:e,args:t}=Object(b.t)().seriesStyle;return{name:L,help:e,type:"seriesStyle",inputTypes:["null"],args:{bars:{types:["number"],help:t.bars},color:{types:["string"],help:t.color},fill:{types:["number","boolean"],help:t.fill,default:!1,options:[!0,!1]},horizontalBars:{types:["boolean"],help:t.horizontalBars,options:[!0,!1]},label:{types:["string"],help:t.label},lines:{types:["number"],help:t.lines},points:{types:["number"],help:t.points},stack:{types:["number","null"],help:t.stack}},fn:(e,t)=>({type:L,...t})}},function(){const{help:e,args:t}=Object(b.t)().sort;return{name:"sort",type:"datatable",inputTypes:["datatable"],help:e,args:{by:{types:["string"],aliases:["_","column"],multi:!1,help:t.by},reverse:{types:["boolean"],help:t.reverse,options:[!0,!1],default:!1}},fn:(e,t)=>{const n=t.by||e.columns[0].name;return{...e,rows:t.reverse?Object(g.sortBy)(e.rows,n).reverse():Object(g.sortBy)(e.rows,n)}}}},function(){const{help:e,args:t}=Object(b.t)().staticColumn;return{name:"staticColumn",type:"datatable",inputTypes:["datatable"],help:e,args:{name:{types:["string"],aliases:["_","column"],help:t.name,required:!0},value:{types:["string","number","boolean","null"],help:t.value,default:null}},fn:(e,t)=>{const n=e.rows.map((e=>({...e,[t.name]:t.value}))),r=Object(I.getType)(t.value),a=[...e.columns],i=a.findIndex((({name:e})=>e===t.name)),s={id:t.name,name:t.name,meta:{type:r}};return i>-1?a[i]=s:a.push(s),{type:"datatable",columns:a,rows:n}}}},function(){const{help:e,args:t}=Object(b.t)().string;return{name:"string",inputTypes:["null"],aliases:[],type:"string",help:e,args:{value:{aliases:["_"],types:["string","number","boolean"],multi:!0,help:t.value}},fn:(e,t)=>t.value.join("")}},function(){const{help:e,args:t}=Object(b.t)().table;return{name:"table",aliases:[],type:"render",inputTypes:["datatable"],help:e,args:{font:{types:["style"],default:"{font}",help:t.font},paginate:{types:["boolean"],default:!0,help:t.paginate,options:[!0,!1]},perPage:{types:["number"],default:10,help:t.perPage},showHeader:{types:["boolean"],default:!0,help:t.showHeader,options:[!0,!1]}},fn:(e,t)=>({type:"render",as:"table",value:{datatable:e,...t}})}},function(){const{help:e,args:t}=Object(b.t)().tail;return{name:"tail",aliases:[],type:"datatable",inputTypes:["datatable"],help:e,args:{count:{aliases:["_"],types:["number"],help:t.count,default:1}},fn:(e,t)=>({...e,rows:Object(g.takeRight)(e.rows,t.count)})}},function(){const{help:e,args:t}=Object(b.t)().timefilter,n=Object(b.s)().timefilter;return{name:"timefilter",aliases:[],type:"filter",inputTypes:["filter"],help:e,args:{column:{types:["string"],aliases:["field","c"],default:"@timestamp",help:t.column},from:{types:["string"],aliases:["f","start"],help:t.from},to:{types:["string"],aliases:["t","end"],help:t.to},filterGroup:{types:["string"],help:"The group name for the filter"}},fn:(e,t)=>{if(!t.from&&!t.to)return e;const{from:r,to:a,column:i}=t,s={type:"filter",filterType:"time",column:i,and:[]};function o(e,{roundUp:t}){const r=D.a.parse(e,{roundUp:t});if(!r||!r.isValid())throw n.invalidString(e);return r.toISOString()}return a&&(s.to=o(a,{roundUp:!0})),r&&(s.from=o(r,{roundUp:!1})),{...e,and:[...e.and,s]}}}},function(){const{help:e,args:t}=Object(b.t)().timefilterControl;return{name:"timefilterControl",aliases:[],type:"render",inputTypes:["null"],help:e,args:{column:{types:["string"],aliases:["field","c"],help:t.column,default:"@timestamp"},compact:{types:["boolean"],help:t.compact,default:!0,options:[!0,!1]},filterGroup:{types:["string"],help:t.filterGroup}},fn:(e,t)=>({type:"render",as:"time_filter",value:t})}},function(){const{help:e,args:t}=Object(A.b)().timerange;return{name:"timerange",help:e,type:"timerange",inputTypes:["null"],args:{from:{types:["string"],required:!0,help:t.from},to:{types:["string"],required:!0,help:t.to}},fn:(e,t)=>({type:"timerange",...t})}},function(){const{help:e,args:t}=Object(b.t)().switch;return{name:"switch",help:e,args:{case:{types:["case"],aliases:["_"],resolve:!1,multi:!0,required:!0,help:t.case},default:{aliases:["finally"],resolve:!1,help:t.default}},fn:(e,t)=>Object(E.combineLatest)(t.case.map((e=>Object(E.defer)((()=>e()))))).pipe(Object(S.concatMap)((n=>{var r,a;const i=n.find((({matches:e})=>e)),s=i&&Object(E.of)(i.result);return null!==(r=null!=s?s:null===(a=t.default)||void 0===a?void 0:a.call(t))&&void 0!==r?r:Object(E.of)(e)})))}},function(){const{help:e,args:t}=Object(b.t)().case;return{name:"case",type:"case",help:e,args:{when:{aliases:["_"],resolve:!1,help:t.when},if:{types:["boolean"],help:t.if},then:{resolve:!1,required:!0,help:t.then}},fn:(e,{if:t,then:n,when:r})=>Object(E.defer)((()=>{var n;const a=null===(n=null!=t?t:null==r?void 0:r().pipe(Object(S.map)((t=>t===e))))||void 0===n||n;return Object(E.isObservable)(a)?a:Object(E.of)(a)})).pipe(Object(S.concatMap)((e=>(e?n():Object(E.of)(null)).pipe(Object(S.map)((t=>({matches:e,result:t,type:"case"})))))))}}];var z,M,U=n(2),$=n.n(U),Q=n(66),B=n.n(Q),H=(n(142),function(e,t){if("boolean"!=typeof t&&"boolean"===e.type){if([1,"true"].includes(t))return!0;if([0,"false"].includes(t))return!1;throw new Error("".concat(t," is not a valid boolean value for boolean field ").concat(e.name))}return"number"!=typeof t&&"number"===e.type?Number(t):t}),G=function(e,t){var n=H(e,t);return{script:{source:W(e),lang:e.lang,params:{value:n}}}},W=function(e){return"painless"===e.lang?"boolean compare(Supplier s, def v) {return s.get() == v;}"+"compare(() -> { ".concat(e.script," }, params.value);"):"(".concat(e.script,") == value")};!function(e){e.CUSTOM="custom",e.PHRASES="phrases",e.PHRASE="phrase",e.EXISTS="exists",e.MATCH_ALL="match_all",e.QUERY_STRING="query_string",e.RANGE="range",e.RANGE_FROM_VALUE="range_from_value",e.SPATIAL_FILTER="spatial_filter"}(z||(z={})),function(e){e.APP_STATE="appState",e.GLOBAL_STATE="globalState"}(M||(M={}));var V={gt:">",gte:">=",lte:"<=",lt:"<"},K={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"},J={gt:"boolean gt(Supplier s, def v) {return s.get().toInstant().isAfter(Instant.parse(v))}",gte:"boolean gte(Supplier s, def v) {return !s.get().toInstant().isBefore(Instant.parse(v))}",lte:"boolean lte(Supplier s, def v) {return !s.get().toInstant().isAfter(Instant.parse(v))}",lt:"boolean lt(Supplier s, def v) {return s.get().toInstant().isBefore(Instant.parse(v))}"},Y=function(e,t){var n=Object(g.mapValues)(Object(g.pickBy)(t,(function(e,t){return t in V})),(function(t){return"number"===e.type&&"string"==typeof t?parseFloat(t):t})),r=Object(g.map)(n,(function(t,n){return"("+e.script+")"+Object(g.get)(V,n)+n})).join(" && ");if("painless"===e.lang){var a="date"===e.type?J:K,i=Object(g.reduce)(n,(function(e,t,n){return e.concat(Object(g.get)(a,n))}),[]).join(" "),s=Object(g.map)(n,(function(t,n){return"".concat(n,"(() -> { ").concat(e.script," }, params.").concat(n,")")})).join(" && ");r="".concat(i).concat(s)}return{script:{source:r,params:n,lang:e.lang}}};var Z=function(e,t,n){return{query:e,meta:{index:t,alias:n}}};var X=n(79),ee=n.n(X),te=n(91),ne=n.n(te);function re(e){return{type:"literal",value:e}}function ae(e){return e.value}var ie="@kuery-wildcard@";function se(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function oe(e){return e.replace(/[+-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function le(e){return e.includes(ie)?{type:"wildcard",value:e}:lt(e)}function ue(e,t){var n=e.value.split(ie).map(se).join("[\\s\\S]*");return new RegExp("^".concat(n,"$")).test(t)}function ce(e){return e.value.split(ie).join("*")}function pe(e){return e.value.split(ie).map(oe).join("*")}function de(e){var t=e.value;return t.startsWith(ie)&&t.replace(ie,"").length>0}function fe(e,t){if(!t)return[];if("literal"===e.type){var n=ae(e),r=t.fields.find((function(e){return e.name===n}));return r?[r]:[]}return"wildcard"===e.type?t.fields.filter((function(t){return ue(e,t.name)})):void 0}var he=n(35),me=n.n(he);function ge(e){var t=me.a.tz.guess();return"Browser"===e?t:e}function ye(e){return function(e){var t,n=null==e?void 0:e.subType;return!(null==n||null===(t=n.nested)||void 0===t||!t.path)}(e)?e.subType:void 0}function be(e,t,n){var r=B()(B()({},e),{},{value:n?"".concat(n,".").concat(e.value):e.value});if(!t||"wildcard"===r.type&&!n)return r;var a=fe(r,t).reduce((function(e,t){var r=ye(t),a=null==r?void 0:r.nested.path;return n&&!a?[].concat(ee()(e),["".concat(t.name,' is not a nested field but is in nested group "').concat(n,'" in the KQL expression.')]):a&&!n?[].concat(ee()(e),["".concat(t.name," is a nested field, but is not in a nested group in the KQL expression.")]):a!==n?[].concat(ee()(e),["Nested field ".concat(t.name," is being queried with the incorrect nested path. The correct path is ").concat(null==r?void 0:r.nested.path,".")]):e}),[]);if(a.length>0)throw new Error(a.join("\n"));return r}function ve(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(g.isUndefined)(e))throw new Error("fieldName is a required argument");if(Object(g.isUndefined)(t))throw new Error("value is a required argument");var r="string"==typeof e?lt(e):re(e),a="string"==typeof t?lt(t):re(t),i=re(n);return{arguments:[r,a,i]}}function we(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=ne()(e.arguments,3),i=a[0],s=a[1],o=a[2],l="wildcard"===s.type&&s.value===ie,u="wildcard"===i.type&&i.value===ie,c=l&&u;if(c)return{match_all:{}};var p=be(i,t,null!=r&&r.nested?r.nested.path:void 0),d=Object(g.isUndefined)(s)?s:ut(s),f=o.value?"phrase":"best_fields";if(null===p.value)return"wildcard"===s.type?{query_string:{query:pe(s)}}:{multi_match:{type:f,query:d,lenient:!0}};var h=t?fe(p,t):[];if(h&&0===h.length&&h.push({name:ut(p),scripted:!1,type:""}),l&&(null==h||!h.length||(null==h?void 0:h.length)===(null==t?void 0:t.fields.length)))return{match_all:{}};var m=h.reduce((function(e,t){var a=function(e){var n=ye(t);return"wildcard"!==p.type||null==n||!n.nested||null!=r&&r.nested?e:{nested:{path:n.nested.path,query:e,score_mode:"none"}}};if(!t.scripted){if(l)return[].concat(ee()(e),[a({exists:{field:t.name}})]);if("wildcard"===s.type)return[].concat(ee()(e),[a({query_string:{fields:[t.name],query:pe(s)}})]);if("date"===t.type){var i=n.dateFormatTZ?{time_zone:ge(n.dateFormatTZ)}:{};return[].concat(ee()(e),[a({range:$()({},t.name,B()({gte:d,lte:d},i))})])}var o="phrase"===f?"match_phrase":"match";return[].concat(ee()(e),[a($()({},o,$()({},t.name,d)))])}if(!l)return[].concat(ee()(e),[{script:B()({},G(t,d))}])}),[]);return{bool:{should:m||[],minimum_should_match:1}}}function _e(e){return{arguments:e}}function Oe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=n.filtersInMustClause,i=e.arguments||[],s=a?"must":"filter";return{bool:$()({},s,i.map((function(e){return ut(e,t,n,r)})))}}function je(e){return{arguments:e}}function xe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.arguments||[];return{bool:{should:a.map((function(e){return ut(e,t,n,r)})),minimum_should_match:1}}}function Ce(e){return{arguments:[e]}}function Ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=ne()(e.arguments,1),i=a[0];return{bool:{must_not:ut(i,t,n,r)}}}var Se=n(111),Te=n.n(Se);function ke(e,t){var n=Object(g.pick)(t,"gt","lt","gte","lte","format"),r="string"==typeof e?lt(e):Ge.literal.buildNode(e),a=Object(g.map)(n,(function(e,t){return Ge.namedArg.buildNode(t,e)}));return{arguments:[r].concat(ee()(a))}}function Ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=Te()(e.arguments),i=a[0],s=a.slice(1),o=be(i,t,null!=r&&r.nested?r.nested.path:void 0),l=t?fe(o,t):[],u=Re(s),c=Object(g.mapValues)(u,(function(e){return ut(e)}));l&&0===l.length&&l.push({name:ut(o),scripted:!1,type:""});var p=l.map((function(e){var t=function(t){var n=ye(e);return"wildcard"!==o.type||null==n||!n.nested||r.nested?t:{nested:{path:n.nested.path,query:t,score_mode:"none"}}};if(e.scripted)return{script:Y(e,c)};if("date"===e.type){var a=n.dateFormatTZ?{time_zone:ge(n.dateFormatTZ)}:{};return t({range:$()({},e.name,B()(B()({},c),a))})}return t({range:$()({},e.name,c)})}));return{bool:{should:p,minimum_should_match:1}}}function Re(e){if(e.gt&&e.gte||e.lt&&e.lte)throw new Error("range ends cannot be both inclusive and exclusive");var t=["gte","lte","format"];return e.reduce((function(e,n,r){return"namedArg"===n.type?e[n.name]=n.value:e[t[r]]=n,e}),{})}function qe(e){return{arguments:[re(e)]}}function Ne(e,t){var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=ne()(e.arguments,1),i=a[0],s=B()(B()({},i),{},{value:null!=r&&r.nested?"".concat(r.nested.path,".").concat(i.value):i.value}),o=ae(s),l=null==t||null===(n=t.fields)||void 0===n?void 0:n.find((function(e){return e.name===o}));if(null!=l&&l.scripted)throw new Error("Exists query does not support scripted fields");return{exists:{field:o}}}function Le(e,t){t=y.a.pick(t,"topLeft","bottomRight");var n=Ge.literal.buildNode(e),r=y.a.map(t,(function(e,t){var n="".concat(e.lat,", ").concat(e.lon);return Ge.namedArg.buildNode(t,n)}));return{arguments:[n].concat(ee()(r))}}function Ie(e,t){var n,r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Te()(e.arguments),s=i[0],o=i.slice(1),l=B()(B()({},s),{},{value:null!=a&&a.nested?"".concat(a.nested.path,".").concat(s.value):s.value}),u=Ge.literal.toElasticsearchQuery(l),c=null!==(n=null==t?void 0:t.fields)&&void 0!==n?n:[],p=c.find((function(e){return e.name===u})),d=o.reduce((function(e,t){var n=y.a.snakeCase(t.name);return B()(B()({},e),{},$()({},n,ut(t)))}),{});if(null!=p&&p.scripted)throw new Error("Geo bounding box query does not support scripted fields");return{geo_bounding_box:(r={},$()(r,u,d),$()(r,"ignore_unmapped",!0),r)}}function Fe(e,t){var n=Ge.literal.buildNode(e),r=t.map((function(e){var t="".concat(e.lat,", ").concat(e.lon);return Ge.literal.buildNode(t)}));return{arguments:[n].concat(ee()(r))}}function De(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=Te()(e.arguments),o=s[0],l=s.slice(1),u=B()(B()({},o),{},{value:null!=i&&i.nested?"".concat(i.nested.path,".").concat(o.value):o.value}),c=Ge.literal.toElasticsearchQuery(u),p=null!==(n=null==t?void 0:t.fields)&&void 0!==n?n:[],d=p.find((function(e){return e.name===c})),f={points:l.map((function(e){return ut(e,t,a,i)}))};if(null!=d&&d.scripted)throw new Error("Geo polygon query does not support scripted fields");return{geo_polygon:(r={},$()(r,c,f),$()(r,"ignore_unmapped",!0),r)}}function Pe(e,t){return{arguments:["string"==typeof e?lt(e):re(e),t]}}function ze(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=ne()(e.arguments,2),s=i[0],o=i[1],l=ut(s),u=null!=a&&null!==(n=a.nested)&&void 0!==n&&n.path?"".concat(a.nested.path,".").concat(l):l;return{nested:{path:u,query:ut(o,t,r,B()(B()({},a),{},{nested:{path:u}})),score_mode:"none"}}}var Me={is:i,and:s,or:o,not:l,range:u,exists:c,geoBoundingBox:p,geoPolygon:d,nested:f};function Ue(e){var t=Me[e];if(y.a.isUndefined(t))throw new Error('Unknown function "'.concat(e,'"'));for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return B()({type:"function",function:e},t.buildNodeParams.apply(t,r))}function $e(e,t){if(y.a.isUndefined(Me[e]))throw new Error('Unknown function "'.concat(e,'"'));return{type:"function",function:e,arguments:t}}function Qe(e,t,n,r){return Me[e.function].toElasticsearchQuery(e,t,n,r)}function Be(e,t){return{type:"namedArg",name:e,value:"literal"===y.a.get(t,"type")?t:Ge.literal.buildNode(t)}}function He(e){return ut(e.value)}var Ge={function:h,literal:r,namedArg:m,wildcard:a},We=n(210),Ve=n.n(We),Ke=n(211),Je=n.n(Ke),Ye=n(212),Ze=n.n(Ye),Xe=n(213),et=n.n(Xe),tt=n(214),nt=n.n(tt),rt=n(6),at=rt.i18n.translate("esQuery.kql.errors.endOfInputText",{defaultMessage:"end of input"}),it={fieldName:rt.i18n.translate("esQuery.kql.errors.fieldNameText",{defaultMessage:"field name"}),value:rt.i18n.translate("esQuery.kql.errors.valueText",{defaultMessage:"value"}),literal:rt.i18n.translate("esQuery.kql.errors.literalText",{defaultMessage:"literal"}),whitespace:rt.i18n.translate("esQuery.kql.errors.whitespaceText",{defaultMessage:"whitespace"})},st=(Error,n(143)),ot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:st.parse;if(void 0===e)throw new Error("expression must be a string, got undefined instead");return n(e,B()(B()({},t),{},{helpers:{nodeTypes:Ge}}))},lt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ot(e,B()(B()({},t),{},{startRule:"Literal"}),st.parse)},ut=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!t||!t.type||!Ge[t.type])return e(Ge.function.buildNode("and",[]),n);var i=Ge[t.type];return i.toElasticsearchQuery(t,n,r,a)};var ct=n(199);function pt(e){const t=e.map((e=>({...e,type:e.filterType})));return Object(ct.a)(t).map(Z)}var dt=n(105);const ft=[dt.c],ht={from:"now-15m",to:"now"};const mt={from:"now-15m",to:"now"};const gt={from:"now-15m",to:"now"};const yt=[function(){const{help:e,args:t}=Object(b.t)().savedLens;return{name:"savedLens",help:e,args:{id:{types:["string"],required:!1,help:t.id},timerange:{types:["timerange"],help:t.timerange,required:!1},title:{types:["string"],help:t.title,required:!1},palette:{types:["palette"],help:t.palette,required:!1}},type:dt.a,fn:(e,t)=>{const n=e?e.and:[];return{type:dt.a,input:{id:t.id,filters:pt(n),timeRange:t.timerange||ht,title:null===t.title?void 0:t.title,disableTriggers:!0,palette:t.palette},embeddableType:dt.b.lens,generatedAt:Date.now()}},extract(e){const t="savedLens.id",n=[{name:t,type:"lens",id:e.id[0]}];return{state:{...e,id:[t]},references:n}},inject(e,t){const n=t.find((e=>"savedLens.id"===e.name));return n&&(e.id[0]=n.id),e}}},function(){const{help:e,args:t}=Object(b.t)().savedMap;return{name:"savedMap",help:e,args:{id:{types:["string"],required:!1,help:t.id},center:{types:["mapCenter"],help:t.center,required:!1},hideLayer:{types:["string"],help:t.hideLayer,required:!1,multi:!0},timerange:{types:["timerange"],help:t.timerange,required:!1},title:{types:["string"],help:t.title,required:!1}},type:dt.a,fn:(e,t)=>{const n=e?e.and:[],r=t.center?{lat:t.center.lat,lon:t.center.lon,zoom:t.center.zoom}:void 0;return{type:dt.a,input:{attributes:{title:""},id:t.id,filters:pt(n),timeRange:t.timerange||mt,refreshConfig:{pause:!1,value:0},mapCenter:r,hideFilterActions:!0,title:null===t.title?void 0:t.title,isLayerTOCOpen:!1,hiddenLayers:t.hideLayer||[]},embeddableType:dt.b.map,generatedAt:Date.now()}},extract(e){const t="savedMap.id",n=[{name:t,type:"map",id:e.id[0]}];return{state:{...e,id:[t]},references:n}},inject(e,t){const n=t.find((e=>"savedMap.id"===e.name));return n&&(e.id[0]=n.id),e}}},function(){const{help:e,args:t}=Object(b.t)().savedVisualization;return{name:"savedVisualization",help:e,args:{id:{types:["string"],required:!1,help:t.id},timerange:{types:["timerange"],help:t.timerange,required:!1},colors:{types:["seriesStyle"],help:t.colors,multi:!0,required:!1},hideLegend:{types:["boolean"],help:t.hideLegend,required:!1},title:{types:["string"],help:t.title,required:!1}},type:dt.a,fn:(e,{id:t,timerange:n,colors:r,hideLegend:a,title:i})=>{const s=e?e.and:[],o={};return r&&(o.colors=r.reduce(((e,t)=>(t.label&&t.color&&(e[t.label]=t.color),e)),{})),!0===a&&(o.legendOpen=!1),{type:dt.a,input:{id:t,disableTriggers:!0,timeRange:n?Object(g.omit)(n,"type"):gt,filters:pt(s),vis:o,title:null===i?void 0:i},embeddableType:dt.b.visualization,generatedAt:Date.now()}},extract(e){const t="savedVisualization.id",n=[{name:t,type:"visualization",id:e.id[0]}];return{state:{...e,id:[t]},references:n}},inject(e,t){const n=t.find((e=>"savedVisualization.id"===e.name));return n&&(e.id[0]=n.id),e}}}],bt=()=>{};const vt={exactly:function(e){if(e.filterType!==v.FilterType.exactly)throw new Error("Filter is not an exactly filter");return{term:{[e.column]:{value:e.value}}}},time:function(e){if(e.filterType!==v.FilterType.time||!e.column)throw new Error("column is required for Elasticsearch range filters");return{range:{[e.column]:{gte:e.from,lte:e.to}}}},luceneQueryString:function(e){if(e.filterType!==v.FilterType.luceneQueryString)throw new Error("Filter is not a lucene filter");return{query_string:{query:e.query||"*"}}}};function wt(e){return t=e.map((e=>{try{return function(e){if(!e.filterType||!vt[e.filterType])throw new Error(`Unknown filter type: ${e.filterType}`);try{return vt[e.filterType](e)}catch(t){throw new Error(`Could not create elasticsearch filter from ${e.filterType}`)}}(e)}catch(e){return}})),Array.isArray(t)?t.filter((e=>Boolean(e))):[];var t}var _t=n(57);const Ot=[function(){const{help:e}=Object(b.t)().location;return{name:"location",type:"datatable",inputTypes:["null"],args:{},help:e,fn:()=>new Promise((e=>navigator.geolocation.getCurrentPosition((function(t){const{latitude:n,longitude:r}=t.coords;return e({type:"datatable",columns:[{id:"latitude",name:"latitude",meta:{type:"number"}},{id:"longitude",name:"longitude",meta:{type:"number"}}],rows:[{latitude:n,longitude:r}]})}),bt,{maximumAge:5e3})))}},function(){const{help:e,args:t}=Object(b.t)().markdown;return{name:"markdown",aliases:[],type:"render",help:e,inputTypes:["datatable","null"],args:{content:{aliases:["_","expression"],types:["string"],help:t.content,default:'""',multi:!0},font:{types:["style"],help:t.font,default:"{font}"},openLinksInNewTab:{types:["boolean"],help:t.openLinksInNewTab,default:!1}},fn:async(e,t)=>{const{Handlebars:r}=await Promise.all([n.e(0),n.e(10)]).then(n.bind(null,375)),a=t.content.map((e=>r.compile(String(e),{knownHelpersOnly:!0}))),i={columns:[],rows:[],type:null,...e};return{type:"render",as:"markdown",value:{content:a.map((e=>e(i))).join(""),font:t.font,openLinksInNewTab:t.openLinksInNewTab}}}}},function(){const{help:e,args:t}=Object(b.t)().urlparam;return{name:"urlparam",aliases:[],type:"string",help:e,inputTypes:["null"],args:{param:{types:["string"],aliases:["_","var","variable"],help:t.param,multi:!1,required:!0},default:{types:["string"],default:'""',help:t.default}},fn:(e,t)=>new URL(window.location.href).searchParams.get(t.param)||t.default}},function(){const{help:e,args:t}=Object(b.t)().escount;return{name:"escount",type:"number",context:{types:["filter"]},help:e,args:{query:{types:["string"],aliases:["_","q"],help:t.query,default:'"-_index:.kibana"'},index:{types:["string"],default:"_all",help:t.index}},fn:(e,t,n)=>{e.and=e.and.concat([{type:"filter",filterType:"luceneQueryString",query:t.query,and:[]}]);const r={params:{...function(e,t){return t.size&&(e={...e,size:t.size}),t.and&&(e.body.query.bool.must=wt(t.and)),e}({index:t.index,body:{track_total_hits:!0,size:0,query:{bool:{must:[{match_all:{}}]}}}},e)}};return _t.searchService.getService().search.search(r).toPromise().then((e=>e.rawResponse.hits.total))}}},function(){const{help:e,args:t}=Object(b.t)().esdocs;return{name:"esdocs",type:"datatable",context:{types:["filter"]},help:e,args:{query:{types:["string"],aliases:["_","q"],help:t.query,default:"-_index:.kibana"},count:{types:["number"],default:1e3,help:t.count},fields:{help:t.fields,types:["string"]},index:{types:["string"],default:"_all",help:t.index},metaFields:{help:t.metaFields,types:["string"]},sort:{types:["string"],help:t.sort}},fn:async(e,t,r)=>{const{count:a,index:i,fields:s,sort:o}=t;e.and=e.and.concat([{type:"filter",filterType:"luceneQueryString",query:t.query,and:[]}]);let l=(await n.e(13).then(n.t.bind(null,376,7))).select({autoQuoteTableNames:!0,autoQuoteFieldNames:!0,autoQuoteAliasNames:!0,nameQuoteCharacter:'"'});if(i&&l.from(i),s){s.split(",").map((e=>e.trim())).forEach((e=>l=l.field(e)))}if(o){const[e,t]=o.split(",").map((e=>e.trim()));e&&l.order(`"${e}"`,"asc"===t)}const u=_t.searchService.getService().search,c={count:a,query:l.toString(),filter:e.and};return u.search(c,{strategy:N.u}).toPromise().then((e=>({type:"datatable",meta:{type:"essql"},...e})))}}},function(){const{help:e,args:t}=Object(b.t)().essql;return{name:"essql",type:"datatable",context:{types:["filter"]},help:e,args:{query:{aliases:["_","q"],types:["string"],help:t.query},parameter:{aliases:["param"],types:["string","number","boolean"],multi:!0,help:t.parameter},count:{types:["number"],help:t.count,default:1e3},timezone:{aliases:["tz"],types:["string"],default:"UTC",help:t.timezone}},fn:(e,t,n)=>{const r=_t.searchService.getService().search,{parameter:a,...i}=t,s={...i,params:a,filter:e.and};return r.search(s,{strategy:N.u}).toPromise().then((e=>({type:"datatable",meta:{type:"essql"},...e}))).catch((e=>{let t=`Unexpected error from Elasticsearch: ${e.message}`;if(e.err){const{type:n,reason:r}=e.err.attributes;t="parsing_exception"===n?`Couldn't parse Elasticsearch SQL query. You may need to add double quotes to names containing special characters. Check your query and try again. Error: ${r}`:`Unexpected error from Elasticsearch: ${n} - ${r}`}throw e.message=t,e}))}}},...P,...yt];var jt=n(20),xt=n(23),Ct=n.n(xt),Et=n(50);const St={[dt.b.map]:function(e){const t=[];if(t.push("savedMap"),t.push(`id="${e.id}"`),void 0!==e.title&&t.push(`title="${e.title}"`),e.mapCenter&&t.push(`center={mapCenter lat=${e.mapCenter.lat} lon=${e.mapCenter.lon} zoom=${e.mapCenter.zoom}}`),e.timeRange&&t.push(`timerange={timerange from="${e.timeRange.from}" to="${e.timeRange.to}"}`),e.hiddenLayers&&e.hiddenLayers.length)for(const n of e.hiddenLayers)t.push(`hideLayer="${n}"`);return t.join(" ")},[dt.b.visualization]:function(e){var t,n;const r=[];return r.push("savedVisualization"),r.push(`id="${e.id}"`),void 0!==e.title&&r.push(`title="${e.title}"`),e.timeRange&&r.push(`timerange={timerange from="${e.timeRange.from}" to="${e.timeRange.to}"}`),null!==(t=e.vis)&&void 0!==t&&t.colors&&Object.entries(e.vis.colors).map((([e,t])=>`colors={seriesStyle label="${e}" color="${t}"}`)).reduce(((e,t)=>r.push(t)),0),void 0!==(null===(n=e.vis)||void 0===n?void 0:n.legendOpen)&&!1===e.vis.legendOpen&&r.push("hideLegend=true"),r.join(" ")},[dt.b.lens]:function(e,t){const n=[];return n.push("savedLens"),n.push(`id="${e.id}"`),void 0!==e.title&&n.push(`title="${e.title}"`),e.timeRange&&n.push(`timerange={timerange from="${e.timeRange.from}" to="${e.timeRange.to}"}`),e.palette&&n.push(`palette={${Object(I.toExpression)(t.get(e.palette.name).toExpression(e.palette.params))}}`),n.join(" ")}};var Tt=n(80),kt=n(21);const{embeddable:At}=b.j,Rt={},qt=[(e,t)=>{const n=((e,t)=>{const n=e.i18n.Context;return(e,r)=>Object(kt.jsx)("div",{className:Tt.CANVAS_EMBEDDABLE_CLASSNAME,style:{width:r.offsetWidth,height:r.offsetHeight,cursor:"auto"}},Object(kt.jsx)(n,null,Object(kt.jsx)(t.embeddable.EmbeddablePanel,{embeddable:e})))})(e,t);return()=>({name:"embeddable",displayName:At.getDisplayName(),help:At.getHelpDescription(),reuseDomNode:!0,render:async(e,{input:r,embeddableType:a},i)=>{const s=i.getElementId();if(Rt[s]){const e=Rt[s];"updateInput"in e&&(e.updateInput(r),e.reload())}else{const o=Array.from(t.embeddable.getEmbeddableFactories()).find((e=>e.type===a));if(!o)throw i.done(),new Et.EmbeddableFactoryNotFoundError(a);const l=o.createFromSavedObject(r.id,r).then((e=>(Rt[s]=e,e)));Rt[s]=l;const u=await(async()=>l)(),c=await t.charts.palettes.getPalettes();Rt[s]=u,Ct.a.unmountComponentAtNode(e);const p=u.getInput$().subscribe((function(e){const t=function(e,t,n){if(St[t])return St[t](e,n)}(e,a,c);t&&i.onEmbeddableInputChange(t)}));Ct.a.render(n(u,e),e,(()=>i.done())),i.onResize((()=>{Ct.a.render(n(u,e),e,(()=>i.done()))})),i.onDestroy((()=>(p.unsubscribe(),i.onEmbeddableDestroyed(),delete Rt[s],Ct.a.unmountComponentAtNode(e))))}}})}];var Nt=n(61),Lt=n(22);const It=()=>rt.i18n.translate("xpack.canvas.renderer.advancedFilter.applyButtonLabel",{defaultMessage:"Apply",description:"This refers to applying the filter to the Canvas workpad"}),Ft=()=>rt.i18n.translate("xpack.canvas.renderer.advancedFilter.inputPlaceholder",{defaultMessage:"Enter filter expression"}),Dt=({value:e="",onChange:t,commit:n})=>Object(kt.jsx)("form",{onSubmit:t=>{t.preventDefault(),n(e)},className:"canvasAdvancedFilter"},Object(kt.jsx)(Lt.EuiFlexGroup,{gutterSize:"xs"},Object(kt.jsx)(Lt.EuiFlexItem,null,Object(kt.jsx)("input",{type:"text",className:"canvasAdvancedFilter__input",placeholder:Ft(),value:e,onChange:e=>t(e.target.value)})),Object(kt.jsx)(Lt.EuiFlexItem,{grow:!1},Object(kt.jsx)("button",{className:"canvasAdvancedFilter__button",type:"submit"},It()))));Dt.defaultProps={value:""};const Pt=Object(Nt.compose)(Object(Nt.withState)("value","onChange",(({value:e})=>e||"")))(Dt),{advancedFilter:zt}=b.j;var Mt=n(71),Ut=n.n(Mt);const{set:$t,del:Qt}=Ut.a;function Bt(e,t,n=[]){let r=!1;const a=Object(I.fromExpression)(t),i=n.reduce(((t,n)=>Object(g.get)(t,`chain[0].arguments.${n}[0]`)!==e[n]?(r=!0,e[n]?$t(t,`chain.0.arguments.${n}.0`,e[n]):Qt(t,`chain.0.arguments.${n}`)):t),a);return{changed:r,newAst:i}}const Ht=()=>rt.i18n.translate("xpack.canvas.renderer.dropdownFilter.matchAllOptionLabel",{defaultMessage:"ANY",description:"The dropdown filter option to match any value in the field."}),Gt=({initialValue:e="",commit:t,choices:n=[]})=>{const[r,a]=Object(jt.useState)(e);Object(jt.useEffect)((()=>{a(e)}),[e]);let i=[{value:"%%CANVAS_MATCH_ALL%%",text:`-- ${Ht()} --`}];i=i.concat(n.map((e=>({value:e[0],text:e[1]}))));const s=i.map((e=>{const{text:t}=e,n=e.value,a=n===r;return Object(kt.jsx)("option",{key:n,value:n,"aria-selected":a},t)}));return Object(kt.jsx)("div",{className:"canvasDropdownFilter"},Object(kt.jsx)("select",{className:"canvasDropdownFilter__select",value:r,onChange:e=>{if(e&&e.target){const n=e.target;a(n.value),t(n.value)}},"data-test-subj":"canvasDropdownFilter__select"},s),Object(kt.jsx)(Lt.EuiIcon,{className:"canvasDropdownFilter__icon",type:"arrowDown"}))},{dropdownFilter:Wt}=b.j,Vt="%%CANVAS_MATCH_ALL%%",Kt=e=>{if(""===e)return Vt;const t=Object(I.fromExpression)(e);return Object(g.get)(t,"chain[0].arguments.value[0]",Vt)};var Jt=n(51),Yt=n(109);const{quickRanges:Zt}=Yt.a,Xt=[{start:"now-1d/d",end:"now-1d/d",label:Zt.getYesterdayLabel()},{start:"now/d",end:"now",label:Zt.getTodayLabel()},{start:"now-24h",end:"now",label:Zt.getLast24HoursLabel()},{start:"now-7d",end:"now",label:Zt.getLast7DaysLabel()},{start:"now-14d",end:"now",label:Zt.getLast2WeeksLabel()},{start:"now-30d",end:"now",label:Zt.getLast30DaysLabel()},{start:"now-90d",end:"now",label:Zt.getLast90DaysLabel()},{start:"now-1y",end:"now",label:Zt.getLast1YearLabel()}];const en=({filter:e,commit:t,dateFormat:n,commonlyUsedRanges:r=[]})=>{const{column:a,start:i,end:s}=function(e){const t=Object(I.fromExpression)(e);return{column:Object(g.get)(t,"chain[0].arguments.column[0]"),start:Object(g.get)(t,"chain[0].arguments.from[0]"),end:Object(g.get)(t,"chain[0].arguments.to[0]")}}(e);return Object(kt.jsx)("div",{className:"canvasTimeFilter"},Object(kt.jsx)(Lt.EuiSuperDatePicker,{start:i,end:s,isPaused:!1,onTimeChange:(e=>({start:n,end:r})=>{t(`timefilter from="${n}" to=${r} column=${e}`)})(a),showUpdateButton:!1,dateFormat:n,commonlyUsedRanges:r.length?r:Xt}))},{timeFilter:tn}=b.j,nn=[()=>({name:"advanced_filter",displayName:zt.getDisplayName(),help:zt.getHelpDescription(),reuseDomNode:!0,height:50,render(e,t,n){Ct.a.render(Object(kt.jsx)(Pt,{commit:n.setFilter,value:n.getFilter()}),e,(()=>n.done())),n.onDestroy((()=>{Ct.a.unmountComponentAtNode(e)}))}}),()=>({name:"dropdown_filter",displayName:Wt.getDisplayName(),help:Wt.getHelpDescription(),reuseDomNode:!0,height:50,render(e,t,n){let r=n.getFilter();if(void 0!==r&&r.includes("exactly")){if(""!==r){const{changed:e,newAst:a}=Bt(t,r,["filterGroup"]);e&&n.setFilter(Object(I.toExpression)(a))}}else r="",n.setFilter(r);Ct.a.render(Object(kt.jsx)(Gt,{commit:e=>{if("%%CANVAS_MATCH_ALL%%"===e)n.setFilter("");else{const r={type:"expression",chain:[{type:"function",function:"exactly",arguments:{value:[e],column:[t.column],filterGroup:[t.filterGroup]}}]},a=Object(I.toExpression)(r);n.setFilter(a)}},choices:t.choices||[],initialValue:Kt(r)}),e,(()=>n.done())),n.onDestroy((()=>{Ct.a.unmountComponentAtNode(e)}))}})],rn=[(e,t)=>{const{uiSettings:n}=e,r=(n.get(Jt.UI_SETTINGS.TIMEPICKER_QUICK_RANGES)||[]).map((({from:e,to:t,display:n})=>({start:e,end:t,label:n}))),a=n.get("dateFormat");return()=>({name:"time_filter",displayName:tn.getDisplayName(),help:tn.getHelpDescription(),reuseDomNode:!0,render:async(e,t,n)=>{let i=n.getFilter();if(void 0===i||0!==i.indexOf("timefilter"))i="timefilter column=@timestamp from=now-24h to=now",n.setFilter(i);else if(""!==i){const{changed:e,newAst:r}=Bt(t,i,["column","filterGroup"]);e&&n.setFilter(Object(I.toExpression)(r))}Ct.a.render(Object(kt.jsx)(en,{commit:n.setFilter,filter:i,commonlyUsedRanges:r,dateFormat:a}),e,(()=>n.done())),n.onDestroy((()=>{Ct.a.unmountComponentAtNode(e)}))}})}];var an=n(37),sn=n(38),on=n(29),ln=n(39),un=n(40),cn=n(30);const pn=[on.debugRenderer,on.errorRenderer,an.imageRenderer,sn.metricRenderer,un.revealImageRenderer,cn.shapeRenderer,ln.repeatImageRenderer,cn.progressRenderer];var dn=n(157),fn=n(158),hn=n(159),mn=n(162),gn=n(163);const yn=[...[dn.a,fn.a,hn.a,gn.a,mn.a],...nn,...pn],bn=[...qt,...rn];class plugin_CanvasSrcPlugin{setup(e,t){t.canvas.addFunctions(Ot),t.canvas.addTypes(ft),t.canvas.addRenderers(yn),e.getStartServices().then((([e,n])=>{t.canvas.addRenderers(bn.map((t=>t(e,n))))})),t.canvas.addDatasourceUIs((async()=>{const{datasourceSpecs:e}=await Promise.all([n.e(0),n.e(1)]).then(n.bind(null,379));return e})),t.canvas.addElements((async()=>{const{initializeElements:r}=await Promise.all([n.e(0),n.e(1)]).then(n.bind(null,379));return r(e,t)})),t.canvas.addModelUIs((async()=>{const{modelSpecs:e}=await Promise.all([n.e(0),n.e(1)]).then(n.bind(null,379));return e})),t.canvas.addViewUIs((async()=>{const{initializeViews:r}=await Promise.all([n.e(0),n.e(1)]).then(n.bind(null,379));return r(e,t)})),t.canvas.addArgumentUIs((async()=>{const{initializeArgs:r}=await Promise.all([n.e(0),n.e(1)]).then(n.bind(null,379));return r(e,t)})),t.canvas.addTagUIs((async()=>{const{tagSpecs:e}=await Promise.all([n.e(0),n.e(1)]).then(n.bind(null,379));return e})),t.canvas.addTransformUIs((async()=>{const{transformSpecs:e}=await Promise.all([n.e(0),n.e(1)]).then(n.bind(null,379));return e}))}start(e,t){}}},79:function(e,t,n){e.exports=n(16)(2395)},91:function(e,t,n){e.exports=n(16)(2392)}}]);