/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[8,11,45],{104:function(e,t,n){"use strict";function i(e,t,n){const i=o(e,n),a=o(t,n);return!0===i&&!1===a?-1:!1===i&&!0===a?1:e.name.localeCompare(t.name)}n.d(t,"a",(function(){return i}));const o=(e,t)=>{let n=e.enabled;return!e.enabledInConfig&&t&&t.length>0&&(n=void 0!==t.find((t=>t.actionTypeId===e.id))),n}},105:function(e,t,n){switch(window.__kbnThemeTag__){case"v7dark":return n(106);case"v7light":return n(108);case"v8dark":return n(110);case"v8light":return n(112)}},106:function(e,t,n){var i=n(57),o=n(107);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);e.exports=o.locals||{}},107:function(e,t,n){(t=n(58)(!1)).push([e.i,".actCheckActionTypeEnabled__disabledActionWarningCard{background-color:#25262E}.actAccordionActionForm{background-color:#25262E}.actAccordionActionForm .euiCard{box-shadow:none}.actAccordionActionForm__button{padding:12px}.actConnectorsListGrid .euiToolTipAnchor,.actConnectorsListGrid .euiCard{height:100%}\n",""]),e.exports=t},108:function(e,t,n){var i=n(57),o=n(109);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);e.exports=o.locals||{}},109:function(e,t,n){(t=n(58)(!1)).push([e.i,".actCheckActionTypeEnabled__disabledActionWarningCard{background-color:#F5F7FA}.actAccordionActionForm{background-color:#F5F7FA}.actAccordionActionForm .euiCard{box-shadow:none}.actAccordionActionForm__button{padding:12px}.actConnectorsListGrid .euiToolTipAnchor,.actConnectorsListGrid .euiCard{height:100%}\n",""]),e.exports=t},110:function(e,t,n){var i=n(57),o=n(111);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);e.exports=o.locals||{}},111:function(e,t,n){(t=n(58)(!1)).push([e.i,".actCheckActionTypeEnabled__disabledActionWarningCard{background-color:#25262E}.actAccordionActionForm{background-color:#25262E}.actAccordionActionForm .euiCard{box-shadow:none}.actAccordionActionForm__button{padding:12px}.actConnectorsListGrid .euiToolTipAnchor,.actConnectorsListGrid .euiCard{height:100%}\n",""]),e.exports=t},112:function(e,t,n){var i=n(57),o=n(113);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);e.exports=o.locals||{}},113:function(e,t,n){(t=n(58)(!1)).push([e.i,".actCheckActionTypeEnabled__disabledActionWarningCard{background-color:#F5F7FA}.actAccordionActionForm{background-color:#F5F7FA}.actAccordionActionForm .euiCard{box-shadow:none}.actAccordionActionForm__button{padding:12px}.actConnectorsListGrid .euiToolTipAnchor,.actConnectorsListGrid .euiCard{height:100%}\n",""]),e.exports=t},124:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var i=n(0);function o(e){const t=function(){const e=[];return e.push({name:a.ruleId,description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.ruleIdLabel",{defaultMessage:"The ID of the rule."})}),e.push({name:a.ruleName,description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.ruleNameLabel",{defaultMessage:"The name of the rule."})}),e.push({name:a.ruleSpaceId,description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.ruleSpaceIdLabel",{defaultMessage:"The space ID of the rule."})}),e.push({name:a.ruleTags,description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.ruleTagsLabel",{defaultMessage:"The tags of the rule."})}),e.push({name:a.ruleType,description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.ruleTypeLabel",{defaultMessage:"The type of rule."})}),e.push({name:a.date,description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.dateLabel",{defaultMessage:"The date the rule scheduled the action."})}),e.push({name:a.alertId,description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.alertIdLabel",{defaultMessage:"The ID of the alert that scheduled actions for the rule."})}),e.push({name:a.alertActionGroup,description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.alertActionGroupLabel",{defaultMessage:"The action group of the alert that scheduled actions for the rule."})}),e.push({name:a.alertActionSubgroup,description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.alertActionSubgroupLabel",{defaultMessage:"The action subgroup of the alert that scheduled actions for the rule."})}),e.push({name:a.alertActionGroupName,description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.alertActionGroupNameLabel",{defaultMessage:"The human readable name of the action group of the alert that scheduled actions for the rule."})}),e.push({name:"kibanaBaseUrl",description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.kibanaBaseUrlLabel",{defaultMessage:"The configured server.publicBaseUrl value or empty string if not configured."})}),e.push({name:c.alertId,deprecated:!0,description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyAlertIdLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:a.ruleId}})}),e.push({name:c.alertName,deprecated:!0,description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyAlertNameLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:a.ruleName}})}),e.push({name:c.alertInstanceId,deprecated:!0,description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyAlertInstanceIdLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:a.alertId}})}),e.push({name:c.alertActionGroup,deprecated:!0,description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyAlertActionGroupLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:a.alertActionGroup}})}),e.push({name:c.alertActionGroupName,deprecated:!0,description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyAlertActionGroupNameLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:a.alertActionGroupName}})}),e.push({name:c.alertActionSubgroup,deprecated:!0,description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyAlertActionSubGroupLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:a.alertActionSubgroup}})}),e.push({name:c.spaceId,deprecated:!0,description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.legacySpaceIdLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:a.ruleSpaceId}})}),e.push({name:c.tags,deprecated:!0,description:i.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyTagsLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:a.ruleTags}})}),e}(),n=e.context?s(e.context,"context."):[],o=s(e.params,"params."),r=s(e.state,"state.");return t.concat(n,o,r)}let a,c;function s(e,t){return e.map((e=>({...e,name:`${t}${e.name}`})))}!function(e){e.ruleId="rule.id",e.ruleName="rule.name",e.ruleSpaceId="rule.spaceId",e.ruleTags="rule.tags",e.ruleType="rule.type",e.date="date",e.alertId="alert.id",e.alertActionGroup="alert.actionGroup",e.alertActionGroupName="alert.actionGroupName",e.alertActionSubgroup="alert.actionSubgroup"}(a||(a={})),function(e){e.alertId="alertId",e.alertName="alertName",e.alertInstanceId="alertInstanceId",e.alertActionGroup="alertActionGroup",e.alertActionGroupName="alertActionGroupName",e.alertActionSubgroup="alertActionSubgroup",e.tags="tags",e.spaceId="spaceId"}(c||(c={}))},38:function(e,t,n){"use strict";n.r(t),n.d(t,"AddConnectorInline",(function(){return u})),n.d(t,"default",(function(){return u}));var i=n(1),o=n.n(i),a=n(0),c=n(36),s=n(13),r=n(63),l=n(59),d=n(5);const u=({actionTypesIndex:e,actionItem:t,index:n,connectors:u,onAddConnector:p,onDeleteConnector:g,onSelectConnector:b,actionTypeRegistry:f,emptyActionsIds:m})=>{const{application:{capabilities:j}}=Object(l.b)().services,A=Object(r.d)(j),[x,I]=Object(i.useState)([]),[h,y]=Object(i.useState)(!1),[T,O]=Object(i.useState)([]),v=e?e[t.actionTypeId].name:t.actionTypeId,C=e[t.actionTypeId],E=f.get(t.actionTypeId),F=Object(d.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.emptyConnectorsLabel",defaultMessage:"No {actionTypeName} connectors",values:{actionTypeName:v}}),k=Object(d.jsx)(s.EuiText,{color:"danger"},Object(d.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.unableToLoadConnectorTitle",defaultMessage:"Unable to load connector"}));Object(i.useEffect)((()=>{if(u){const e=u.filter((e=>e.actionTypeId===t.actionTypeId&&((null==C?void 0:C.enabledInConfig)||e.isPreconfigured))).map((({name:e,id:t,isPreconfigured:n})=>({label:`${e} ${n?"(preconfigured)":""}`,key:t,id:t})));I(e),e.length>0&&O([`Unable to load ${E.actionTypeTitle} connector`])}y(!!m.find((e=>t.id===e)))}),[]);const M=Object(d.jsx)(s.EuiFlexGroup,{component:"div"},Object(d.jsx)(s.EuiFlexItem,null,Object(d.jsx)(s.EuiFormRow,{fullWidth:!0,label:Object(d.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.connectorAddInline.actionIdLabel",defaultMessage:"Use another {connectorInstance} connector",values:{connectorInstance:v}}),labelAppend:Object(d.jsx)(s.EuiButtonEmpty,{size:"xs","data-test-subj":`addNewActionConnectorButton-${t.actionTypeId}`,onClick:p},Object(d.jsx)(c.FormattedMessage,{defaultMessage:"Add connector",id:"xpack.triggersActionsUI.sections.connectorAddInline.connectorAddInline.addNewConnectorEmptyButton"})),error:T,isInvalid:T.length>0},Object(d.jsx)(s.EuiComboBox,{fullWidth:!0,singleSelection:{asPlainText:!0},options:x,id:`selectActionConnector-${t.id}-${n}`,"data-test-subj":`selectActionConnector-${t.actionTypeId}-${n}`,onChange:e=>{setTimeout((()=>{var t;b(null!==(t=e[0].id)&&void 0!==t?t:"")}))},isClearable:!1}))));return Object(d.jsx)(o.a.Fragment,null,Object(d.jsx)(s.EuiAccordion,{key:n,initialIsOpen:!0,id:n.toString(),className:"actAccordionActionForm",buttonContentClassName:"actAccordionActionForm__button","data-test-subj":`alertActionAccordion-${n}`,buttonContent:Object(d.jsx)(s.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(d.jsx)(s.EuiFlexItem,{grow:!1},Object(d.jsx)(s.EuiIcon,{type:E.iconClass,size:"m"})),Object(d.jsx)(s.EuiFlexItem,null,Object(d.jsx)(s.EuiText,null,Object(d.jsx)("div",null,Object(d.jsx)(c.FormattedMessage,{defaultMessage:"{actionConnectorName}",id:"xpack.triggersActionsUI.sections.connectorAddInline.newAlertActionTypeEditTitle",values:{actionConnectorName:E.actionTypeTitle}})))),!h&&Object(d.jsx)(s.EuiFlexItem,{grow:!1},Object(d.jsx)(s.EuiIconTip,{type:"alert",size:"m",color:"danger","data-test-subj":"alertActionAccordionErrorTooltip",content:Object(d.jsx)(c.FormattedMessage,{defaultMessage:"Unable to load connector",id:"xpack.triggersActionsUI.sections.connectorAddInline.unableToLoadConnectorTitle'"})}))),extraAction:Object(d.jsx)(s.EuiButtonIcon,{iconType:"minusInCircle",color:"danger",className:"actAccordionActionForm__extraAction","aria-label":a.i18n.translate("xpack.triggersActionsUI.sections.connectorAddInline.accordion.deleteIconAriaLabel",{defaultMessage:"Delete"}),onClick:g}),paddingSize:"l"},A?x.length>0?M:Object(d.jsx)(s.EuiEmptyPrompt,{title:h?F:k,actions:Object(d.jsx)(s.EuiButton,{color:"primary",fill:!0,size:"s","data-test-subj":`createActionConnectorButton-${n}`,onClick:p},Object(d.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.addConnectorButtonLabel",defaultMessage:"Create a connector"}))}):Object(d.jsx)(s.EuiCallOut,{title:F},Object(d.jsx)("p",null,Object(d.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.unauthorizedToCreateForEmptyConnectors",defaultMessage:"Only authorized users can configure a connector. Contact your administrator."})))),Object(d.jsx)(s.EuiSpacer,{size:"xs"}))}},56:function(e,t,n){"use strict";n.r(t),n.d(t,"ActionForm",(function(){return O})),n.d(t,"default",(function(){return O}));var i=n(1),o=n.n(i),a=n(0),c=n(36),s=n(13),r=n(76),l=n(80),d=n(2),u=n(14),p=n(94),g=n(63),b=n(124),f=n(59),m=n(5);const j=a.i18n.translate("xpack.triggersActionsUI.sections.actionForm.preconfiguredTitleMessage",{defaultMessage:"(preconfigured)"}),A=({actionItem:e,actionConnector:t,index:n,onAddConnector:r,onConnectorSelected:l,onDeleteAction:A,setActionParamsProperty:x,actionTypesIndex:I,connectors:h,defaultActionGroupId:y,defaultActionMessage:T,messageVariables:O,actionGroups:v,setActionGroupIdByIndex:C,actionTypeRegistry:E,isActionGroupDisabledForActionType:F,defaultParams:k})=>{var M,S;const{application:{capabilities:_}}=Object(f.b)().services,[U,L]=Object(i.useState)(!0),[N,w]=Object(i.useState)([]),G=null==v?void 0:v.find((({id:e})=>e===y)),$=null!==(M=null==v?void 0:v.find((({id:t})=>t===e.group)))&&void 0!==M?M:G,[B,P]=Object(i.useState)(),[D,z]=Object(i.useState)({errors:{}});Object(i.useEffect)((()=>{if(w(O?function(e,t){const n=Object(b.b)(null!=t&&t.omitOptionalMessageVariables?Object(d.pick)(e,...u.g):e);return Object(d.partition)(n,(e=>!0!==e.deprecated)).reduce(((e,t)=>[...e,...t.sort(((e,t)=>e.name.toUpperCase().localeCompare(t.name.toUpperCase())))]),[])}(O,$):[]),k)for(const[t,i]of Object.entries(k))void 0!==e.params[t]&&null!==e.params[t]||x(t,i,n)}),[e.group]),Object(i.useEffect)((()=>{if(k&&B)for(const[e,t]of Object.entries(k))x(e,t,n)}),[B]),Object(i.useEffect)((()=>{(async()=>{var t;const n=await(null===(t=E.get(e.actionTypeId))||void 0===t?void 0:t.validateParams(e.params));z(n)})()}),[e]);const V=Object(g.d)(_),R=I[e.actionTypeId],W=(e,t)=>!!F&&F(e,t),q=h.filter((t=>t.actionTypeId===e.actionTypeId&&(R.enabledInConfig||t.isPreconfigured))).map((({name:e,id:t,isPreconfigured:n})=>({label:`${e} ${n?j:""}`,key:t,id:t}))),K=E.get(t.actionTypeId);if(!K)return null;const H=K.actionParamsFields,J=Object(p.a)(I[t.actionTypeId],h.filter((e=>e.isPreconfigured))),Y=J.isEnabled?Object(m.jsx)(o.a.Fragment,null,v&&$&&C&&Object(m.jsx)(o.a.Fragment,null,Object(m.jsx)(s.EuiFlexGroup,{component:"div"},Object(m.jsx)(s.EuiFlexItem,{grow:!0},Object(m.jsx)(s.EuiFormControlLayout,{fullWidth:!0,prepend:Object(m.jsx)(s.EuiFormLabel,{htmlFor:`addNewActionConnectorActionGroup-${e.actionTypeId}`},Object(m.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionTypeForm.actionRunWhenInActionGroup",defaultMessage:"Run when"}))},Object(m.jsx)(s.EuiSuperSelect,{fullWidth:!0,id:`addNewActionConnectorActionGroup-${e.actionTypeId}`,"data-test-subj":`addNewActionConnectorActionGroup-${n}`,options:v.map((({id:t,name:i})=>{return{value:t,inputDisplay:(o=t,c=i,s=e.actionTypeId,F&&F(o,s)?a.i18n.translate("xpack.triggersActionsUI.sections.actionTypeForm.addNewActionConnectorActionGroup.display",{defaultMessage:"{actionGroupName} (Not Currently Supported)",values:{actionGroupName:c}}):c),disabled:W(t,e.actionTypeId),"data-test-subj":`addNewActionConnectorActionGroup-${n}-option-${t}`};var o,c,s})),valueOfSelected:$.id,onChange:e=>{C(e,n),P(e)}})))),Object(m.jsx)(s.EuiSpacer,{size:"l"})),Object(m.jsx)(s.EuiFlexGroup,{component:"div"},Object(m.jsx)(s.EuiFlexItem,null,Object(m.jsx)(s.EuiFormRow,{fullWidth:!0,label:Object(m.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionTypeForm.actionIdLabel",defaultMessage:"{connectorInstance} connector",values:{connectorInstance:I?I[t.actionTypeId].name:t.actionTypeId}}),labelAppend:V&&I&&I[t.actionTypeId].enabledInConfig?Object(m.jsx)(s.EuiButtonEmpty,{size:"xs","data-test-subj":`addNewActionConnectorButton-${e.actionTypeId}`,onClick:r},Object(m.jsx)(c.FormattedMessage,{defaultMessage:"Add connector",id:"xpack.triggersActionsUI.sections.actionTypeForm.addNewConnectorEmptyButton"})):null},Object(m.jsx)(s.EuiComboBox,{fullWidth:!0,singleSelection:{asPlainText:!0},options:q,id:`selectActionConnector-${e.id}`,"data-test-subj":`selectActionConnector-${e.actionTypeId}`,selectedOptions:(e=>{const t=h.find((t=>t.id===e));if(!t||I&&!I[t.actionTypeId].enabledInConfig&&!t.isPreconfigured)return[];const n=`${t.name} ${t.isPreconfigured?j:""}`;return[{label:n,value:n,id:e,"data-test-subj":"itemActionConnector"}]})(e.id),onChange:e=>{var t;l(null!==(t=e[0].id)&&void 0!==t?t:"")},isClearable:!1})))),Object(m.jsx)(s.EuiSpacer,{size:"xl"}),H?Object(m.jsx)(s.EuiErrorBoundary,null,Object(m.jsx)(i.Suspense,{fallback:null},Object(m.jsx)(H,{actionParams:e.params,index:n,errors:D.errors,editAction:x,messageVariables:N,defaultMessage:null!==(S=null==$?void 0:$.defaultActionMessage)&&void 0!==S?S:T,actionConnector:t}))):null):J.messageCard;return Object(m.jsx)(s.EuiAccordion,{initialIsOpen:!0,key:n,id:n.toString(),onToggle:L,paddingSize:"l",className:"actAccordionActionForm",buttonContentClassName:"actAccordionActionForm__button","data-test-subj":`alertActionAccordion-${n}`,buttonContent:Object(m.jsx)(s.EuiFlexGroup,{gutterSize:"l",alignItems:"center"},Object(m.jsx)(s.EuiFlexItem,{grow:!1},Object(m.jsx)(s.EuiIcon,{type:K.iconClass,size:"m"})),Object(m.jsx)(s.EuiFlexItem,null,Object(m.jsx)(s.EuiText,null,Object(m.jsx)("div",null,Object(m.jsx)(s.EuiFlexGroup,{gutterSize:"s"},Object(m.jsx)(s.EuiFlexItem,{grow:!1},Object(m.jsx)(c.FormattedMessage,{defaultMessage:"{actionConnectorName}",id:"xpack.triggersActionsUI.sections.actionTypeForm.existingAlertActionTypeEditTitle",values:{actionConnectorName:`${t.name} ${t.isPreconfigured?j:""}`}})),$&&!U&&Object(m.jsx)(s.EuiFlexItem,{grow:!1},Object(m.jsx)(s.EuiBadge,null,$.name)),Object(m.jsx)(s.EuiFlexItem,{grow:!1},!1===J.isEnabled&&Object(m.jsx)(o.a.Fragment,null,Object(m.jsx)(s.EuiIconTip,{type:"alert",color:"danger",content:a.i18n.translate("xpack.triggersActionsUI.sections.actionTypeForm.actionDisabledTitle",{defaultMessage:"This action is disabled"}),position:"right"})))))))),extraAction:Object(m.jsx)(s.EuiButtonIcon,{iconType:"minusInCircle",color:"danger",className:"actAccordionActionForm__extraAction","aria-label":a.i18n.translate("xpack.triggersActionsUI.sections.actionTypeForm.accordion.deleteIconAriaLabel",{defaultMessage:"Delete"}),onClick:A})},Y)};var x=n(38),I=n(104),h=n(18),y=n(8),T=n(3);const O=({actions:e,defaultActionGroupId:t,setActionIdByIndex:n,setActionGroupIdByIndex:d,setActions:u,setActionParamsProperty:g,actionTypes:b,messageVariables:j,actionGroups:O,defaultActionMessage:v,setHasActionsDisabled:C,setHasActionsWithBrokenConnector:E,actionTypeRegistry:F,getDefaultActionParams:k,isActionGroupDisabledForActionType:M})=>{const{http:S,notifications:{toasts:_}}=Object(f.b)().services,[U,L]=Object(i.useState)(!1),[N,w]=Object(i.useState)(void 0),[G,$]=Object(i.useState)(!0),[B,P]=Object(i.useState)([]),[D,z]=Object(i.useState)(!1),[V,R]=Object(i.useState)(!1),[W,q]=Object(i.useState)(void 0),[K,H]=Object(i.useState)([]),J=Object(i.useCallback)((()=>L(!1)),[L]);Object(i.useEffect)((()=>{(async()=>{try{R(!0);const e=(null!=b?b:await Object(r.d)({http:S})).sort(((e,t)=>e.name.localeCompare(t.name))),t={};for(const n of e)t[n.id]=n;q(t)}catch(e){_.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.actionForm.unableToLoadConnectorTypesMessage",{defaultMessage:"Unable to load connector types"})})}finally{R(!1)}})()}),[]),Object(i.useEffect)((()=>{(async()=>{try{z(!0);const e=await Object(r.e)({http:S});P(e.filter((e=>!e.isMissingSecrets)))}catch(e){_.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.actionForm.unableToLoadActionsMessage",{defaultMessage:"Unable to load connectors"})})}finally{z(!1)}})()}),[]),Object(i.useEffect)((()=>{B.length>0&&W&&(()=>{const t=B.filter((e=>e.isPreconfigured)),n=e.some((e=>W&&!W[e.actionTypeId].enabled&&!Object(p.a)(W[e.actionTypeId],t).isEnabled));C&&C(n)})()}),[B,W]),Object(i.useEffect)((()=>{const t=e.some((e=>!B.find((t=>t.id===e.id))));E&&E(t)}),[e,B]);let Y=null,Q=!1;if(W){const i=B.filter((e=>e.isPreconfigured));Y=F.list().filter((({id:e})=>null!=b?b:!h.DEFAULT_HIDDEN_ACTION_TYPES.includes(e))).filter((e=>W[e.id])).filter((e=>!!e.actionParamsFields)).sort(((e,t)=>Object(I.a)(W[e.id],W[t.id],i))).map((function(o,c){const r=W[o.id],l=Object(p.a)(W[o.id],i);if(!r.enabledInConfig&&!l.isEnabled)return null;r.enabledInLicense||(Q=!0);const d=Object(m.jsx)(s.EuiKeyPadMenuItem,{key:c,isDisabled:!l.isEnabled,"data-test-subj":`${o.id}-ActionTypeSelectOption`,label:W[o.id].name,onClick:()=>function(i){if(!t)return void _.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.actionForm.unableToAddAction",{defaultMessage:"Unable to add action, because default action group is not defined"})});$(!1);const o=B.filter((e=>e.actionTypeId===i.id));o.length>0&&(e.push({id:"",actionTypeId:i.id,group:t,params:{}}),n(o[0].id,e.length-1)),0===o.length&&(e.push({id:"",actionTypeId:i.id,group:t,params:{}}),n(e.length.toString(),e.length-1),H([...K,e.length.toString()]))}(o)},Object(m.jsx)(s.EuiIcon,{size:"xl",type:"string"==typeof o.iconClass?o.iconClass:Object(T.a)(o.iconClass)}));return Object(m.jsx)(s.EuiFlexItem,{grow:!1,key:`keypad-${o.id}`},l.isEnabled&&d,!1===l.isEnabled&&Object(m.jsx)(s.EuiToolTip,{position:"top",content:l.message},d))}))}return D?Object(m.jsx)(l.a,null,Object(m.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionForm.loadingConnectorsDescription",defaultMessage:"Loading connectors…"})):Object(m.jsx)(o.a.Fragment,null,Object(m.jsx)(s.EuiTitle,{size:"s"},Object(m.jsx)("h4",null,Object(m.jsx)(c.FormattedMessage,{defaultMessage:"Actions",id:"xpack.triggersActionsUI.sections.actionForm.actionSectionsTitle"}))),Object(m.jsx)(s.EuiSpacer,{size:"m"}),W&&e.map(((i,o)=>{const a=B.find((e=>e.id===i.id));return a?Object(m.jsx)(A,{actionItem:i,actionConnector:a,index:o,key:`action-form-action-at-${o}`,setActionParamsProperty:g,actionTypesIndex:W,connectors:B,defaultActionGroupId:t,messageVariables:j,actionGroups:O,defaultActionMessage:v,defaultParams:null==k?void 0:k(i.actionTypeId,i.group),isActionGroupDisabledForActionType:M,setActionGroupIdByIndex:d,onAddConnector:()=>{w({actionTypeId:i.actionTypeId,indices:[o]}),L(!0)},onConnectorSelected:e=>{n(e,o)},actionTypeRegistry:F,onDeleteAction:()=>{const t=e.filter(((e,t)=>t!==o));u(t),$(0===t.filter((e=>e.id!==i.id)).length),w(void 0)}}):Object(m.jsx)(x.AddConnectorInline,{actionTypesIndex:W,actionItem:i,index:o,key:`action-form-action-at-${o}`,actionTypeRegistry:F,emptyActionsIds:K,connectors:B,onDeleteConnector:()=>{const t=e.filter(((e,t)=>t!==o));u(t),$(0===t.filter((e=>e.id!==i.id)).length),w(void 0)},onAddConnector:()=>{w({actionTypeId:i.actionTypeId,indices:e.map(((e,t)=>e.id===i.id?t:-1)).filter((e=>e>=0))}),L(!0)},onSelectConnector:e=>{n(e,o)}})})),Object(m.jsx)(s.EuiSpacer,{size:"m"}),G?Object(m.jsx)(o.a.Fragment,null,Object(m.jsx)(s.EuiFlexGroup,{id:"alertActionTypeTitle",justifyContent:"spaceBetween"},Object(m.jsx)(s.EuiFlexItem,{grow:!1},Object(m.jsx)(s.EuiTitle,{size:"xs"},Object(m.jsx)("h5",null,Object(m.jsx)(c.FormattedMessage,{defaultMessage:"Select a connector type",id:"xpack.triggersActionsUI.sections.actionForm.selectConnectorTypeTitle"})))),Q&&Object(m.jsx)(s.EuiFlexItem,{grow:!1},Object(m.jsx)(s.EuiTitle,{size:"xs"},Object(m.jsx)("h5",null,Object(m.jsx)(s.EuiLink,{href:h.VIEW_LICENSE_OPTIONS_LINK,target:"_blank",external:!0,className:"actActionForm__getMoreActionsLink"},Object(m.jsx)(c.FormattedMessage,{defaultMessage:"Get more connectors",id:"xpack.triggersActionsUI.sections.actionForm.getMoreConnectorsTitle"})))))),Object(m.jsx)(s.EuiSpacer,null),Object(m.jsx)(s.EuiFlexGroup,{gutterSize:"m",wrap:!0},V?Object(m.jsx)(l.a,null,Object(m.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionForm.loadingConnectorTypesDescription",defaultMessage:"Loading connector types…"})):Y)):Object(m.jsx)(s.EuiFlexGroup,null,Object(m.jsx)(s.EuiFlexItem,{grow:!1},Object(m.jsx)(s.EuiButton,{size:"s","data-test-subj":"addAlertActionButton",onClick:()=>$(!0)},Object(m.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionForm.addActionButtonLabel",defaultMessage:"Add action"})))),W&&N&&U?Object(m.jsx)(y.c,{actionType:W[N.actionTypeId],onClose:J,postSaveEventHandler:e=>{B.push(e);(N.indices||[]).forEach((t=>n(e.id,t)))},actionTypeRegistry:F}):null)}},57:function(e,t,n){"use strict";var i,o=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),c=[];function s(e){for(var t=-1,n=0;n<c.length;n++)if(c[n].identifier===e){t=n;break}return t}function r(e,t){for(var n={},i=[],o=0;o<e.length;o++){var a=e[o],r=t.base?a[0]+t.base:a[0],l=n[r]||0,d="".concat(r," ").concat(l);n[r]=l+1;var u=s(d),p={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(c[u].references++,c[u].updater(p)):c.push({identifier:d,updater:m(p,t),references:1}),i.push(d)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var o=n.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var c=a(e.insert||"head");if(!c)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");c.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function p(e,t,n,i){var o=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var a=document.createTextNode(o),c=e.childNodes;c[t]&&e.removeChild(c[t]),c.length?e.insertBefore(a,c[t]):e.appendChild(a)}}function g(e,t,n){var i=n.css,o=n.media,a=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var b=null,f=0;function m(e,t){var n,i,o;if(t.singleton){var a=f++;n=b||(b=l(t)),i=p.bind(null,n,a,!1),o=p.bind(null,n,a,!0)}else n=l(t),i=g.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=r(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var o=s(n[i]);c[o].references--}for(var a=r(e,t),l=0;l<n.length;l++){var d=s(n[l]);0===c[d].references&&(c[d].updater(),c.splice(d,1))}n=a}}}},58:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var o=(c=i,s=btoa(unescape(encodeURIComponent(JSON.stringify(c)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(r," */")),a=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[n].concat(a).concat([o]).join("\n")}var c,s,r;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var s=0;s<e.length;s++){var r=[].concat(e[s]);i&&o[r[0]]||(n&&(r[2]?r[2]="".concat(n," and ").concat(r[2]):r[2]=n),t.push(r))}},t}},59:function(e,t,n){"use strict";n.d(t,"a",(function(){return i.KibanaContextProvider})),n.d(t,"b",(function(){return o}));var i=n(35);const o=()=>Object(i.useKibana)()},63:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));const i=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.show},o=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.save},a=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.execute},c=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.delete};function s(e,t){var n,i;return null!==(n=null==t||null===(i=t.authorizedConsumers[e.consumer])||void 0===i?void 0:i.all)&&void 0!==n&&n}},76:function(e,t,n){"use strict";n.d(t,"d",(function(){return i.a})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"f",(function(){return u}));var i=n(21),o=n(6);const a=({connector_type_id:e,is_preconfigured:t,referenced_by_count:n,is_missing_secrets:i,...o})=>({actionTypeId:e,isPreconfigured:t,referencedByCount:n,isMissingSecrets:i,...o});async function c({http:e}){const t=await e.get(`${o.a}/connectors`);return t.map((e=>a(e)))}const s=({actionTypeId:e,isPreconfigured:t,...n})=>({...n,connector_type_id:e,is_preconfigured:t});async function r({http:e,connector:t}){return(({connector_type_id:e,is_preconfigured:t,is_missing_secrets:n,...i})=>({...i,actionTypeId:e,isPreconfigured:t,isMissingSecrets:n}))(await e.post(`${o.a}/connector`,{body:JSON.stringify(s(t))}))}async function l({ids:e,http:t}){const n=[],i=[];return await Promise.all(e.map((e=>t.delete(`${o.a}/connector/${encodeURIComponent(e)}`)))).then((function(e){n.push(...e)}),(function(e){i.push(...e)})),{successes:n,errors:i}}async function d({id:e,params:t,http:n}){return(({connector_id:e,service_message:t,...n})=>({...n,actionId:e,serviceMessage:t}))(await n.post(`${o.a}/connector/${encodeURIComponent(e)}/_execute`,{body:JSON.stringify({params:t})}))}async function u({http:e,connector:t,id:n}){return(({connector_type_id:e,is_preconfigured:t,is_missing_secrets:n,...i})=>({...i,actionTypeId:e,isPreconfigured:t,isMissingSecrets:n}))(await e.put(`${o.a}/connector/${encodeURIComponent(n)}`,{body:JSON.stringify({name:t.name,config:t.config,secrets:t.secrets})}))}},80:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(1);var i=n(13),o=n(5);const a=({children:e})=>Object(o.jsx)(i.EuiEmptyPrompt,{title:Object(o.jsx)(i.EuiLoadingSpinner,{size:"xl"}),body:Object(o.jsx)(i.EuiText,{color:"subdued"},e),"data-test-subj":"sectionLoading"})},94:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return p}));n(1);var i=n(2),o=n(0),a=n(36),c=n(13),s=n(18),r=(n(105),n(5));const l=e=>({isEnabled:!1,message:o.i18n.translate("xpack.triggersActionsUI.checkActionTypeEnabled.actionTypeDisabledByLicenseMessage",{defaultMessage:"This connector requires a {minimumLicenseRequired} license.",values:{minimumLicenseRequired:Object(i.upperFirst)(e.minimumLicenseRequired)}}),messageCard:Object(r.jsx)(c.EuiCard,{titleSize:"xs",title:o.i18n.translate("xpack.triggersActionsUI.licenseCheck.actionTypeDisabledByLicenseMessageTitle",{defaultMessage:"This feature requires a {minimumLicenseRequired} license.",values:{minimumLicenseRequired:Object(i.upperFirst)(e.minimumLicenseRequired)}}),description:o.i18n.translate("xpack.triggersActionsUI.licenseCheck.actionTypeDisabledByLicenseMessageDescription",{defaultMessage:"To re-enable this action, please upgrade your license."}),className:"actCheckActionTypeEnabled__disabledActionWarningCard",children:Object(r.jsx)(c.EuiLink,{href:s.VIEW_LICENSE_OPTIONS_LINK,target:"_blank"},Object(r.jsx)(a.FormattedMessage,{defaultMessage:"View license options",id:"xpack.triggersActionsUI.licenseCheck.actionTypeDisabledByLicenseLinkTitle"}))})}),d={isEnabled:!1,message:o.i18n.translate("xpack.triggersActionsUI.checkActionTypeEnabled.actionTypeDisabledByConfigMessage",{defaultMessage:"This connector is disabled by the Kibana configuration."}),messageCard:Object(r.jsx)(c.EuiCard,{title:o.i18n.translate("xpack.triggersActionsUI.licenseCheck.actionTypeDisabledByConfigMessageTitle",{defaultMessage:"This feature is disabled by the Kibana configuration."}),description:"",className:"actCheckActionTypeEnabled__disabledActionWarningCard"})};function u(e){return!1===(null==e?void 0:e.enabledInLicense)?l(e):!1===(null==e?void 0:e.enabledInConfig)?d:{isEnabled:!0}}function p(e,t){return!1===(null==e?void 0:e.enabledInLicense)?l(e):!1!==(null==e?void 0:e.enabledInConfig)||t.find((t=>t.actionTypeId===e.id))?{isEnabled:!0}:d}}}]);