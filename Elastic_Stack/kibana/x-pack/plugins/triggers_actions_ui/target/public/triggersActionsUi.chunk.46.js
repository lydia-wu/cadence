/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[46],{254:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return b}));var n=i(1),s=i.n(n),c=i(13),o=i(36),a=i(0),l=i(19),r=i(25),d=i(59),u=i(5);const b=({action:e,editActionConfig:t,errors:i,readOnly:b})=>{const{http:x,docLinks:j}=Object(d.b)().services,{index:g,refresh:p,executionTimeField:m}=e.config,[h,f]=Object(n.useState)(null!=m),[O,A]=Object(n.useState)(null!=m),[T,F]=Object(n.useState)([]),[S,y]=Object(n.useState)([]),[k,I]=Object(n.useState)([]),[v,E]=Object(n.useState)(!1),M=e=>{e.length>0?(f(!0),I([r.a,...e])):(A(!1),f(!1),I([]))};Object(n.useEffect)((()=>{(async()=>{if(F(await Object(r.d)()),g){const e=await Object(r.b)(x,[g]);M(Object(l.a)(e))}})()}),[]);const C=void 0!==i.index&&i.index.length>0&&void 0!==g;return Object(u.jsx)(s.a.Fragment,null,Object(u.jsx)(c.EuiTitle,{size:"s"},Object(u.jsx)("h5",null,Object(u.jsx)(o.FormattedMessage,{defaultMessage:"Write to index",id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.connectorSectionTitle"}))),Object(u.jsx)(c.EuiSpacer,{size:"m"}),Object(u.jsx)(c.EuiFormRow,{id:"indexConnectorSelectSearchBox",fullWidth:!0,label:Object(u.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.indicesToQueryLabel",defaultMessage:"Index"}),isInvalid:C,error:i.index,helpText:Object(u.jsx)(s.a.Fragment,null,Object(u.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.howToBroadenSearchQueryDescription",defaultMessage:"Use * to broaden your query."}),Object(u.jsx)(c.EuiSpacer,{size:"s"}),Object(u.jsx)(c.EuiLink,{href:j.links.alerting.indexAction,target:"_blank"},Object(u.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.configureIndexHelpLabel",defaultMessage:"Configuring index connector."})))},Object(u.jsx)(c.EuiComboBox,{fullWidth:!0,singleSelection:{asPlainText:!0},async:!0,isLoading:v,isInvalid:C,noSuggestions:!S.length,options:S,"data-test-subj":"connectorIndexesComboBox",selectedOptions:g?[{value:g,label:g}]:[],isDisabled:b,onChange:async e=>{t("index",e.length>0?e[0].value:"");const i=e.map((e=>e.value));if(0===i.length)return void M([]);const n=await Object(r.b)(x,i);M(Object(l.a)(n))},onSearchChange:async e=>{E(!0),y(await Object(r.c)(x,e,T)),E(!1)},onBlur:()=>{g||t("index","")}})),Object(u.jsx)(c.EuiSpacer,{size:"m"}),Object(u.jsx)(c.EuiSwitch,{"data-test-subj":"indexRefreshCheckbox",checked:p||!1,disabled:b,onChange:e=>{t("refresh",e.target.checked)},label:Object(u.jsx)(s.a.Fragment,null,Object(u.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.refreshLabel",defaultMessage:"Refresh index"})," ",Object(u.jsx)(c.EuiIconTip,{position:"right",type:"questionInCircle",content:a.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.indexAction.refreshTooltip",{defaultMessage:"Refresh the affected shards to make this operation visible to search."})}))}),Object(u.jsx)(c.EuiSpacer,{size:"m"}),h&&Object(u.jsx)(c.EuiSwitch,{"data-test-subj":"hasTimeFieldCheckbox",checked:O||!1,disabled:b,onChange:()=>{A(!O),O&&t("executionTimeField",null)},label:Object(u.jsx)(s.a.Fragment,null,Object(u.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.defineTimeFieldLabel",defaultMessage:"Define time field for each document"}),Object(u.jsx)(c.EuiIconTip,{position:"right",type:"questionInCircle",content:a.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.indexAction.definedateFieldTooltip",{defaultMessage:"Set this time field to the time the document was indexed."})}))}),O&&Object(u.jsx)(s.a.Fragment,null,Object(u.jsx)(c.EuiSpacer,{size:"m"}),Object(u.jsx)(c.EuiFormRow,{id:"executionTimeField",fullWidth:!0,label:Object(u.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.executionTimeFieldLabel",defaultMessage:"Time field"})},Object(u.jsx)(c.EuiSelect,{options:k,fullWidth:!0,name:"executionTimeField","data-test-subj":"executionTimeFieldSelect",value:null!=m?m:"",onChange:e=>{var i;t("executionTimeField",null==(i=e.target.value)||""===i.trim()?null:i)},onBlur:()=>{void 0===m&&t("executionTimeField",null)}}))))}},59:function(e,t,i){"use strict";i.d(t,"a",(function(){return n.KibanaContextProvider})),i.d(t,"b",(function(){return s}));var n=i(35);const s=()=>Object(n.useKibana)()}}]);